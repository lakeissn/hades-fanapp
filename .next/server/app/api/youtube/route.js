"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/youtube/route";
exports.ids = ["app/api/youtube/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fyoutube%2Froute&page=%2Fapi%2Fyoutube%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fyoutube%2Froute.ts&appDir=C%3A%5CUsers%5Cpyosh%5COneDrive%5C%EB%B0%94%ED%83%95%20%ED%99%94%EB%A9%B4%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpyosh%5COneDrive%5C%EB%B0%94%ED%83%95%20%ED%99%94%EB%A9%B4%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fyoutube%2Froute&page=%2Fapi%2Fyoutube%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fyoutube%2Froute.ts&appDir=C%3A%5CUsers%5Cpyosh%5COneDrive%5C%EB%B0%94%ED%83%95%20%ED%99%94%EB%A9%B4%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpyosh%5COneDrive%5C%EB%B0%94%ED%83%95%20%ED%99%94%EB%A9%B4%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_pyosh_OneDrive_hades_fanapp_app_api_youtube_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/youtube/route.ts */ \"(rsc)/./app/api/youtube/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/youtube/route\",\n        pathname: \"/api/youtube\",\n        filename: \"route\",\n        bundlePath: \"app/api/youtube/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\pyosh\\\\OneDrive\\\\바탕 화면\\\\hades-fanapp\\\\app\\\\api\\\\youtube\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_pyosh_OneDrive_hades_fanapp_app_api_youtube_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/youtube/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ5b3V0dWJlJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ5b3V0dWJlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGeW91dHViZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNweW9zaCU1Q09uZURyaXZlJTVDJUVCJUIwJTk0JUVEJTgzJTk1JTIwJUVEJTk5JTk0JUVCJUE5JUI0JTVDaGFkZXMtZmFuYXBwJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNweW9zaCU1Q09uZURyaXZlJTVDJUVCJUIwJTk0JUVEJTgzJTk1JTIwJUVEJTk5JTk0JUVCJUE5JUI0JTVDaGFkZXMtZmFuYXBwJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUM0QjtBQUN6RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2hhZGVzLWZhbmFwcC8/MGNkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxweW9zaFxcXFxPbmVEcml2ZVxcXFzrsJTtg5Ug7ZmU66m0XFxcXGhhZGVzLWZhbmFwcFxcXFxhcHBcXFxcYXBpXFxcXHlvdXR1YmVcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3lvdXR1YmUvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS95b3V0dWJlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS95b3V0dWJlL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxccHlvc2hcXFxcT25lRHJpdmVcXFxc67CU7YOVIO2ZlOuptFxcXFxoYWRlcy1mYW5hcHBcXFxcYXBwXFxcXGFwaVxcXFx5b3V0dWJlXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS95b3V0dWJlL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fyoutube%2Froute&page=%2Fapi%2Fyoutube%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fyoutube%2Froute.ts&appDir=C%3A%5CUsers%5Cpyosh%5COneDrive%5C%EB%B0%94%ED%83%95%20%ED%99%94%EB%A9%B4%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpyosh%5COneDrive%5C%EB%B0%94%ED%83%95%20%ED%99%94%EB%A9%B4%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/youtube/route.ts":
/*!**********************************!*\
  !*** ./app/api/youtube/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\nconst CHANNEL_URL = \"https://www.youtube.com/@HADES_offi\";\nconst COMMON_HEADERS = {\n    \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\",\n    \"Accept-Language\": \"ko-KR,ko;q=0.9\"\n};\nlet cached = null;\nfunction extractVideoId(text) {\n    const match = text.match(/\\/watch\\?v=([a-zA-Z0-9_-]{11})/);\n    return match?.[1] ?? null;\n}\nfunction extractShortsId(text) {\n    const match = text.match(/\\/shorts\\/([a-zA-Z0-9_-]{11})/);\n    return match?.[1] ?? null;\n}\nfunction decodeUnicode(str) {\n    return str.replace(/\\\\u([0-9a-fA-F]{4})/g, (_, hex)=>String.fromCharCode(parseInt(hex, 16))).replace(/\\\\\"/g, '\"').replace(/\\\\n/g, \" \");\n}\n/**\r\n * 유효한 제목인지 검증\r\n * - \"닫기\", 순수 타임스탬프, 빈 문자열 등은 제외\r\n */ function isValidTitle(title) {\n    if (!title || title.trim().length < 2) return false;\n    const t = title.trim();\n    // \"닫기\" (Shorts 페이지의 close 버튼 텍스트)\n    if (t === \"닫기\" || t === \"Close\") return false;\n    // 순수 타임스탬프 패턴 (예: \"0:00\", \"1:23:45\", \"00:30\")\n    if (/^\\d{1,2}(:\\d{2}){1,2}$/.test(t)) return false;\n    // 타임스탬프 + 슬래시 패턴 (예: \"0:00 / 3:45\")\n    if (/^\\d{1,2}(:\\d{2}){1,2}\\s*\\/\\s*\\d{1,2}(:\\d{2}){1,2}$/.test(t)) return false;\n    // YouTube UI 관련 텍스트\n    const uiTexts = [\n        \"YouTube\",\n        \"구독\",\n        \"좋아요\",\n        \"싫어요\",\n        \"공유\",\n        \"저장\",\n        \"Subscribe\",\n        \"Like\",\n        \"Dislike\",\n        \"Share\",\n        \"Save\",\n        \"더보기\",\n        \"간략히\",\n        \"Show more\",\n        \"Show less\",\n        \"댓글\",\n        \"Comments\"\n    ];\n    if (uiTexts.includes(t)) return false;\n    return true;\n}\n/**\r\n * 개선된 제목 추출 - 여러 패턴을 시도하여 실제 영상 제목을 확실히 가져옴\r\n * Shorts의 \"닫기\" 문제 및 Video의 타임스탬프 문제를 방지\r\n */ function extractTitle(html, videoId) {\n    const candidates = [];\n    // 1) videoId 주변에서 title 추출 (가장 신뢰도 높음)\n    const idx = html.indexOf(`\"videoId\":\"${videoId}\"`);\n    if (idx !== -1) {\n        // videoId 뒤쪽 탐색\n        const chunk = html.substring(idx, Math.min(idx + 1200, html.length));\n        // runs 형식: \"title\":{\"runs\":[{\"text\":\"...\"}]}\n        const runsMatch = chunk.match(/\"title\"\\s*:\\s*\\{\\s*\"runs\"\\s*:\\s*\\[\\s*\\{\\s*\"text\"\\s*:\\s*\"([^\"]+)\"/);\n        if (runsMatch?.[1]) {\n            const t = decodeUnicode(runsMatch[1]);\n            if (isValidTitle(t)) candidates.push(t);\n        }\n        // simpleText 형식: \"title\":{\"simpleText\":\"...\"}\n        const simpleMatch = chunk.match(/\"title\"\\s*:\\s*\\{\\s*\"simpleText\"\\s*:\\s*\"([^\"]+)\"/);\n        if (simpleMatch?.[1]) {\n            const t = decodeUnicode(simpleMatch[1]);\n            if (isValidTitle(t)) candidates.push(t);\n        }\n        // 이미 유효한 제목을 찾았으면 반환\n        if (candidates.length > 0) return candidates[0];\n        // videoId 앞쪽에서도 탐색 (제목이 videoId보다 먼저 올 수 있음)\n        if (idx > 300) {\n            const beforeChunk = html.substring(Math.max(0, idx - 600), idx + 100);\n            const beforeRuns = beforeChunk.match(/\"title\"\\s*:\\s*\\{\\s*\"runs\"\\s*:\\s*\\[\\s*\\{\\s*\"text\"\\s*:\\s*\"([^\"]+)\"/);\n            if (beforeRuns?.[1]) {\n                const t = decodeUnicode(beforeRuns[1]);\n                if (isValidTitle(t)) candidates.push(t);\n            }\n            const beforeSimple = beforeChunk.match(/\"title\"\\s*:\\s*\\{\\s*\"simpleText\"\\s*:\\s*\"([^\"]+)\"/);\n            if (beforeSimple?.[1]) {\n                const t = decodeUnicode(beforeSimple[1]);\n                if (isValidTitle(t)) candidates.push(t);\n            }\n        }\n    }\n    if (candidates.length > 0) return candidates[0];\n    // 2) gridVideoRenderer / reelItemRenderer 기반 탐색 (채널 페이지에서 렌더링되는 형태)\n    // videoId를 포함하는 renderer 블록을 찾고, 그 안에서 title 추출\n    const rendererPatterns = [\n        new RegExp(`\"gridVideoRenderer\"\\\\s*:\\\\s*\\\\{[^}]*?\"videoId\"\\\\s*:\\\\s*\"${videoId}\"[\\\\s\\\\S]{0,800}?\"title\"\\\\s*:\\\\s*\\\\{\\\\s*(?:\"runs\"\\\\s*:\\\\s*\\\\[\\\\s*\\\\{\\\\s*\"text\"\\\\s*:\\\\s*\"([^\"]+)\"|\"simpleText\"\\\\s*:\\\\s*\"([^\"]+)\")`, \"m\"),\n        new RegExp(`\"reelItemRenderer\"\\\\s*:\\\\s*\\\\{[^}]*?\"videoId\"\\\\s*:\\\\s*\"${videoId}\"[\\\\s\\\\S]{0,800}?\"headline\"\\\\s*:\\\\s*\\\\{\\\\s*\"simpleText\"\\\\s*:\\\\s*\"([^\"]+)\"`, \"m\"),\n        new RegExp(`\"videoId\"\\\\s*:\\\\s*\"${videoId}\"[\\\\s\\\\S]{0,1000}?\"headline\"\\\\s*:\\\\s*\\\\{\\\\s*\"simpleText\"\\\\s*:\\\\s*\"([^\"]+)\"`, \"m\")\n    ];\n    for (const pattern of rendererPatterns){\n        const match = html.match(pattern);\n        if (match) {\n            const t = decodeUnicode(match[1] || match[2] || match[3] || \"\");\n            if (isValidTitle(t)) return t;\n        }\n    }\n    // 3) accessibilityData에서 label 추출\n    const accessPatterns = [\n        new RegExp(`\"videoId\"\\\\s*:\\\\s*\"${videoId}\"[\\\\s\\\\S]{0,2000}?\"accessibilityData\"\\\\s*:\\\\s*\\\\{\\\\s*\"label\"\\\\s*:\\\\s*\"([^\"]+)\"`, \"m\"),\n        new RegExp(`\"accessibilityData\"\\\\s*:\\\\s*\\\\{\\\\s*\"label\"\\\\s*:\\\\s*\"([^\"]*${videoId}[^\"]*)\"`, \"m\")\n    ];\n    for (const pattern of accessPatterns){\n        const match = html.match(pattern);\n        if (match?.[1]) {\n            const label = decodeUnicode(match[1]);\n            // label은 보통 \"제목 by 채널 N views N ago\" 형태 → 맨 앞 부분 사용\n            // 또는 \"제목 - 재생 시간: N분 N초\" 형태\n            let title = label;\n            const byIndex = label.lastIndexOf(\" by \");\n            if (byIndex > 0) title = label.substring(0, byIndex).trim();\n            // 재생 시간 부분 제거\n            title = title.replace(/\\s*-\\s*재생 시간:.*$/, \"\").trim();\n            title = title.replace(/\\s*-\\s*play length.*$/i, \"\").trim();\n            if (isValidTitle(title)) return title;\n        }\n    }\n    // 4) og:title 메타 태그 (개별 영상 페이지인 경우)\n    const ogTitle = html.match(/<meta[^>]+property=[\"']og:title[\"'][^>]+content=[\"']([^\"']+)[\"']/i) ?? html.match(/<meta[^>]+content=[\"']([^\"']+)[\"'][^>]+property=[\"']og:title[\"']/i);\n    if (ogTitle?.[1]) {\n        const t = decodeUnicode(ogTitle[1]).trim();\n        if (t && !t.includes(\"YouTube\") && !t.includes(\"@\") && isValidTitle(t)) return t;\n    }\n    // 5) <title> 태그\n    const titleTag = html.match(/<title[^>]*>([^<]+)<\\/title>/i);\n    if (titleTag?.[1]) {\n        const t = titleTag[1].replace(/\\s*-\\s*YouTube\\s*$/i, \"\").trim();\n        if (isValidTitle(t) && !t.includes(\"@\")) return t;\n    }\n    return \"\";\n}\n/**\r\n * Shorts 전용 제목 추출 - 채널 shorts 탭 HTML에서 reelItemRenderer 기반으로 추출\r\n * 일반 extractTitle과 달리 Shorts 특유의 JSON 구조(headline, overlayMetadata 등)를 우선 탐색\r\n */ function extractShortsTitle(html, shortsId) {\n    const candidates = [];\n    // shortsId가 HTML에서 등장하는 모든 위치를 탐색\n    // YouTube Shorts 채널 탭에서는 \"videoId\":\"ID\" 외에도 \"/shorts/ID\" 형태로 등장\n    const searchPatterns = [\n        `\"${shortsId}\"`,\n        `\\\\/shorts\\\\/${shortsId}`\n    ];\n    for (const searchStr of searchPatterns){\n        let searchIdx = 0;\n        const plainStr = searchStr.replace(/\\\\\\\\/g, \"/\");\n        while(true){\n            const idIdx = html.indexOf(plainStr.includes(\"/shorts/\") ? `/shorts/${shortsId}` : `\"${shortsId}\"`, searchIdx);\n            if (idIdx === -1) break;\n            searchIdx = idIdx + 1;\n            // ID 주변 앞뒤 2500자 범위에서 탐색\n            const start = Math.max(0, idIdx - 1500);\n            const end = Math.min(html.length, idIdx + 2500);\n            const chunk = html.substring(start, end);\n            // headline.simpleText 패턴 (reelItemRenderer에서 가장 흔함)\n            const headlineSimple = chunk.match(/\"headline\"\\s*:\\s*\\{\\s*\"simpleText\"\\s*:\\s*\"([^\"]+)\"/);\n            if (headlineSimple?.[1]) {\n                const t = decodeUnicode(headlineSimple[1]);\n                if (isValidTitle(t)) candidates.push(t);\n            }\n            // headline.runs 패턴\n            const headlineRuns = chunk.match(/\"headline\"\\s*:\\s*\\{\\s*\"runs\"\\s*:\\s*\\[\\s*\\{\\s*\"text\"\\s*:\\s*\"([^\"]+)\"/);\n            if (headlineRuns?.[1]) {\n                const t = decodeUnicode(headlineRuns[1]);\n                if (isValidTitle(t)) candidates.push(t);\n            }\n            // overlayMetadata.primaryText.content 패턴\n            const overlayPrimary = chunk.match(/\"primaryText\"\\s*:\\s*\\{\\s*\"content\"\\s*:\\s*\"([^\"]+)\"/);\n            if (overlayPrimary?.[1]) {\n                const t = decodeUnicode(overlayPrimary[1]);\n                if (isValidTitle(t)) candidates.push(t);\n            }\n            // title.runs 패턴\n            const titleRuns = chunk.match(/\"title\"\\s*:\\s*\\{\\s*\"runs\"\\s*:\\s*\\[\\s*\\{\\s*\"text\"\\s*:\\s*\"([^\"]+)\"/);\n            if (titleRuns?.[1]) {\n                const t = decodeUnicode(titleRuns[1]);\n                if (isValidTitle(t)) candidates.push(t);\n            }\n            // title.simpleText 패턴\n            const titleSimple = chunk.match(/\"title\"\\s*:\\s*\\{\\s*\"simpleText\"\\s*:\\s*\"([^\"]+)\"/);\n            if (titleSimple?.[1]) {\n                const t = decodeUnicode(titleSimple[1]);\n                if (isValidTitle(t)) candidates.push(t);\n            }\n            if (candidates.length > 0) return candidates[0];\n        }\n    }\n    if (candidates.length > 0) return candidates[0];\n    // accessibilityData.label에서 추출\n    const accessPatterns = [\n        new RegExp(`\"${shortsId}\"[\\\\s\\\\S]{0,3000}?\"accessibilityData\"\\\\s*:\\\\s*\\\\{\\\\s*\"label\"\\\\s*:\\\\s*\"([^\"]+)\"`, \"m\"),\n        new RegExp(`\"accessibilityData\"\\\\s*:\\\\s*\\\\{\\\\s*\"label\"\\\\s*:\\\\s*\"([^\"]*${shortsId}[^\"]*)\"`, \"m\")\n    ];\n    for (const pattern of accessPatterns){\n        const match = html.match(pattern);\n        if (match?.[1]) {\n            const label = decodeUnicode(match[1]);\n            let title = label;\n            // \" - \" 이후 제거 (조회수 등)\n            const dashIdx = title.indexOf(\" - \");\n            if (dashIdx > 0) title = title.substring(0, dashIdx).trim();\n            // 마지막 \", N views\" 패턴 제거\n            title = title.replace(/,\\s*\\d[\\d,.]*\\s*(views?|조회|회).*$/i, \"\").trim();\n            if (isValidTitle(title)) return title;\n        }\n    }\n    // 일반 extractTitle로 폴백\n    return extractTitle(html, shortsId);\n}\n/**\r\n * 개별 Shorts 페이지에서 제목 직접 가져오기 (채널 페이지에서 실패 시 폴백)\r\n */ async function fetchShortsTitleDirect(shortsId) {\n    try {\n        const res = await fetch(`https://www.youtube.com/shorts/${shortsId}`, {\n            headers: COMMON_HEADERS,\n            cache: \"no-store\"\n        });\n        const html = await res.text();\n        // 1) og:title (가장 신뢰도 높음)\n        const ogTitle = html.match(/<meta[^>]+property=[\"']og:title[\"'][^>]+content=[\"']([^\"']+)[\"']/i) ?? html.match(/<meta[^>]+content=[\"']([^\"']+)[\"'][^>]+property=[\"']og:title[\"']/i);\n        if (ogTitle?.[1]) {\n            const t = decodeUnicode(ogTitle[1]).trim();\n            if (isValidTitle(t) && !t.includes(\"YouTube\") && !t.includes(\"@\")) return t;\n        }\n        // 2) <title> 태그\n        const titleTag = html.match(/<title[^>]*>([^<]+)<\\/title>/i);\n        if (titleTag?.[1]) {\n            const t = titleTag[1].replace(/\\s*-\\s*YouTube\\s*$/i, \"\").trim();\n            if (isValidTitle(t) && !t.includes(\"@\")) return t;\n        }\n        // 3) JSON 내 title.runs\n        const jsonTitle = html.match(/\"title\"\\s*:\\s*\\{\\s*\"runs\"\\s*:\\s*\\[\\s*\\{\\s*\"text\"\\s*:\\s*\"([^\"]+)\"/);\n        if (jsonTitle?.[1]) {\n            const t = decodeUnicode(jsonTitle[1]);\n            if (isValidTitle(t)) return t;\n        }\n        // 4) JSON 내 title.simpleText\n        const jsonSimple = html.match(/\"title\"\\s*:\\s*\\{\\s*\"simpleText\"\\s*:\\s*\"([^\"]+)\"/);\n        if (jsonSimple?.[1]) {\n            const t = decodeUnicode(jsonSimple[1]);\n            if (isValidTitle(t)) return t;\n        }\n        // 5) headline (Shorts 개별 페이지에서도 등장 가능)\n        const headline = html.match(/\"headline\"\\s*:\\s*\\{\\s*\"simpleText\"\\s*:\\s*\"([^\"]+)\"/);\n        if (headline?.[1]) {\n            const t = decodeUnicode(headline[1]);\n            if (isValidTitle(t)) return t;\n        }\n        // 6) engagementPanels 내 제목 (Shorts 페이지 특유)\n        const engagementTitle = html.match(/\"headerTitle\"\\s*:\\s*\"([^\"]+)\"/);\n        if (engagementTitle?.[1]) {\n            const t = decodeUnicode(engagementTitle[1]);\n            if (isValidTitle(t)) return t;\n        }\n        return \"\";\n    } catch  {\n        return \"\";\n    }\n}\nasync function fetchLatestVideo() {\n    try {\n        const res = await fetch(`${CHANNEL_URL}/videos`, {\n            headers: COMMON_HEADERS,\n            cache: \"no-store\"\n        });\n        const html = await res.text();\n        const videoId = extractVideoId(html);\n        if (!videoId) return null;\n        const title = extractTitle(html, videoId);\n        const thumbnail = `https://i.ytimg.com/vi/${videoId}/hqdefault.jpg`;\n        return {\n            id: videoId,\n            title: title || \"HADES 영상\",\n            thumbnail,\n            url: `https://www.youtube.com/watch?v=${videoId}`,\n            type: \"video\",\n            publishedAt: null\n        };\n    } catch  {\n        return null;\n    }\n}\nasync function fetchLatestShort() {\n    try {\n        const res = await fetch(`${CHANNEL_URL}/shorts`, {\n            headers: COMMON_HEADERS,\n            cache: \"no-store\"\n        });\n        const html = await res.text();\n        const shortsId = extractShortsId(html);\n        if (!shortsId) return null;\n        // 1차: 채널 shorts 탭 HTML에서 Shorts 전용 추출\n        let title = extractShortsTitle(html, shortsId);\n        // 2차: 실패 시 개별 Shorts 페이지에서 직접 가져오기\n        if (!title) {\n            title = await fetchShortsTitleDirect(shortsId);\n        }\n        const thumbnail = `https://i.ytimg.com/vi/${shortsId}/hqdefault.jpg`;\n        return {\n            id: shortsId,\n            title: title || \"HADES Shorts\",\n            thumbnail,\n            url: `https://www.youtube.com/shorts/${shortsId}`,\n            type: \"shorts\",\n            publishedAt: null\n        };\n    } catch  {\n        return null;\n    }\n}\nasync function GET() {\n    const now = Date.now();\n    if (cached && cached.expiresAt > now) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(cached.data);\n    }\n    try {\n        const [video, short] = await Promise.all([\n            fetchLatestVideo(),\n            fetchLatestShort()\n        ]);\n        const results = [\n            video,\n            short\n        ].filter(Boolean);\n        cached = {\n            data: results,\n            expiresAt: now + 30 * 60 * 1000\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(results);\n    } catch  {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json([]);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3lvdXR1YmUvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkM7QUFXM0MsTUFBTUMsY0FBYztBQUNwQixNQUFNQyxpQkFBaUI7SUFDckIsY0FBYztJQUNkLG1CQUFtQjtBQUNyQjtBQUVBLElBQUlDLFNBQTZEO0FBRWpFLFNBQVNDLGVBQWVDLElBQVk7SUFDbEMsTUFBTUMsUUFBUUQsS0FBS0MsS0FBSyxDQUFDO0lBQ3pCLE9BQU9BLE9BQU8sQ0FBQyxFQUFFLElBQUk7QUFDdkI7QUFFQSxTQUFTQyxnQkFBZ0JGLElBQVk7SUFDbkMsTUFBTUMsUUFBUUQsS0FBS0MsS0FBSyxDQUFDO0lBQ3pCLE9BQU9BLE9BQU8sQ0FBQyxFQUFFLElBQUk7QUFDdkI7QUFFQSxTQUFTRSxjQUFjQyxHQUFXO0lBQ2hDLE9BQU9BLElBQ0pDLE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQ0MsR0FBR0MsTUFBUUMsT0FBT0MsWUFBWSxDQUFDQyxTQUFTSCxLQUFLLE1BQzlFRixPQUFPLENBQUMsUUFBUSxLQUNoQkEsT0FBTyxDQUFDLFFBQVE7QUFDckI7QUFFQTs7O0NBR0MsR0FDRCxTQUFTTSxhQUFhQyxLQUFhO0lBQ2pDLElBQUksQ0FBQ0EsU0FBU0EsTUFBTUMsSUFBSSxHQUFHQyxNQUFNLEdBQUcsR0FBRyxPQUFPO0lBQzlDLE1BQU1DLElBQUlILE1BQU1DLElBQUk7SUFFcEIsa0NBQWtDO0lBQ2xDLElBQUlFLE1BQU0sUUFBUUEsTUFBTSxTQUFTLE9BQU87SUFFeEMsOENBQThDO0lBQzlDLElBQUkseUJBQXlCQyxJQUFJLENBQUNELElBQUksT0FBTztJQUU3QyxvQ0FBb0M7SUFDcEMsSUFBSSxxREFBcURDLElBQUksQ0FBQ0QsSUFBSSxPQUFPO0lBRXpFLG9CQUFvQjtJQUNwQixNQUFNRSxVQUFVO1FBQ2Q7UUFBVztRQUFNO1FBQU87UUFBTztRQUFNO1FBQ3JDO1FBQWE7UUFBUTtRQUFXO1FBQVM7UUFDekM7UUFBTztRQUFPO1FBQWE7UUFDM0I7UUFBTTtLQUNQO0lBQ0QsSUFBSUEsUUFBUUMsUUFBUSxDQUFDSCxJQUFJLE9BQU87SUFFaEMsT0FBTztBQUNUO0FBRUE7OztDQUdDLEdBQ0QsU0FBU0ksYUFBYUMsSUFBWSxFQUFFQyxPQUFlO0lBQ2pELE1BQU1DLGFBQXVCLEVBQUU7SUFFL0IsdUNBQXVDO0lBQ3ZDLE1BQU1DLE1BQU1ILEtBQUtJLE9BQU8sQ0FBQyxDQUFDLFdBQVcsRUFBRUgsUUFBUSxDQUFDLENBQUM7SUFDakQsSUFBSUUsUUFBUSxDQUFDLEdBQUc7UUFDZCxnQkFBZ0I7UUFDaEIsTUFBTUUsUUFBUUwsS0FBS00sU0FBUyxDQUFDSCxLQUFLSSxLQUFLQyxHQUFHLENBQUNMLE1BQU0sTUFBTUgsS0FBS04sTUFBTTtRQUVsRSw2Q0FBNkM7UUFDN0MsTUFBTWUsWUFBWUosTUFBTXhCLEtBQUssQ0FBQztRQUM5QixJQUFJNEIsV0FBVyxDQUFDLEVBQUUsRUFBRTtZQUNsQixNQUFNZCxJQUFJWixjQUFjMEIsU0FBUyxDQUFDLEVBQUU7WUFDcEMsSUFBSWxCLGFBQWFJLElBQUlPLFdBQVdRLElBQUksQ0FBQ2Y7UUFDdkM7UUFFQSw4Q0FBOEM7UUFDOUMsTUFBTWdCLGNBQWNOLE1BQU14QixLQUFLLENBQUM7UUFDaEMsSUFBSThCLGFBQWEsQ0FBQyxFQUFFLEVBQUU7WUFDcEIsTUFBTWhCLElBQUlaLGNBQWM0QixXQUFXLENBQUMsRUFBRTtZQUN0QyxJQUFJcEIsYUFBYUksSUFBSU8sV0FBV1EsSUFBSSxDQUFDZjtRQUN2QztRQUVBLHFCQUFxQjtRQUNyQixJQUFJTyxXQUFXUixNQUFNLEdBQUcsR0FBRyxPQUFPUSxVQUFVLENBQUMsRUFBRTtRQUUvQyw2Q0FBNkM7UUFDN0MsSUFBSUMsTUFBTSxLQUFLO1lBQ2IsTUFBTVMsY0FBY1osS0FBS00sU0FBUyxDQUFDQyxLQUFLTSxHQUFHLENBQUMsR0FBR1YsTUFBTSxNQUFNQSxNQUFNO1lBQ2pFLE1BQU1XLGFBQWFGLFlBQVkvQixLQUFLLENBQUM7WUFDckMsSUFBSWlDLFlBQVksQ0FBQyxFQUFFLEVBQUU7Z0JBQ25CLE1BQU1uQixJQUFJWixjQUFjK0IsVUFBVSxDQUFDLEVBQUU7Z0JBQ3JDLElBQUl2QixhQUFhSSxJQUFJTyxXQUFXUSxJQUFJLENBQUNmO1lBQ3ZDO1lBQ0EsTUFBTW9CLGVBQWVILFlBQVkvQixLQUFLLENBQUM7WUFDdkMsSUFBSWtDLGNBQWMsQ0FBQyxFQUFFLEVBQUU7Z0JBQ3JCLE1BQU1wQixJQUFJWixjQUFjZ0MsWUFBWSxDQUFDLEVBQUU7Z0JBQ3ZDLElBQUl4QixhQUFhSSxJQUFJTyxXQUFXUSxJQUFJLENBQUNmO1lBQ3ZDO1FBQ0Y7SUFDRjtJQUVBLElBQUlPLFdBQVdSLE1BQU0sR0FBRyxHQUFHLE9BQU9RLFVBQVUsQ0FBQyxFQUFFO0lBRS9DLG9FQUFvRTtJQUNwRSxnREFBZ0Q7SUFDaEQsTUFBTWMsbUJBQW1CO1FBQ3ZCLElBQUlDLE9BQU8sQ0FBQyx3REFBd0QsRUFBRWhCLFFBQVEsZ0lBQWdJLENBQUMsRUFBRTtRQUNqTixJQUFJZ0IsT0FBTyxDQUFDLHVEQUF1RCxFQUFFaEIsUUFBUSx5RUFBeUUsQ0FBQyxFQUFFO1FBQ3pKLElBQUlnQixPQUFPLENBQUMsbUJBQW1CLEVBQUVoQixRQUFRLDBFQUEwRSxDQUFDLEVBQUU7S0FDdkg7SUFFRCxLQUFLLE1BQU1pQixXQUFXRixpQkFBa0I7UUFDdEMsTUFBTW5DLFFBQVFtQixLQUFLbkIsS0FBSyxDQUFDcUM7UUFDekIsSUFBSXJDLE9BQU87WUFDVCxNQUFNYyxJQUFJWixjQUFjRixLQUFLLENBQUMsRUFBRSxJQUFJQSxLQUFLLENBQUMsRUFBRSxJQUFJQSxLQUFLLENBQUMsRUFBRSxJQUFJO1lBQzVELElBQUlVLGFBQWFJLElBQUksT0FBT0E7UUFDOUI7SUFDRjtJQUVBLGtDQUFrQztJQUNsQyxNQUFNd0IsaUJBQWlCO1FBQ3JCLElBQUlGLE9BQU8sQ0FBQyxtQkFBbUIsRUFBRWhCLFFBQVEsOEVBQThFLENBQUMsRUFBRTtRQUMxSCxJQUFJZ0IsT0FBTyxDQUFDLDBEQUEwRCxFQUFFaEIsUUFBUSxPQUFPLENBQUMsRUFBRTtLQUMzRjtJQUNELEtBQUssTUFBTWlCLFdBQVdDLGVBQWdCO1FBQ3BDLE1BQU10QyxRQUFRbUIsS0FBS25CLEtBQUssQ0FBQ3FDO1FBQ3pCLElBQUlyQyxPQUFPLENBQUMsRUFBRSxFQUFFO1lBQ2QsTUFBTXVDLFFBQVFyQyxjQUFjRixLQUFLLENBQUMsRUFBRTtZQUNwQyxvREFBb0Q7WUFDcEQsNEJBQTRCO1lBQzVCLElBQUlXLFFBQVE0QjtZQUNaLE1BQU1DLFVBQVVELE1BQU1FLFdBQVcsQ0FBQztZQUNsQyxJQUFJRCxVQUFVLEdBQUc3QixRQUFRNEIsTUFBTWQsU0FBUyxDQUFDLEdBQUdlLFNBQVM1QixJQUFJO1lBRXpELGNBQWM7WUFDZEQsUUFBUUEsTUFBTVAsT0FBTyxDQUFDLG9CQUFvQixJQUFJUSxJQUFJO1lBQ2xERCxRQUFRQSxNQUFNUCxPQUFPLENBQUMsMEJBQTBCLElBQUlRLElBQUk7WUFFeEQsSUFBSUYsYUFBYUMsUUFBUSxPQUFPQTtRQUNsQztJQUNGO0lBRUEsb0NBQW9DO0lBQ3BDLE1BQU0rQixVQUFVdkIsS0FBS25CLEtBQUssQ0FBQyx3RUFDdEJtQixLQUFLbkIsS0FBSyxDQUFDO0lBQ2hCLElBQUkwQyxTQUFTLENBQUMsRUFBRSxFQUFFO1FBQ2hCLE1BQU01QixJQUFJWixjQUFjd0MsT0FBTyxDQUFDLEVBQUUsRUFBRTlCLElBQUk7UUFDeEMsSUFBSUUsS0FBSyxDQUFDQSxFQUFFRyxRQUFRLENBQUMsY0FBYyxDQUFDSCxFQUFFRyxRQUFRLENBQUMsUUFBUVAsYUFBYUksSUFBSSxPQUFPQTtJQUNqRjtJQUVBLGdCQUFnQjtJQUNoQixNQUFNNkIsV0FBV3hCLEtBQUtuQixLQUFLLENBQUM7SUFDNUIsSUFBSTJDLFVBQVUsQ0FBQyxFQUFFLEVBQUU7UUFDakIsTUFBTTdCLElBQUk2QixRQUFRLENBQUMsRUFBRSxDQUFDdkMsT0FBTyxDQUFDLHVCQUF1QixJQUFJUSxJQUFJO1FBQzdELElBQUlGLGFBQWFJLE1BQU0sQ0FBQ0EsRUFBRUcsUUFBUSxDQUFDLE1BQU0sT0FBT0g7SUFDbEQ7SUFFQSxPQUFPO0FBQ1Q7QUFFQTs7O0NBR0MsR0FDRCxTQUFTOEIsbUJBQW1CekIsSUFBWSxFQUFFMEIsUUFBZ0I7SUFDeEQsTUFBTXhCLGFBQXVCLEVBQUU7SUFFL0Isa0NBQWtDO0lBQ2xDLGdFQUFnRTtJQUNoRSxNQUFNeUIsaUJBQWlCO1FBQ3JCLENBQUMsQ0FBQyxFQUFFRCxTQUFTLENBQUMsQ0FBQztRQUNmLENBQUMsWUFBWSxFQUFFQSxTQUFTLENBQUM7S0FDMUI7SUFFRCxLQUFLLE1BQU1FLGFBQWFELGVBQWdCO1FBQ3RDLElBQUlFLFlBQVk7UUFDaEIsTUFBTUMsV0FBV0YsVUFBVTNDLE9BQU8sQ0FBQyxTQUFTO1FBRTVDLE1BQU8sS0FBTTtZQUNYLE1BQU04QyxRQUFRL0IsS0FBS0ksT0FBTyxDQUN4QjBCLFNBQVNoQyxRQUFRLENBQUMsY0FBYyxDQUFDLFFBQVEsRUFBRTRCLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFQSxTQUFTLENBQUMsQ0FBQyxFQUN2RUc7WUFFRixJQUFJRSxVQUFVLENBQUMsR0FBRztZQUNsQkYsWUFBWUUsUUFBUTtZQUVwQix5QkFBeUI7WUFDekIsTUFBTUMsUUFBUXpCLEtBQUtNLEdBQUcsQ0FBQyxHQUFHa0IsUUFBUTtZQUNsQyxNQUFNRSxNQUFNMUIsS0FBS0MsR0FBRyxDQUFDUixLQUFLTixNQUFNLEVBQUVxQyxRQUFRO1lBQzFDLE1BQU0xQixRQUFRTCxLQUFLTSxTQUFTLENBQUMwQixPQUFPQztZQUVwQyxvREFBb0Q7WUFDcEQsTUFBTUMsaUJBQWlCN0IsTUFBTXhCLEtBQUssQ0FBQztZQUNuQyxJQUFJcUQsZ0JBQWdCLENBQUMsRUFBRSxFQUFFO2dCQUN2QixNQUFNdkMsSUFBSVosY0FBY21ELGNBQWMsQ0FBQyxFQUFFO2dCQUN6QyxJQUFJM0MsYUFBYUksSUFBSU8sV0FBV1EsSUFBSSxDQUFDZjtZQUN2QztZQUVBLG1CQUFtQjtZQUNuQixNQUFNd0MsZUFBZTlCLE1BQU14QixLQUFLLENBQUM7WUFDakMsSUFBSXNELGNBQWMsQ0FBQyxFQUFFLEVBQUU7Z0JBQ3JCLE1BQU14QyxJQUFJWixjQUFjb0QsWUFBWSxDQUFDLEVBQUU7Z0JBQ3ZDLElBQUk1QyxhQUFhSSxJQUFJTyxXQUFXUSxJQUFJLENBQUNmO1lBQ3ZDO1lBRUEseUNBQXlDO1lBQ3pDLE1BQU15QyxpQkFBaUIvQixNQUFNeEIsS0FBSyxDQUFDO1lBQ25DLElBQUl1RCxnQkFBZ0IsQ0FBQyxFQUFFLEVBQUU7Z0JBQ3ZCLE1BQU16QyxJQUFJWixjQUFjcUQsY0FBYyxDQUFDLEVBQUU7Z0JBQ3pDLElBQUk3QyxhQUFhSSxJQUFJTyxXQUFXUSxJQUFJLENBQUNmO1lBQ3ZDO1lBRUEsZ0JBQWdCO1lBQ2hCLE1BQU0wQyxZQUFZaEMsTUFBTXhCLEtBQUssQ0FBQztZQUM5QixJQUFJd0QsV0FBVyxDQUFDLEVBQUUsRUFBRTtnQkFDbEIsTUFBTTFDLElBQUlaLGNBQWNzRCxTQUFTLENBQUMsRUFBRTtnQkFDcEMsSUFBSTlDLGFBQWFJLElBQUlPLFdBQVdRLElBQUksQ0FBQ2Y7WUFDdkM7WUFFQSxzQkFBc0I7WUFDdEIsTUFBTTJDLGNBQWNqQyxNQUFNeEIsS0FBSyxDQUFDO1lBQ2hDLElBQUl5RCxhQUFhLENBQUMsRUFBRSxFQUFFO2dCQUNwQixNQUFNM0MsSUFBSVosY0FBY3VELFdBQVcsQ0FBQyxFQUFFO2dCQUN0QyxJQUFJL0MsYUFBYUksSUFBSU8sV0FBV1EsSUFBSSxDQUFDZjtZQUN2QztZQUVBLElBQUlPLFdBQVdSLE1BQU0sR0FBRyxHQUFHLE9BQU9RLFVBQVUsQ0FBQyxFQUFFO1FBQ2pEO0lBQ0Y7SUFFQSxJQUFJQSxXQUFXUixNQUFNLEdBQUcsR0FBRyxPQUFPUSxVQUFVLENBQUMsRUFBRTtJQUUvQywrQkFBK0I7SUFDL0IsTUFBTWlCLGlCQUFpQjtRQUNyQixJQUFJRixPQUFPLENBQUMsQ0FBQyxFQUFFUyxTQUFTLDhFQUE4RSxDQUFDLEVBQUU7UUFDekcsSUFBSVQsT0FBTyxDQUFDLDBEQUEwRCxFQUFFUyxTQUFTLE9BQU8sQ0FBQyxFQUFFO0tBQzVGO0lBQ0QsS0FBSyxNQUFNUixXQUFXQyxlQUFnQjtRQUNwQyxNQUFNdEMsUUFBUW1CLEtBQUtuQixLQUFLLENBQUNxQztRQUN6QixJQUFJckMsT0FBTyxDQUFDLEVBQUUsRUFBRTtZQUNkLE1BQU11QyxRQUFRckMsY0FBY0YsS0FBSyxDQUFDLEVBQUU7WUFDcEMsSUFBSVcsUUFBUTRCO1lBQ1osc0JBQXNCO1lBQ3RCLE1BQU1tQixVQUFVL0MsTUFBTVksT0FBTyxDQUFDO1lBQzlCLElBQUltQyxVQUFVLEdBQUcvQyxRQUFRQSxNQUFNYyxTQUFTLENBQUMsR0FBR2lDLFNBQVM5QyxJQUFJO1lBQ3pELHdCQUF3QjtZQUN4QkQsUUFBUUEsTUFBTVAsT0FBTyxDQUFDLHFDQUFxQyxJQUFJUSxJQUFJO1lBQ25FLElBQUlGLGFBQWFDLFFBQVEsT0FBT0E7UUFDbEM7SUFDRjtJQUVBLHNCQUFzQjtJQUN0QixPQUFPTyxhQUFhQyxNQUFNMEI7QUFDNUI7QUFFQTs7Q0FFQyxHQUNELGVBQWVjLHVCQUF1QmQsUUFBZ0I7SUFDcEQsSUFBSTtRQUNGLE1BQU1lLE1BQU0sTUFBTUMsTUFBTSxDQUFDLCtCQUErQixFQUFFaEIsU0FBUyxDQUFDLEVBQUU7WUFDcEVpQixTQUFTbEU7WUFDVG1FLE9BQU87UUFDVDtRQUNBLE1BQU01QyxPQUFPLE1BQU15QyxJQUFJN0QsSUFBSTtRQUUzQiwwQkFBMEI7UUFDMUIsTUFBTTJDLFVBQVV2QixLQUFLbkIsS0FBSyxDQUFDLHdFQUN0Qm1CLEtBQUtuQixLQUFLLENBQUM7UUFDaEIsSUFBSTBDLFNBQVMsQ0FBQyxFQUFFLEVBQUU7WUFDaEIsTUFBTTVCLElBQUlaLGNBQWN3QyxPQUFPLENBQUMsRUFBRSxFQUFFOUIsSUFBSTtZQUN4QyxJQUFJRixhQUFhSSxNQUFNLENBQUNBLEVBQUVHLFFBQVEsQ0FBQyxjQUFjLENBQUNILEVBQUVHLFFBQVEsQ0FBQyxNQUFNLE9BQU9IO1FBQzVFO1FBRUEsZ0JBQWdCO1FBQ2hCLE1BQU02QixXQUFXeEIsS0FBS25CLEtBQUssQ0FBQztRQUM1QixJQUFJMkMsVUFBVSxDQUFDLEVBQUUsRUFBRTtZQUNqQixNQUFNN0IsSUFBSTZCLFFBQVEsQ0FBQyxFQUFFLENBQUN2QyxPQUFPLENBQUMsdUJBQXVCLElBQUlRLElBQUk7WUFDN0QsSUFBSUYsYUFBYUksTUFBTSxDQUFDQSxFQUFFRyxRQUFRLENBQUMsTUFBTSxPQUFPSDtRQUNsRDtRQUVBLHVCQUF1QjtRQUN2QixNQUFNa0QsWUFBWTdDLEtBQUtuQixLQUFLLENBQUM7UUFDN0IsSUFBSWdFLFdBQVcsQ0FBQyxFQUFFLEVBQUU7WUFDbEIsTUFBTWxELElBQUlaLGNBQWM4RCxTQUFTLENBQUMsRUFBRTtZQUNwQyxJQUFJdEQsYUFBYUksSUFBSSxPQUFPQTtRQUM5QjtRQUVBLDZCQUE2QjtRQUM3QixNQUFNbUQsYUFBYTlDLEtBQUtuQixLQUFLLENBQUM7UUFDOUIsSUFBSWlFLFlBQVksQ0FBQyxFQUFFLEVBQUU7WUFDbkIsTUFBTW5ELElBQUlaLGNBQWMrRCxVQUFVLENBQUMsRUFBRTtZQUNyQyxJQUFJdkQsYUFBYUksSUFBSSxPQUFPQTtRQUM5QjtRQUVBLHVDQUF1QztRQUN2QyxNQUFNb0QsV0FBVy9DLEtBQUtuQixLQUFLLENBQUM7UUFDNUIsSUFBSWtFLFVBQVUsQ0FBQyxFQUFFLEVBQUU7WUFDakIsTUFBTXBELElBQUlaLGNBQWNnRSxRQUFRLENBQUMsRUFBRTtZQUNuQyxJQUFJeEQsYUFBYUksSUFBSSxPQUFPQTtRQUM5QjtRQUVBLDJDQUEyQztRQUMzQyxNQUFNcUQsa0JBQWtCaEQsS0FBS25CLEtBQUssQ0FBQztRQUNuQyxJQUFJbUUsaUJBQWlCLENBQUMsRUFBRSxFQUFFO1lBQ3hCLE1BQU1yRCxJQUFJWixjQUFjaUUsZUFBZSxDQUFDLEVBQUU7WUFDMUMsSUFBSXpELGFBQWFJLElBQUksT0FBT0E7UUFDOUI7UUFFQSxPQUFPO0lBQ1QsRUFBRSxPQUFNO1FBQ04sT0FBTztJQUNUO0FBQ0Y7QUFFQSxlQUFlc0Q7SUFDYixJQUFJO1FBQ0YsTUFBTVIsTUFBTSxNQUFNQyxNQUFNLENBQUMsRUFBRWxFLFlBQVksT0FBTyxDQUFDLEVBQUU7WUFDL0NtRSxTQUFTbEU7WUFDVG1FLE9BQU87UUFDVDtRQUNBLE1BQU01QyxPQUFPLE1BQU15QyxJQUFJN0QsSUFBSTtRQUMzQixNQUFNcUIsVUFBVXRCLGVBQWVxQjtRQUMvQixJQUFJLENBQUNDLFNBQVMsT0FBTztRQUVyQixNQUFNVCxRQUFRTyxhQUFhQyxNQUFNQztRQUNqQyxNQUFNaUQsWUFBWSxDQUFDLHVCQUF1QixFQUFFakQsUUFBUSxjQUFjLENBQUM7UUFFbkUsT0FBTztZQUNMa0QsSUFBSWxEO1lBQ0pULE9BQU9BLFNBQVM7WUFDaEIwRDtZQUNBRSxLQUFLLENBQUMsZ0NBQWdDLEVBQUVuRCxRQUFRLENBQUM7WUFDakRvRCxNQUFNO1lBQ05DLGFBQWE7UUFDZjtJQUNGLEVBQUUsT0FBTTtRQUNOLE9BQU87SUFDVDtBQUNGO0FBRUEsZUFBZUM7SUFDYixJQUFJO1FBQ0YsTUFBTWQsTUFBTSxNQUFNQyxNQUFNLENBQUMsRUFBRWxFLFlBQVksT0FBTyxDQUFDLEVBQUU7WUFDL0NtRSxTQUFTbEU7WUFDVG1FLE9BQU87UUFDVDtRQUNBLE1BQU01QyxPQUFPLE1BQU15QyxJQUFJN0QsSUFBSTtRQUMzQixNQUFNOEMsV0FBVzVDLGdCQUFnQmtCO1FBQ2pDLElBQUksQ0FBQzBCLFVBQVUsT0FBTztRQUV0QixzQ0FBc0M7UUFDdEMsSUFBSWxDLFFBQVFpQyxtQkFBbUJ6QixNQUFNMEI7UUFFckMsbUNBQW1DO1FBQ25DLElBQUksQ0FBQ2xDLE9BQU87WUFDVkEsUUFBUSxNQUFNZ0QsdUJBQXVCZDtRQUN2QztRQUVBLE1BQU13QixZQUFZLENBQUMsdUJBQXVCLEVBQUV4QixTQUFTLGNBQWMsQ0FBQztRQUVwRSxPQUFPO1lBQ0x5QixJQUFJekI7WUFDSmxDLE9BQU9BLFNBQVM7WUFDaEIwRDtZQUNBRSxLQUFLLENBQUMsK0JBQStCLEVBQUUxQixTQUFTLENBQUM7WUFDakQyQixNQUFNO1lBQ05DLGFBQWE7UUFDZjtJQUNGLEVBQUUsT0FBTTtRQUNOLE9BQU87SUFDVDtBQUNGO0FBRU8sZUFBZUU7SUFDcEIsTUFBTUMsTUFBTUMsS0FBS0QsR0FBRztJQUNwQixJQUFJL0UsVUFBVUEsT0FBT2lGLFNBQVMsR0FBR0YsS0FBSztRQUNwQyxPQUFPbEYscURBQVlBLENBQUNxRixJQUFJLENBQUNsRixPQUFPbUYsSUFBSTtJQUN0QztJQUVBLElBQUk7UUFDRixNQUFNLENBQUNDLE9BQU9DLE1BQU0sR0FBRyxNQUFNQyxRQUFRQyxHQUFHLENBQUM7WUFDdkNoQjtZQUNBTTtTQUNEO1FBRUQsTUFBTVcsVUFBVTtZQUFDSjtZQUFPQztTQUFNLENBQUNJLE1BQU0sQ0FBQ0M7UUFFdEMxRixTQUFTO1lBQ1BtRixNQUFNSztZQUNOUCxXQUFXRixNQUFNLEtBQUssS0FBSztRQUM3QjtRQUVBLE9BQU9sRixxREFBWUEsQ0FBQ3FGLElBQUksQ0FBQ007SUFDM0IsRUFBRSxPQUFNO1FBQ04sT0FBTzNGLHFEQUFZQSxDQUFDcUYsSUFBSSxDQUFDLEVBQUU7SUFDN0I7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhZGVzLWZhbmFwcC8uL2FwcC9hcGkveW91dHViZS9yb3V0ZS50cz83YmQ0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5cclxudHlwZSBZb3VUdWJlVmlkZW8gPSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIHRodW1ibmFpbDogc3RyaW5nO1xyXG4gIHVybDogc3RyaW5nO1xyXG4gIHR5cGU6IFwidmlkZW9cIiB8IFwic2hvcnRzXCI7XHJcbiAgcHVibGlzaGVkQXQ6IHN0cmluZyB8IG51bGw7XHJcbn07XHJcblxyXG5jb25zdCBDSEFOTkVMX1VSTCA9IFwiaHR0cHM6Ly93d3cueW91dHViZS5jb20vQEhBREVTX29mZmlcIjtcclxuY29uc3QgQ09NTU9OX0hFQURFUlMgPSB7XHJcbiAgXCJVc2VyLUFnZW50XCI6IFwiTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMC4wLjAuMCBTYWZhcmkvNTM3LjM2XCIsXHJcbiAgXCJBY2NlcHQtTGFuZ3VhZ2VcIjogXCJrby1LUixrbztxPTAuOVwiLFxyXG59O1xyXG5cclxubGV0IGNhY2hlZDogeyBkYXRhOiBZb3VUdWJlVmlkZW9bXTsgZXhwaXJlc0F0OiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xyXG5cclxuZnVuY3Rpb24gZXh0cmFjdFZpZGVvSWQodGV4dDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgY29uc3QgbWF0Y2ggPSB0ZXh0Lm1hdGNoKC9cXC93YXRjaFxcP3Y9KFthLXpBLVowLTlfLV17MTF9KS8pO1xyXG4gIHJldHVybiBtYXRjaD8uWzFdID8/IG51bGw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGV4dHJhY3RTaG9ydHNJZCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcclxuICBjb25zdCBtYXRjaCA9IHRleHQubWF0Y2goL1xcL3Nob3J0c1xcLyhbYS16QS1aMC05Xy1dezExfSkvKTtcclxuICByZXR1cm4gbWF0Y2g/LlsxXSA/PyBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWNvZGVVbmljb2RlKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcclxuICByZXR1cm4gc3RyXHJcbiAgICAucmVwbGFjZSgvXFxcXHUoWzAtOWEtZkEtRl17NH0pL2csIChfLCBoZXgpID0+IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoaGV4LCAxNikpKVxyXG4gICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKVxyXG4gICAgLnJlcGxhY2UoL1xcXFxuL2csIFwiIFwiKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOycoO2aqO2VnCDsoJzrqqnsnbjsp4Ag6rKA7KadXHJcbiAqIC0gXCLri6vquLBcIiwg7Iic7IiYIO2DgOyehOyKpO2DrO2UhCwg67mIIOusuOyekOyXtCDrk7HsnYAg7KCc7Jm4XHJcbiAqL1xyXG5mdW5jdGlvbiBpc1ZhbGlkVGl0bGUodGl0bGU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gIGlmICghdGl0bGUgfHwgdGl0bGUudHJpbSgpLmxlbmd0aCA8IDIpIHJldHVybiBmYWxzZTtcclxuICBjb25zdCB0ID0gdGl0bGUudHJpbSgpO1xyXG5cclxuICAvLyBcIuuLq+q4sFwiIChTaG9ydHMg7Y6Y7J207KeA7J2YIGNsb3NlIOuyhO2KvCDthY3siqTtirgpXHJcbiAgaWYgKHQgPT09IFwi64ur6riwXCIgfHwgdCA9PT0gXCJDbG9zZVwiKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gIC8vIOyInOyImCDtg4DsnoTsiqTtg6ztlIQg7Yyo7YS0ICjsmIg6IFwiMDowMFwiLCBcIjE6MjM6NDVcIiwgXCIwMDozMFwiKVxyXG4gIGlmICgvXlxcZHsxLDJ9KDpcXGR7Mn0pezEsMn0kLy50ZXN0KHQpKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gIC8vIO2DgOyehOyKpO2DrO2UhCArIOyKrOuemOyLnCDtjKjthLQgKOyYiDogXCIwOjAwIC8gMzo0NVwiKVxyXG4gIGlmICgvXlxcZHsxLDJ9KDpcXGR7Mn0pezEsMn1cXHMqXFwvXFxzKlxcZHsxLDJ9KDpcXGR7Mn0pezEsMn0kLy50ZXN0KHQpKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gIC8vIFlvdVR1YmUgVUkg6rSA66CoIO2FjeyKpO2KuFxyXG4gIGNvbnN0IHVpVGV4dHMgPSBbXHJcbiAgICBcIllvdVR1YmVcIiwgXCLqtazrj4VcIiwgXCLsoovslYTsmpRcIiwgXCLsi6vslrTsmpRcIiwgXCLqs7XsnKBcIiwgXCLsoIDsnqVcIixcclxuICAgIFwiU3Vic2NyaWJlXCIsIFwiTGlrZVwiLCBcIkRpc2xpa2VcIiwgXCJTaGFyZVwiLCBcIlNhdmVcIixcclxuICAgIFwi642U67O06riwXCIsIFwi6rCE65617Z6IXCIsIFwiU2hvdyBtb3JlXCIsIFwiU2hvdyBsZXNzXCIsXHJcbiAgICBcIuuMk+q4gFwiLCBcIkNvbW1lbnRzXCIsXHJcbiAgXTtcclxuICBpZiAodWlUZXh0cy5pbmNsdWRlcyh0KSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOqwnOyEoOuQnCDsoJzrqqkg7LaU7LacIC0g7Jes65+sIO2MqO2EtOydhCDsi5zrj4TtlZjsl6wg7Iuk7KCcIOyYgeyDgSDsoJzrqqnsnYQg7ZmV7Iuk7Z6IIOqwgOyguOyYtFxyXG4gKiBTaG9ydHPsnZggXCLri6vquLBcIiDrrLjsoJwg67CPIFZpZGVv7J2YIO2DgOyehOyKpO2DrO2UhCDrrLjsoJzrpbwg67Cp7KeAXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0VGl0bGUoaHRtbDogc3RyaW5nLCB2aWRlb0lkOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIGNvbnN0IGNhbmRpZGF0ZXM6IHN0cmluZ1tdID0gW107XHJcblxyXG4gIC8vIDEpIHZpZGVvSWQg7KO867OA7JeQ7IScIHRpdGxlIOy2lOy2nCAo6rCA7J6lIOyLoOuisOuPhCDrhpLsnYwpXHJcbiAgY29uc3QgaWR4ID0gaHRtbC5pbmRleE9mKGBcInZpZGVvSWRcIjpcIiR7dmlkZW9JZH1cImApO1xyXG4gIGlmIChpZHggIT09IC0xKSB7XHJcbiAgICAvLyB2aWRlb0lkIOuSpOyqvSDtg5Dsg4lcclxuICAgIGNvbnN0IGNodW5rID0gaHRtbC5zdWJzdHJpbmcoaWR4LCBNYXRoLm1pbihpZHggKyAxMjAwLCBodG1sLmxlbmd0aCkpO1xyXG5cclxuICAgIC8vIHJ1bnMg7ZiV7IudOiBcInRpdGxlXCI6e1wicnVuc1wiOlt7XCJ0ZXh0XCI6XCIuLi5cIn1dfVxyXG4gICAgY29uc3QgcnVuc01hdGNoID0gY2h1bmsubWF0Y2goL1widGl0bGVcIlxccyo6XFxzKlxce1xccypcInJ1bnNcIlxccyo6XFxzKlxcW1xccypcXHtcXHMqXCJ0ZXh0XCJcXHMqOlxccypcIihbXlwiXSspXCIvKTtcclxuICAgIGlmIChydW5zTWF0Y2g/LlsxXSkge1xyXG4gICAgICBjb25zdCB0ID0gZGVjb2RlVW5pY29kZShydW5zTWF0Y2hbMV0pO1xyXG4gICAgICBpZiAoaXNWYWxpZFRpdGxlKHQpKSBjYW5kaWRhdGVzLnB1c2godCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2ltcGxlVGV4dCDtmJXsi506IFwidGl0bGVcIjp7XCJzaW1wbGVUZXh0XCI6XCIuLi5cIn1cclxuICAgIGNvbnN0IHNpbXBsZU1hdGNoID0gY2h1bmsubWF0Y2goL1widGl0bGVcIlxccyo6XFxzKlxce1xccypcInNpbXBsZVRleHRcIlxccyo6XFxzKlwiKFteXCJdKylcIi8pO1xyXG4gICAgaWYgKHNpbXBsZU1hdGNoPy5bMV0pIHtcclxuICAgICAgY29uc3QgdCA9IGRlY29kZVVuaWNvZGUoc2ltcGxlTWF0Y2hbMV0pO1xyXG4gICAgICBpZiAoaXNWYWxpZFRpdGxlKHQpKSBjYW5kaWRhdGVzLnB1c2godCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g7J2066+4IOycoO2aqO2VnCDsoJzrqqnsnYQg7LC+7JWY7Jy866m0IOuwmO2ZmFxyXG4gICAgaWYgKGNhbmRpZGF0ZXMubGVuZ3RoID4gMCkgcmV0dXJuIGNhbmRpZGF0ZXNbMF07XHJcblxyXG4gICAgLy8gdmlkZW9JZCDslZ7sqr3sl5DshJzrj4Qg7YOQ7IOJICjsoJzrqqnsnbQgdmlkZW9JZOuztOuLpCDrqLzsoIAg7JisIOyImCDsnojsnYwpXHJcbiAgICBpZiAoaWR4ID4gMzAwKSB7XHJcbiAgICAgIGNvbnN0IGJlZm9yZUNodW5rID0gaHRtbC5zdWJzdHJpbmcoTWF0aC5tYXgoMCwgaWR4IC0gNjAwKSwgaWR4ICsgMTAwKTtcclxuICAgICAgY29uc3QgYmVmb3JlUnVucyA9IGJlZm9yZUNodW5rLm1hdGNoKC9cInRpdGxlXCJcXHMqOlxccypcXHtcXHMqXCJydW5zXCJcXHMqOlxccypcXFtcXHMqXFx7XFxzKlwidGV4dFwiXFxzKjpcXHMqXCIoW15cIl0rKVwiLyk7XHJcbiAgICAgIGlmIChiZWZvcmVSdW5zPy5bMV0pIHtcclxuICAgICAgICBjb25zdCB0ID0gZGVjb2RlVW5pY29kZShiZWZvcmVSdW5zWzFdKTtcclxuICAgICAgICBpZiAoaXNWYWxpZFRpdGxlKHQpKSBjYW5kaWRhdGVzLnB1c2godCk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgYmVmb3JlU2ltcGxlID0gYmVmb3JlQ2h1bmsubWF0Y2goL1widGl0bGVcIlxccyo6XFxzKlxce1xccypcInNpbXBsZVRleHRcIlxccyo6XFxzKlwiKFteXCJdKylcIi8pO1xyXG4gICAgICBpZiAoYmVmb3JlU2ltcGxlPy5bMV0pIHtcclxuICAgICAgICBjb25zdCB0ID0gZGVjb2RlVW5pY29kZShiZWZvcmVTaW1wbGVbMV0pO1xyXG4gICAgICAgIGlmIChpc1ZhbGlkVGl0bGUodCkpIGNhbmRpZGF0ZXMucHVzaCh0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKGNhbmRpZGF0ZXMubGVuZ3RoID4gMCkgcmV0dXJuIGNhbmRpZGF0ZXNbMF07XHJcblxyXG4gIC8vIDIpIGdyaWRWaWRlb1JlbmRlcmVyIC8gcmVlbEl0ZW1SZW5kZXJlciDquLDrsJgg7YOQ7IOJICjssYTrhJAg7Y6Y7J207KeA7JeQ7IScIOugjOuNlOungeuQmOuKlCDtmJXtg5wpXHJcbiAgLy8gdmlkZW9JZOulvCDtj6ztlajtlZjripQgcmVuZGVyZXIg67iU66Gd7J2EIOywvuqzoCwg6re4IOyViOyXkOyEnCB0aXRsZSDstpTstpxcclxuICBjb25zdCByZW5kZXJlclBhdHRlcm5zID0gW1xyXG4gICAgbmV3IFJlZ0V4cChgXCJncmlkVmlkZW9SZW5kZXJlclwiXFxcXHMqOlxcXFxzKlxcXFx7W159XSo/XCJ2aWRlb0lkXCJcXFxccyo6XFxcXHMqXCIke3ZpZGVvSWR9XCJbXFxcXHNcXFxcU117MCw4MDB9P1widGl0bGVcIlxcXFxzKjpcXFxccypcXFxce1xcXFxzKig/OlwicnVuc1wiXFxcXHMqOlxcXFxzKlxcXFxbXFxcXHMqXFxcXHtcXFxccypcInRleHRcIlxcXFxzKjpcXFxccypcIihbXlwiXSspXCJ8XCJzaW1wbGVUZXh0XCJcXFxccyo6XFxcXHMqXCIoW15cIl0rKVwiKWAsIFwibVwiKSxcclxuICAgIG5ldyBSZWdFeHAoYFwicmVlbEl0ZW1SZW5kZXJlclwiXFxcXHMqOlxcXFxzKlxcXFx7W159XSo/XCJ2aWRlb0lkXCJcXFxccyo6XFxcXHMqXCIke3ZpZGVvSWR9XCJbXFxcXHNcXFxcU117MCw4MDB9P1wiaGVhZGxpbmVcIlxcXFxzKjpcXFxccypcXFxce1xcXFxzKlwic2ltcGxlVGV4dFwiXFxcXHMqOlxcXFxzKlwiKFteXCJdKylcImAsIFwibVwiKSxcclxuICAgIG5ldyBSZWdFeHAoYFwidmlkZW9JZFwiXFxcXHMqOlxcXFxzKlwiJHt2aWRlb0lkfVwiW1xcXFxzXFxcXFNdezAsMTAwMH0/XCJoZWFkbGluZVwiXFxcXHMqOlxcXFxzKlxcXFx7XFxcXHMqXCJzaW1wbGVUZXh0XCJcXFxccyo6XFxcXHMqXCIoW15cIl0rKVwiYCwgXCJtXCIpLFxyXG4gIF07XHJcblxyXG4gIGZvciAoY29uc3QgcGF0dGVybiBvZiByZW5kZXJlclBhdHRlcm5zKSB7XHJcbiAgICBjb25zdCBtYXRjaCA9IGh0bWwubWF0Y2gocGF0dGVybik7XHJcbiAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgY29uc3QgdCA9IGRlY29kZVVuaWNvZGUobWF0Y2hbMV0gfHwgbWF0Y2hbMl0gfHwgbWF0Y2hbM10gfHwgXCJcIik7XHJcbiAgICAgIGlmIChpc1ZhbGlkVGl0bGUodCkpIHJldHVybiB0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gMykgYWNjZXNzaWJpbGl0eURhdGHsl5DshJwgbGFiZWwg7LaU7LacXHJcbiAgY29uc3QgYWNjZXNzUGF0dGVybnMgPSBbXHJcbiAgICBuZXcgUmVnRXhwKGBcInZpZGVvSWRcIlxcXFxzKjpcXFxccypcIiR7dmlkZW9JZH1cIltcXFxcc1xcXFxTXXswLDIwMDB9P1wiYWNjZXNzaWJpbGl0eURhdGFcIlxcXFxzKjpcXFxccypcXFxce1xcXFxzKlwibGFiZWxcIlxcXFxzKjpcXFxccypcIihbXlwiXSspXCJgLCBcIm1cIiksXHJcbiAgICBuZXcgUmVnRXhwKGBcImFjY2Vzc2liaWxpdHlEYXRhXCJcXFxccyo6XFxcXHMqXFxcXHtcXFxccypcImxhYmVsXCJcXFxccyo6XFxcXHMqXCIoW15cIl0qJHt2aWRlb0lkfVteXCJdKilcImAsIFwibVwiKSxcclxuICBdO1xyXG4gIGZvciAoY29uc3QgcGF0dGVybiBvZiBhY2Nlc3NQYXR0ZXJucykge1xyXG4gICAgY29uc3QgbWF0Y2ggPSBodG1sLm1hdGNoKHBhdHRlcm4pO1xyXG4gICAgaWYgKG1hdGNoPy5bMV0pIHtcclxuICAgICAgY29uc3QgbGFiZWwgPSBkZWNvZGVVbmljb2RlKG1hdGNoWzFdKTtcclxuICAgICAgLy8gbGFiZWzsnYAg67O07Ya1IFwi7KCc66qpIGJ5IOyxhOuEkCBOIHZpZXdzIE4gYWdvXCIg7ZiV7YOcIOKGkiDrp6gg7JWeIOu2gOu2hCDsgqzsmqlcclxuICAgICAgLy8g65iQ64qUIFwi7KCc66qpIC0g7J6s7IOdIOyLnOqwhDogTuu2hCBO7LSIXCIg7ZiV7YOcXHJcbiAgICAgIGxldCB0aXRsZSA9IGxhYmVsO1xyXG4gICAgICBjb25zdCBieUluZGV4ID0gbGFiZWwubGFzdEluZGV4T2YoXCIgYnkgXCIpO1xyXG4gICAgICBpZiAoYnlJbmRleCA+IDApIHRpdGxlID0gbGFiZWwuc3Vic3RyaW5nKDAsIGJ5SW5kZXgpLnRyaW0oKTtcclxuXHJcbiAgICAgIC8vIOyerOyDnSDsi5zqsIQg67aA67aEIOygnOqxsFxyXG4gICAgICB0aXRsZSA9IHRpdGxlLnJlcGxhY2UoL1xccyotXFxzKuyerOyDnSDsi5zqsIQ6LiokLywgXCJcIikudHJpbSgpO1xyXG4gICAgICB0aXRsZSA9IHRpdGxlLnJlcGxhY2UoL1xccyotXFxzKnBsYXkgbGVuZ3RoLiokL2ksIFwiXCIpLnRyaW0oKTtcclxuXHJcbiAgICAgIGlmIChpc1ZhbGlkVGl0bGUodGl0bGUpKSByZXR1cm4gdGl0bGU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyA0KSBvZzp0aXRsZSDrqZTtg4Ag7YOc6re4ICjqsJzrs4Qg7JiB7IOBIO2OmOydtOyngOyduCDqsr3smrApXHJcbiAgY29uc3Qgb2dUaXRsZSA9IGh0bWwubWF0Y2goLzxtZXRhW14+XStwcm9wZXJ0eT1bXCInXW9nOnRpdGxlW1wiJ11bXj5dK2NvbnRlbnQ9W1wiJ10oW15cIiddKylbXCInXS9pKVxyXG4gICAgPz8gaHRtbC5tYXRjaCgvPG1ldGFbXj5dK2NvbnRlbnQ9W1wiJ10oW15cIiddKylbXCInXVtePl0rcHJvcGVydHk9W1wiJ11vZzp0aXRsZVtcIiddL2kpO1xyXG4gIGlmIChvZ1RpdGxlPy5bMV0pIHtcclxuICAgIGNvbnN0IHQgPSBkZWNvZGVVbmljb2RlKG9nVGl0bGVbMV0pLnRyaW0oKTtcclxuICAgIGlmICh0ICYmICF0LmluY2x1ZGVzKFwiWW91VHViZVwiKSAmJiAhdC5pbmNsdWRlcyhcIkBcIikgJiYgaXNWYWxpZFRpdGxlKHQpKSByZXR1cm4gdDtcclxuICB9XHJcblxyXG4gIC8vIDUpIDx0aXRsZT4g7YOc6re4XHJcbiAgY29uc3QgdGl0bGVUYWcgPSBodG1sLm1hdGNoKC88dGl0bGVbXj5dKj4oW148XSspPFxcL3RpdGxlPi9pKTtcclxuICBpZiAodGl0bGVUYWc/LlsxXSkge1xyXG4gICAgY29uc3QgdCA9IHRpdGxlVGFnWzFdLnJlcGxhY2UoL1xccyotXFxzKllvdVR1YmVcXHMqJC9pLCBcIlwiKS50cmltKCk7XHJcbiAgICBpZiAoaXNWYWxpZFRpdGxlKHQpICYmICF0LmluY2x1ZGVzKFwiQFwiKSkgcmV0dXJuIHQ7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gXCJcIjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNob3J0cyDsoITsmqkg7KCc66qpIOy2lOy2nCAtIOyxhOuEkCBzaG9ydHMg7YOtIEhUTUzsl5DshJwgcmVlbEl0ZW1SZW5kZXJlciDquLDrsJjsnLzroZwg7LaU7LacXHJcbiAqIOydvOuwmCBleHRyYWN0VGl0bGXqs7wg64us66asIFNob3J0cyDtirnsnKDsnZggSlNPTiDqtazsobAoaGVhZGxpbmUsIG92ZXJsYXlNZXRhZGF0YSDrk7Ep66W8IOyasOyEoCDtg5Dsg4lcclxuICovXHJcbmZ1bmN0aW9uIGV4dHJhY3RTaG9ydHNUaXRsZShodG1sOiBzdHJpbmcsIHNob3J0c0lkOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIGNvbnN0IGNhbmRpZGF0ZXM6IHN0cmluZ1tdID0gW107XHJcblxyXG4gIC8vIHNob3J0c0lk6rCAIEhUTUzsl5DshJwg65Ox7J6l7ZWY64qUIOuqqOuToCDsnITsuZjrpbwg7YOQ7IOJXHJcbiAgLy8gWW91VHViZSBTaG9ydHMg7LGE64SQIO2DreyXkOyEnOuKlCBcInZpZGVvSWRcIjpcIklEXCIg7Jm47JeQ64+EIFwiL3Nob3J0cy9JRFwiIO2Yle2DnOuhnCDrk7HsnqVcclxuICBjb25zdCBzZWFyY2hQYXR0ZXJucyA9IFtcclxuICAgIGBcIiR7c2hvcnRzSWR9XCJgLFxyXG4gICAgYFxcXFwvc2hvcnRzXFxcXC8ke3Nob3J0c0lkfWAsXHJcbiAgXTtcclxuXHJcbiAgZm9yIChjb25zdCBzZWFyY2hTdHIgb2Ygc2VhcmNoUGF0dGVybnMpIHtcclxuICAgIGxldCBzZWFyY2hJZHggPSAwO1xyXG4gICAgY29uc3QgcGxhaW5TdHIgPSBzZWFyY2hTdHIucmVwbGFjZSgvXFxcXFxcXFwvZywgXCIvXCIpO1xyXG5cclxuICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgIGNvbnN0IGlkSWR4ID0gaHRtbC5pbmRleE9mKFxyXG4gICAgICAgIHBsYWluU3RyLmluY2x1ZGVzKFwiL3Nob3J0cy9cIikgPyBgL3Nob3J0cy8ke3Nob3J0c0lkfWAgOiBgXCIke3Nob3J0c0lkfVwiYCxcclxuICAgICAgICBzZWFyY2hJZHhcclxuICAgICAgKTtcclxuICAgICAgaWYgKGlkSWR4ID09PSAtMSkgYnJlYWs7XHJcbiAgICAgIHNlYXJjaElkeCA9IGlkSWR4ICsgMTtcclxuXHJcbiAgICAgIC8vIElEIOyjvOuzgCDslZ7rkqQgMjUwMOyekCDrspTsnITsl5DshJwg7YOQ7IOJXHJcbiAgICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC5tYXgoMCwgaWRJZHggLSAxNTAwKTtcclxuICAgICAgY29uc3QgZW5kID0gTWF0aC5taW4oaHRtbC5sZW5ndGgsIGlkSWR4ICsgMjUwMCk7XHJcbiAgICAgIGNvbnN0IGNodW5rID0gaHRtbC5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7XHJcblxyXG4gICAgICAvLyBoZWFkbGluZS5zaW1wbGVUZXh0IO2MqO2EtCAocmVlbEl0ZW1SZW5kZXJlcuyXkOyEnCDqsIDsnqUg7Z2U7ZWoKVxyXG4gICAgICBjb25zdCBoZWFkbGluZVNpbXBsZSA9IGNodW5rLm1hdGNoKC9cImhlYWRsaW5lXCJcXHMqOlxccypcXHtcXHMqXCJzaW1wbGVUZXh0XCJcXHMqOlxccypcIihbXlwiXSspXCIvKTtcclxuICAgICAgaWYgKGhlYWRsaW5lU2ltcGxlPy5bMV0pIHtcclxuICAgICAgICBjb25zdCB0ID0gZGVjb2RlVW5pY29kZShoZWFkbGluZVNpbXBsZVsxXSk7XHJcbiAgICAgICAgaWYgKGlzVmFsaWRUaXRsZSh0KSkgY2FuZGlkYXRlcy5wdXNoKHQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBoZWFkbGluZS5ydW5zIO2MqO2EtFxyXG4gICAgICBjb25zdCBoZWFkbGluZVJ1bnMgPSBjaHVuay5tYXRjaCgvXCJoZWFkbGluZVwiXFxzKjpcXHMqXFx7XFxzKlwicnVuc1wiXFxzKjpcXHMqXFxbXFxzKlxce1xccypcInRleHRcIlxccyo6XFxzKlwiKFteXCJdKylcIi8pO1xyXG4gICAgICBpZiAoaGVhZGxpbmVSdW5zPy5bMV0pIHtcclxuICAgICAgICBjb25zdCB0ID0gZGVjb2RlVW5pY29kZShoZWFkbGluZVJ1bnNbMV0pO1xyXG4gICAgICAgIGlmIChpc1ZhbGlkVGl0bGUodCkpIGNhbmRpZGF0ZXMucHVzaCh0KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gb3ZlcmxheU1ldGFkYXRhLnByaW1hcnlUZXh0LmNvbnRlbnQg7Yyo7YS0XHJcbiAgICAgIGNvbnN0IG92ZXJsYXlQcmltYXJ5ID0gY2h1bmsubWF0Y2goL1wicHJpbWFyeVRleHRcIlxccyo6XFxzKlxce1xccypcImNvbnRlbnRcIlxccyo6XFxzKlwiKFteXCJdKylcIi8pO1xyXG4gICAgICBpZiAob3ZlcmxheVByaW1hcnk/LlsxXSkge1xyXG4gICAgICAgIGNvbnN0IHQgPSBkZWNvZGVVbmljb2RlKG92ZXJsYXlQcmltYXJ5WzFdKTtcclxuICAgICAgICBpZiAoaXNWYWxpZFRpdGxlKHQpKSBjYW5kaWRhdGVzLnB1c2godCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHRpdGxlLnJ1bnMg7Yyo7YS0XHJcbiAgICAgIGNvbnN0IHRpdGxlUnVucyA9IGNodW5rLm1hdGNoKC9cInRpdGxlXCJcXHMqOlxccypcXHtcXHMqXCJydW5zXCJcXHMqOlxccypcXFtcXHMqXFx7XFxzKlwidGV4dFwiXFxzKjpcXHMqXCIoW15cIl0rKVwiLyk7XHJcbiAgICAgIGlmICh0aXRsZVJ1bnM/LlsxXSkge1xyXG4gICAgICAgIGNvbnN0IHQgPSBkZWNvZGVVbmljb2RlKHRpdGxlUnVuc1sxXSk7XHJcbiAgICAgICAgaWYgKGlzVmFsaWRUaXRsZSh0KSkgY2FuZGlkYXRlcy5wdXNoKHQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyB0aXRsZS5zaW1wbGVUZXh0IO2MqO2EtFxyXG4gICAgICBjb25zdCB0aXRsZVNpbXBsZSA9IGNodW5rLm1hdGNoKC9cInRpdGxlXCJcXHMqOlxccypcXHtcXHMqXCJzaW1wbGVUZXh0XCJcXHMqOlxccypcIihbXlwiXSspXCIvKTtcclxuICAgICAgaWYgKHRpdGxlU2ltcGxlPy5bMV0pIHtcclxuICAgICAgICBjb25zdCB0ID0gZGVjb2RlVW5pY29kZSh0aXRsZVNpbXBsZVsxXSk7XHJcbiAgICAgICAgaWYgKGlzVmFsaWRUaXRsZSh0KSkgY2FuZGlkYXRlcy5wdXNoKHQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoY2FuZGlkYXRlcy5sZW5ndGggPiAwKSByZXR1cm4gY2FuZGlkYXRlc1swXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlmIChjYW5kaWRhdGVzLmxlbmd0aCA+IDApIHJldHVybiBjYW5kaWRhdGVzWzBdO1xyXG5cclxuICAvLyBhY2Nlc3NpYmlsaXR5RGF0YS5sYWJlbOyXkOyEnCDstpTstpxcclxuICBjb25zdCBhY2Nlc3NQYXR0ZXJucyA9IFtcclxuICAgIG5ldyBSZWdFeHAoYFwiJHtzaG9ydHNJZH1cIltcXFxcc1xcXFxTXXswLDMwMDB9P1wiYWNjZXNzaWJpbGl0eURhdGFcIlxcXFxzKjpcXFxccypcXFxce1xcXFxzKlwibGFiZWxcIlxcXFxzKjpcXFxccypcIihbXlwiXSspXCJgLCBcIm1cIiksXHJcbiAgICBuZXcgUmVnRXhwKGBcImFjY2Vzc2liaWxpdHlEYXRhXCJcXFxccyo6XFxcXHMqXFxcXHtcXFxccypcImxhYmVsXCJcXFxccyo6XFxcXHMqXCIoW15cIl0qJHtzaG9ydHNJZH1bXlwiXSopXCJgLCBcIm1cIiksXHJcbiAgXTtcclxuICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgYWNjZXNzUGF0dGVybnMpIHtcclxuICAgIGNvbnN0IG1hdGNoID0gaHRtbC5tYXRjaChwYXR0ZXJuKTtcclxuICAgIGlmIChtYXRjaD8uWzFdKSB7XHJcbiAgICAgIGNvbnN0IGxhYmVsID0gZGVjb2RlVW5pY29kZShtYXRjaFsxXSk7XHJcbiAgICAgIGxldCB0aXRsZSA9IGxhYmVsO1xyXG4gICAgICAvLyBcIiAtIFwiIOydtO2bhCDsoJzqsbAgKOyhsO2ajOyImCDrk7EpXHJcbiAgICAgIGNvbnN0IGRhc2hJZHggPSB0aXRsZS5pbmRleE9mKFwiIC0gXCIpO1xyXG4gICAgICBpZiAoZGFzaElkeCA+IDApIHRpdGxlID0gdGl0bGUuc3Vic3RyaW5nKDAsIGRhc2hJZHgpLnRyaW0oKTtcclxuICAgICAgLy8g66eI7KeA66eJIFwiLCBOIHZpZXdzXCIg7Yyo7YS0IOygnOqxsFxyXG4gICAgICB0aXRsZSA9IHRpdGxlLnJlcGxhY2UoLyxcXHMqXFxkW1xcZCwuXSpcXHMqKHZpZXdzP3zsobDtmox87ZqMKS4qJC9pLCBcIlwiKS50cmltKCk7XHJcbiAgICAgIGlmIChpc1ZhbGlkVGl0bGUodGl0bGUpKSByZXR1cm4gdGl0bGU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDsnbzrsJggZXh0cmFjdFRpdGxl66GcIO2PtOuwsVxyXG4gIHJldHVybiBleHRyYWN0VGl0bGUoaHRtbCwgc2hvcnRzSWQpO1xyXG59XHJcblxyXG4vKipcclxuICog6rCc67OEIFNob3J0cyDtjpjsnbTsp4Dsl5DshJwg7KCc66qpIOyngeygkSDqsIDsoLjsmKTquLAgKOyxhOuEkCDtjpjsnbTsp4Dsl5DshJwg7Iuk7YyoIOyLnCDtj7TrsLEpXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBmZXRjaFNob3J0c1RpdGxlRGlyZWN0KHNob3J0c0lkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly93d3cueW91dHViZS5jb20vc2hvcnRzLyR7c2hvcnRzSWR9YCwge1xyXG4gICAgICBoZWFkZXJzOiBDT01NT05fSEVBREVSUyxcclxuICAgICAgY2FjaGU6IFwibm8tc3RvcmVcIixcclxuICAgIH0pO1xyXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlcy50ZXh0KCk7XHJcblxyXG4gICAgLy8gMSkgb2c6dGl0bGUgKOqwgOyepSDsi6DrorDrj4Qg64aS7J2MKVxyXG4gICAgY29uc3Qgb2dUaXRsZSA9IGh0bWwubWF0Y2goLzxtZXRhW14+XStwcm9wZXJ0eT1bXCInXW9nOnRpdGxlW1wiJ11bXj5dK2NvbnRlbnQ9W1wiJ10oW15cIiddKylbXCInXS9pKVxyXG4gICAgICA/PyBodG1sLm1hdGNoKC88bWV0YVtePl0rY29udGVudD1bXCInXShbXlwiJ10rKVtcIiddW14+XStwcm9wZXJ0eT1bXCInXW9nOnRpdGxlW1wiJ10vaSk7XHJcbiAgICBpZiAob2dUaXRsZT8uWzFdKSB7XHJcbiAgICAgIGNvbnN0IHQgPSBkZWNvZGVVbmljb2RlKG9nVGl0bGVbMV0pLnRyaW0oKTtcclxuICAgICAgaWYgKGlzVmFsaWRUaXRsZSh0KSAmJiAhdC5pbmNsdWRlcyhcIllvdVR1YmVcIikgJiYgIXQuaW5jbHVkZXMoXCJAXCIpKSByZXR1cm4gdDtcclxuICAgIH1cclxuXHJcbiAgICAvLyAyKSA8dGl0bGU+IO2DnOq3uFxyXG4gICAgY29uc3QgdGl0bGVUYWcgPSBodG1sLm1hdGNoKC88dGl0bGVbXj5dKj4oW148XSspPFxcL3RpdGxlPi9pKTtcclxuICAgIGlmICh0aXRsZVRhZz8uWzFdKSB7XHJcbiAgICAgIGNvbnN0IHQgPSB0aXRsZVRhZ1sxXS5yZXBsYWNlKC9cXHMqLVxccypZb3VUdWJlXFxzKiQvaSwgXCJcIikudHJpbSgpO1xyXG4gICAgICBpZiAoaXNWYWxpZFRpdGxlKHQpICYmICF0LmluY2x1ZGVzKFwiQFwiKSkgcmV0dXJuIHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gMykgSlNPTiDrgrQgdGl0bGUucnVuc1xyXG4gICAgY29uc3QganNvblRpdGxlID0gaHRtbC5tYXRjaCgvXCJ0aXRsZVwiXFxzKjpcXHMqXFx7XFxzKlwicnVuc1wiXFxzKjpcXHMqXFxbXFxzKlxce1xccypcInRleHRcIlxccyo6XFxzKlwiKFteXCJdKylcIi8pO1xyXG4gICAgaWYgKGpzb25UaXRsZT8uWzFdKSB7XHJcbiAgICAgIGNvbnN0IHQgPSBkZWNvZGVVbmljb2RlKGpzb25UaXRsZVsxXSk7XHJcbiAgICAgIGlmIChpc1ZhbGlkVGl0bGUodCkpIHJldHVybiB0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIDQpIEpTT04g64K0IHRpdGxlLnNpbXBsZVRleHRcclxuICAgIGNvbnN0IGpzb25TaW1wbGUgPSBodG1sLm1hdGNoKC9cInRpdGxlXCJcXHMqOlxccypcXHtcXHMqXCJzaW1wbGVUZXh0XCJcXHMqOlxccypcIihbXlwiXSspXCIvKTtcclxuICAgIGlmIChqc29uU2ltcGxlPy5bMV0pIHtcclxuICAgICAgY29uc3QgdCA9IGRlY29kZVVuaWNvZGUoanNvblNpbXBsZVsxXSk7XHJcbiAgICAgIGlmIChpc1ZhbGlkVGl0bGUodCkpIHJldHVybiB0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIDUpIGhlYWRsaW5lIChTaG9ydHMg6rCc67OEIO2OmOydtOyngOyXkOyEnOuPhCDrk7HsnqUg6rCA64qlKVxyXG4gICAgY29uc3QgaGVhZGxpbmUgPSBodG1sLm1hdGNoKC9cImhlYWRsaW5lXCJcXHMqOlxccypcXHtcXHMqXCJzaW1wbGVUZXh0XCJcXHMqOlxccypcIihbXlwiXSspXCIvKTtcclxuICAgIGlmIChoZWFkbGluZT8uWzFdKSB7XHJcbiAgICAgIGNvbnN0IHQgPSBkZWNvZGVVbmljb2RlKGhlYWRsaW5lWzFdKTtcclxuICAgICAgaWYgKGlzVmFsaWRUaXRsZSh0KSkgcmV0dXJuIHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gNikgZW5nYWdlbWVudFBhbmVscyDrgrQg7KCc66qpIChTaG9ydHMg7Y6Y7J207KeAIO2KueycoClcclxuICAgIGNvbnN0IGVuZ2FnZW1lbnRUaXRsZSA9IGh0bWwubWF0Y2goL1wiaGVhZGVyVGl0bGVcIlxccyo6XFxzKlwiKFteXCJdKylcIi8pO1xyXG4gICAgaWYgKGVuZ2FnZW1lbnRUaXRsZT8uWzFdKSB7XHJcbiAgICAgIGNvbnN0IHQgPSBkZWNvZGVVbmljb2RlKGVuZ2FnZW1lbnRUaXRsZVsxXSk7XHJcbiAgICAgIGlmIChpc1ZhbGlkVGl0bGUodCkpIHJldHVybiB0O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBcIlwiO1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgcmV0dXJuIFwiXCI7XHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBmZXRjaExhdGVzdFZpZGVvKCk6IFByb21pc2U8WW91VHViZVZpZGVvIHwgbnVsbD4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtDSEFOTkVMX1VSTH0vdmlkZW9zYCwge1xyXG4gICAgICBoZWFkZXJzOiBDT01NT05fSEVBREVSUyxcclxuICAgICAgY2FjaGU6IFwibm8tc3RvcmVcIixcclxuICAgIH0pO1xyXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlcy50ZXh0KCk7XHJcbiAgICBjb25zdCB2aWRlb0lkID0gZXh0cmFjdFZpZGVvSWQoaHRtbCk7XHJcbiAgICBpZiAoIXZpZGVvSWQpIHJldHVybiBudWxsO1xyXG5cclxuICAgIGNvbnN0IHRpdGxlID0gZXh0cmFjdFRpdGxlKGh0bWwsIHZpZGVvSWQpO1xyXG4gICAgY29uc3QgdGh1bWJuYWlsID0gYGh0dHBzOi8vaS55dGltZy5jb20vdmkvJHt2aWRlb0lkfS9ocWRlZmF1bHQuanBnYDtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpZDogdmlkZW9JZCxcclxuICAgICAgdGl0bGU6IHRpdGxlIHx8IFwiSEFERVMg7JiB7IOBXCIsXHJcbiAgICAgIHRodW1ibmFpbCxcclxuICAgICAgdXJsOiBgaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj0ke3ZpZGVvSWR9YCxcclxuICAgICAgdHlwZTogXCJ2aWRlb1wiLFxyXG4gICAgICBwdWJsaXNoZWRBdDogbnVsbCxcclxuICAgIH07XHJcbiAgfSBjYXRjaCB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoTGF0ZXN0U2hvcnQoKTogUHJvbWlzZTxZb3VUdWJlVmlkZW8gfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke0NIQU5ORUxfVVJMfS9zaG9ydHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IENPTU1PTl9IRUFERVJTLFxyXG4gICAgICBjYWNoZTogXCJuby1zdG9yZVwiLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVzLnRleHQoKTtcclxuICAgIGNvbnN0IHNob3J0c0lkID0gZXh0cmFjdFNob3J0c0lkKGh0bWwpO1xyXG4gICAgaWYgKCFzaG9ydHNJZCkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgLy8gMeywqDog7LGE64SQIHNob3J0cyDtg60gSFRNTOyXkOyEnCBTaG9ydHMg7KCE7JqpIOy2lOy2nFxyXG4gICAgbGV0IHRpdGxlID0gZXh0cmFjdFNob3J0c1RpdGxlKGh0bWwsIHNob3J0c0lkKTtcclxuXHJcbiAgICAvLyAy7LCoOiDsi6TtjKgg7IucIOqwnOuzhCBTaG9ydHMg7Y6Y7J207KeA7JeQ7IScIOyngeygkSDqsIDsoLjsmKTquLBcclxuICAgIGlmICghdGl0bGUpIHtcclxuICAgICAgdGl0bGUgPSBhd2FpdCBmZXRjaFNob3J0c1RpdGxlRGlyZWN0KHNob3J0c0lkKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0aHVtYm5haWwgPSBgaHR0cHM6Ly9pLnl0aW1nLmNvbS92aS8ke3Nob3J0c0lkfS9ocWRlZmF1bHQuanBnYDtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpZDogc2hvcnRzSWQsXHJcbiAgICAgIHRpdGxlOiB0aXRsZSB8fCBcIkhBREVTIFNob3J0c1wiLFxyXG4gICAgICB0aHVtYm5haWwsXHJcbiAgICAgIHVybDogYGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy8ke3Nob3J0c0lkfWAsXHJcbiAgICAgIHR5cGU6IFwic2hvcnRzXCIsXHJcbiAgICAgIHB1Ymxpc2hlZEF0OiBudWxsLFxyXG4gICAgfTtcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcclxuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gIGlmIChjYWNoZWQgJiYgY2FjaGVkLmV4cGlyZXNBdCA+IG5vdykge1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGNhY2hlZC5kYXRhKTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBbdmlkZW8sIHNob3J0XSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgZmV0Y2hMYXRlc3RWaWRlbygpLFxyXG4gICAgICBmZXRjaExhdGVzdFNob3J0KCksXHJcbiAgICBdKTtcclxuXHJcbiAgICBjb25zdCByZXN1bHRzID0gW3ZpZGVvLCBzaG9ydF0uZmlsdGVyKEJvb2xlYW4pIGFzIFlvdVR1YmVWaWRlb1tdO1xyXG5cclxuICAgIGNhY2hlZCA9IHtcclxuICAgICAgZGF0YTogcmVzdWx0cyxcclxuICAgICAgZXhwaXJlc0F0OiBub3cgKyAzMCAqIDYwICogMTAwMCxcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3VsdHMpO1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFtdKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIkNIQU5ORUxfVVJMIiwiQ09NTU9OX0hFQURFUlMiLCJjYWNoZWQiLCJleHRyYWN0VmlkZW9JZCIsInRleHQiLCJtYXRjaCIsImV4dHJhY3RTaG9ydHNJZCIsImRlY29kZVVuaWNvZGUiLCJzdHIiLCJyZXBsYWNlIiwiXyIsImhleCIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsInBhcnNlSW50IiwiaXNWYWxpZFRpdGxlIiwidGl0bGUiLCJ0cmltIiwibGVuZ3RoIiwidCIsInRlc3QiLCJ1aVRleHRzIiwiaW5jbHVkZXMiLCJleHRyYWN0VGl0bGUiLCJodG1sIiwidmlkZW9JZCIsImNhbmRpZGF0ZXMiLCJpZHgiLCJpbmRleE9mIiwiY2h1bmsiLCJzdWJzdHJpbmciLCJNYXRoIiwibWluIiwicnVuc01hdGNoIiwicHVzaCIsInNpbXBsZU1hdGNoIiwiYmVmb3JlQ2h1bmsiLCJtYXgiLCJiZWZvcmVSdW5zIiwiYmVmb3JlU2ltcGxlIiwicmVuZGVyZXJQYXR0ZXJucyIsIlJlZ0V4cCIsInBhdHRlcm4iLCJhY2Nlc3NQYXR0ZXJucyIsImxhYmVsIiwiYnlJbmRleCIsImxhc3RJbmRleE9mIiwib2dUaXRsZSIsInRpdGxlVGFnIiwiZXh0cmFjdFNob3J0c1RpdGxlIiwic2hvcnRzSWQiLCJzZWFyY2hQYXR0ZXJucyIsInNlYXJjaFN0ciIsInNlYXJjaElkeCIsInBsYWluU3RyIiwiaWRJZHgiLCJzdGFydCIsImVuZCIsImhlYWRsaW5lU2ltcGxlIiwiaGVhZGxpbmVSdW5zIiwib3ZlcmxheVByaW1hcnkiLCJ0aXRsZVJ1bnMiLCJ0aXRsZVNpbXBsZSIsImRhc2hJZHgiLCJmZXRjaFNob3J0c1RpdGxlRGlyZWN0IiwicmVzIiwiZmV0Y2giLCJoZWFkZXJzIiwiY2FjaGUiLCJqc29uVGl0bGUiLCJqc29uU2ltcGxlIiwiaGVhZGxpbmUiLCJlbmdhZ2VtZW50VGl0bGUiLCJmZXRjaExhdGVzdFZpZGVvIiwidGh1bWJuYWlsIiwiaWQiLCJ1cmwiLCJ0eXBlIiwicHVibGlzaGVkQXQiLCJmZXRjaExhdGVzdFNob3J0IiwiR0VUIiwibm93IiwiRGF0ZSIsImV4cGlyZXNBdCIsImpzb24iLCJkYXRhIiwidmlkZW8iLCJzaG9ydCIsIlByb21pc2UiLCJhbGwiLCJyZXN1bHRzIiwiZmlsdGVyIiwiQm9vbGVhbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/youtube/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fyoutube%2Froute&page=%2Fapi%2Fyoutube%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fyoutube%2Froute.ts&appDir=C%3A%5CUsers%5Cpyosh%5COneDrive%5C%EB%B0%94%ED%83%95%20%ED%99%94%EB%A9%B4%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpyosh%5COneDrive%5C%EB%B0%94%ED%83%95%20%ED%99%94%EB%A9%B4%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();