"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/youtube/route";
exports.ids = ["app/api/youtube/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fyoutube%2Froute&page=%2Fapi%2Fyoutube%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fyoutube%2Froute.ts&appDir=C%3A%5CUsers%5Cpyosh%5COneDrive%5C%EB%B0%94%ED%83%95%20%ED%99%94%EB%A9%B4%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpyosh%5COneDrive%5C%EB%B0%94%ED%83%95%20%ED%99%94%EB%A9%B4%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fyoutube%2Froute&page=%2Fapi%2Fyoutube%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fyoutube%2Froute.ts&appDir=C%3A%5CUsers%5Cpyosh%5COneDrive%5C%EB%B0%94%ED%83%95%20%ED%99%94%EB%A9%B4%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpyosh%5COneDrive%5C%EB%B0%94%ED%83%95%20%ED%99%94%EB%A9%B4%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_pyosh_OneDrive_hades_fanapp_app_api_youtube_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/youtube/route.ts */ \"(rsc)/./app/api/youtube/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/youtube/route\",\n        pathname: \"/api/youtube\",\n        filename: \"route\",\n        bundlePath: \"app/api/youtube/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\pyosh\\\\OneDrive\\\\바탕 화면\\\\hades-fanapp\\\\app\\\\api\\\\youtube\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_pyosh_OneDrive_hades_fanapp_app_api_youtube_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/youtube/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ5b3V0dWJlJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ5b3V0dWJlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGeW91dHViZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNweW9zaCU1Q09uZURyaXZlJTVDJUVCJUIwJTk0JUVEJTgzJTk1JTIwJUVEJTk5JTk0JUVCJUE5JUI0JTVDaGFkZXMtZmFuYXBwJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNweW9zaCU1Q09uZURyaXZlJTVDJUVCJUIwJTk0JUVEJTgzJTk1JTIwJUVEJTk5JTk0JUVCJUE5JUI0JTVDaGFkZXMtZmFuYXBwJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUM0QjtBQUN6RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2hhZGVzLWZhbmFwcC8/MGNkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxweW9zaFxcXFxPbmVEcml2ZVxcXFzrsJTtg5Ug7ZmU66m0XFxcXGhhZGVzLWZhbmFwcFxcXFxhcHBcXFxcYXBpXFxcXHlvdXR1YmVcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3lvdXR1YmUvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS95b3V0dWJlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS95b3V0dWJlL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxccHlvc2hcXFxcT25lRHJpdmVcXFxc67CU7YOVIO2ZlOuptFxcXFxoYWRlcy1mYW5hcHBcXFxcYXBwXFxcXGFwaVxcXFx5b3V0dWJlXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS95b3V0dWJlL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fyoutube%2Froute&page=%2Fapi%2Fyoutube%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fyoutube%2Froute.ts&appDir=C%3A%5CUsers%5Cpyosh%5COneDrive%5C%EB%B0%94%ED%83%95%20%ED%99%94%EB%A9%B4%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpyosh%5COneDrive%5C%EB%B0%94%ED%83%95%20%ED%99%94%EB%A9%B4%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/youtube/route.ts":
/*!**********************************!*\
  !*** ./app/api/youtube/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\nconst CHANNEL_URL = \"https://www.youtube.com/@HADES_offi\";\nconst COMMON_HEADERS = {\n    \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\",\n    \"Accept-Language\": \"ko-KR,ko;q=0.9\"\n};\nlet cached = null;\nfunction extractVideoId(text) {\n    const match = text.match(/\\/watch\\?v=([a-zA-Z0-9_-]{11})/);\n    return match?.[1] ?? null;\n}\nfunction extractLatestVideoId(text) {\n    const rendererIds = [];\n    const rendererPatterns = [\n        /\"gridVideoRenderer\"\\s*:\\s*\\{[\\s\\S]{0,120}?\"videoId\"\\s*:\\s*\"([a-zA-Z0-9_-]{11})\"/g,\n        /\"videoRenderer\"\\s*:\\s*\\{[\\s\\S]{0,120}?\"videoId\"\\s*:\\s*\"([a-zA-Z0-9_-]{11})\"/g\n    ];\n    for (const pattern of rendererPatterns){\n        for (const match of text.matchAll(pattern)){\n            const id = match[1];\n            if (id) rendererIds.push(id);\n        }\n        if (rendererIds.length > 0) break;\n    }\n    if (rendererIds.length > 0) {\n        return Array.from(new Set(rendererIds))[0] ?? null;\n    }\n    return extractVideoId(text);\n}\nfunction extractShortsId(text) {\n    const match = text.match(/\\/shorts\\/([a-zA-Z0-9_-]{11})/);\n    return match?.[1] ?? null;\n}\nfunction decodeUnicode(str) {\n    return str.replace(/\\\\u([0-9a-fA-F]{4})/g, (_, hex)=>String.fromCharCode(parseInt(hex, 16))).replace(/\\\\\"/g, '\"').replace(/\\\\n/g, \" \");\n}\n/**\r\n * 유효한 제목인지 검증\r\n * - \"닫기\", 순수 타임스탬프, 빈 문자열 등은 제외\r\n */ function isValidTitle(title) {\n    if (!title || title.trim().length < 2) return false;\n    const t = title.trim();\n    // \"닫기\" (Shorts 페이지의 close 버튼 텍스트)\n    if (t === \"닫기\" || t === \"Close\") return false;\n    // 순수 타임스탬프 패턴 (예: \"0:00\", \"1:23:45\", \"00:30\")\n    if (/^\\d{1,2}(:\\d{2}){1,2}$/.test(t)) return false;\n    // 타임스탬프 + 슬래시 패턴 (예: \"0:00 / 3:45\")\n    if (/^\\d{1,2}(:\\d{2}){1,2}\\s*\\/\\s*\\d{1,2}(:\\d{2}){1,2}$/.test(t)) return false;\n    // YouTube UI 관련 텍스트\n    const uiTexts = [\n        \"YouTube\",\n        \"구독\",\n        \"좋아요\",\n        \"싫어요\",\n        \"공유\",\n        \"저장\",\n        \"Subscribe\",\n        \"Like\",\n        \"Dislike\",\n        \"Share\",\n        \"Save\",\n        \"더보기\",\n        \"간략히\",\n        \"Show more\",\n        \"Show less\",\n        \"댓글\",\n        \"Comments\"\n    ];\n    if (uiTexts.includes(t)) return false;\n    return true;\n}\n/**\r\n * 개선된 제목 추출 - 여러 패턴을 시도하여 실제 영상 제목을 확실히 가져옴\r\n * Shorts의 \"닫기\" 문제 및 Video의 타임스탬프 문제를 방지\r\n */ function extractTitle(html, videoId) {\n    const candidates = [];\n    // 1) videoId 주변에서 title 추출 (가장 신뢰도 높음)\n    const idx = html.indexOf(`\"videoId\":\"${videoId}\"`);\n    if (idx !== -1) {\n        // videoId 뒤쪽 탐색\n        const chunk = html.substring(idx, Math.min(idx + 1200, html.length));\n        // runs 형식: \"title\":{\"runs\":[{\"text\":\"...\"}]}\n        const runsMatch = chunk.match(/\"title\"\\s*:\\s*\\{\\s*\"runs\"\\s*:\\s*\\[\\s*\\{\\s*\"text\"\\s*:\\s*\"([^\"]+)\"/);\n        if (runsMatch?.[1]) {\n            const t = decodeUnicode(runsMatch[1]);\n            if (isValidTitle(t)) candidates.push(t);\n        }\n        // simpleText 형식: \"title\":{\"simpleText\":\"...\"}\n        const simpleMatch = chunk.match(/\"title\"\\s*:\\s*\\{\\s*\"simpleText\"\\s*:\\s*\"([^\"]+)\"/);\n        if (simpleMatch?.[1]) {\n            const t = decodeUnicode(simpleMatch[1]);\n            if (isValidTitle(t)) candidates.push(t);\n        }\n        // 이미 유효한 제목을 찾았으면 반환\n        if (candidates.length > 0) return candidates[0];\n        // videoId 앞쪽에서도 탐색 (제목이 videoId보다 먼저 올 수 있음)\n        if (idx > 300) {\n            const beforeChunk = html.substring(Math.max(0, idx - 600), idx + 100);\n            const beforeRuns = beforeChunk.match(/\"title\"\\s*:\\s*\\{\\s*\"runs\"\\s*:\\s*\\[\\s*\\{\\s*\"text\"\\s*:\\s*\"([^\"]+)\"/);\n            if (beforeRuns?.[1]) {\n                const t = decodeUnicode(beforeRuns[1]);\n                if (isValidTitle(t)) candidates.push(t);\n            }\n            const beforeSimple = beforeChunk.match(/\"title\"\\s*:\\s*\\{\\s*\"simpleText\"\\s*:\\s*\"([^\"]+)\"/);\n            if (beforeSimple?.[1]) {\n                const t = decodeUnicode(beforeSimple[1]);\n                if (isValidTitle(t)) candidates.push(t);\n            }\n        }\n    }\n    if (candidates.length > 0) return candidates[0];\n    // 2) gridVideoRenderer / reelItemRenderer 기반 탐색 (채널 페이지에서 렌더링되는 형태)\n    // videoId를 포함하는 renderer 블록을 찾고, 그 안에서 title 추출\n    const rendererPatterns = [\n        new RegExp(`\"gridVideoRenderer\"\\\\s*:\\\\s*\\\\{[^}]*?\"videoId\"\\\\s*:\\\\s*\"${videoId}\"[\\\\s\\\\S]{0,800}?\"title\"\\\\s*:\\\\s*\\\\{\\\\s*(?:\"runs\"\\\\s*:\\\\s*\\\\[\\\\s*\\\\{\\\\s*\"text\"\\\\s*:\\\\s*\"([^\"]+)\"|\"simpleText\"\\\\s*:\\\\s*\"([^\"]+)\")`, \"m\"),\n        new RegExp(`\"reelItemRenderer\"\\\\s*:\\\\s*\\\\{[^}]*?\"videoId\"\\\\s*:\\\\s*\"${videoId}\"[\\\\s\\\\S]{0,800}?\"headline\"\\\\s*:\\\\s*\\\\{\\\\s*\"simpleText\"\\\\s*:\\\\s*\"([^\"]+)\"`, \"m\"),\n        new RegExp(`\"videoId\"\\\\s*:\\\\s*\"${videoId}\"[\\\\s\\\\S]{0,1000}?\"headline\"\\\\s*:\\\\s*\\\\{\\\\s*\"simpleText\"\\\\s*:\\\\s*\"([^\"]+)\"`, \"m\")\n    ];\n    for (const pattern of rendererPatterns){\n        const match = html.match(pattern);\n        if (match) {\n            const t = decodeUnicode(match[1] || match[2] || match[3] || \"\");\n            if (isValidTitle(t)) return t;\n        }\n    }\n    // 3) accessibilityData에서 label 추출\n    const accessPatterns = [\n        new RegExp(`\"videoId\"\\\\s*:\\\\s*\"${videoId}\"[\\\\s\\\\S]{0,2000}?\"accessibilityData\"\\\\s*:\\\\s*\\\\{\\\\s*\"label\"\\\\s*:\\\\s*\"([^\"]+)\"`, \"m\"),\n        new RegExp(`\"accessibilityData\"\\\\s*:\\\\s*\\\\{\\\\s*\"label\"\\\\s*:\\\\s*\"([^\"]*${videoId}[^\"]*)\"`, \"m\")\n    ];\n    for (const pattern of accessPatterns){\n        const match = html.match(pattern);\n        if (match?.[1]) {\n            const label = decodeUnicode(match[1]);\n            // label은 보통 \"제목 by 채널 N views N ago\" 형태 → 맨 앞 부분 사용\n            // 또는 \"제목 - 재생 시간: N분 N초\" 형태\n            let title = label;\n            const byIndex = label.lastIndexOf(\" by \");\n            if (byIndex > 0) title = label.substring(0, byIndex).trim();\n            // 재생 시간 부분 제거\n            title = title.replace(/\\s*-\\s*재생 시간:.*$/, \"\").trim();\n            title = title.replace(/\\s*-\\s*play length.*$/i, \"\").trim();\n            if (isValidTitle(title)) return title;\n        }\n    }\n    // 4) og:title 메타 태그 (개별 영상 페이지인 경우)\n    const ogTitle = html.match(/<meta[^>]+property=[\"']og:title[\"'][^>]+content=[\"']([^\"']+)[\"']/i) ?? html.match(/<meta[^>]+content=[\"']([^\"']+)[\"'][^>]+property=[\"']og:title[\"']/i);\n    if (ogTitle?.[1]) {\n        const t = decodeUnicode(ogTitle[1]).trim();\n        if (t && !t.includes(\"YouTube\") && !t.includes(\"@\") && isValidTitle(t)) return t;\n    }\n    // 5) <title> 태그\n    const titleTag = html.match(/<title[^>]*>([^<]+)<\\/title>/i);\n    if (titleTag?.[1]) {\n        const t = titleTag[1].replace(/\\s*-\\s*YouTube\\s*$/i, \"\").trim();\n        if (isValidTitle(t) && !t.includes(\"@\")) return t;\n    }\n    return \"\";\n}\n/**\r\n * Shorts 전용 제목 추출 - 채널 shorts 탭 HTML에서 reelItemRenderer 기반으로 추출\r\n * 일반 extractTitle과 달리 Shorts 특유의 JSON 구조(headline, overlayMetadata 등)를 우선 탐색\r\n */ function extractShortsTitle(html, shortsId) {\n    const candidates = [];\n    // shortsId가 HTML에서 등장하는 모든 위치를 탐색\n    // YouTube Shorts 채널 탭에서는 \"videoId\":\"ID\" 외에도 \"/shorts/ID\" 형태로 등장\n    const searchPatterns = [\n        `\"${shortsId}\"`,\n        `\\\\/shorts\\\\/${shortsId}`\n    ];\n    for (const searchStr of searchPatterns){\n        let searchIdx = 0;\n        const plainStr = searchStr.replace(/\\\\\\\\/g, \"/\");\n        while(true){\n            const idIdx = html.indexOf(plainStr.includes(\"/shorts/\") ? `/shorts/${shortsId}` : `\"${shortsId}\"`, searchIdx);\n            if (idIdx === -1) break;\n            searchIdx = idIdx + 1;\n            // ID 주변 앞뒤 2500자 범위에서 탐색\n            const start = Math.max(0, idIdx - 1500);\n            const end = Math.min(html.length, idIdx + 2500);\n            const chunk = html.substring(start, end);\n            // headline.simpleText 패턴 (reelItemRenderer에서 가장 흔함)\n            const headlineSimple = chunk.match(/\"headline\"\\s*:\\s*\\{\\s*\"simpleText\"\\s*:\\s*\"([^\"]+)\"/);\n            if (headlineSimple?.[1]) {\n                const t = decodeUnicode(headlineSimple[1]);\n                if (isValidTitle(t)) candidates.push(t);\n            }\n            // headline.runs 패턴\n            const headlineRuns = chunk.match(/\"headline\"\\s*:\\s*\\{\\s*\"runs\"\\s*:\\s*\\[\\s*\\{\\s*\"text\"\\s*:\\s*\"([^\"]+)\"/);\n            if (headlineRuns?.[1]) {\n                const t = decodeUnicode(headlineRuns[1]);\n                if (isValidTitle(t)) candidates.push(t);\n            }\n            // overlayMetadata.primaryText.content 패턴\n            const overlayPrimary = chunk.match(/\"primaryText\"\\s*:\\s*\\{\\s*\"content\"\\s*:\\s*\"([^\"]+)\"/);\n            if (overlayPrimary?.[1]) {\n                const t = decodeUnicode(overlayPrimary[1]);\n                if (isValidTitle(t)) candidates.push(t);\n            }\n            // title.runs 패턴\n            const titleRuns = chunk.match(/\"title\"\\s*:\\s*\\{\\s*\"runs\"\\s*:\\s*\\[\\s*\\{\\s*\"text\"\\s*:\\s*\"([^\"]+)\"/);\n            if (titleRuns?.[1]) {\n                const t = decodeUnicode(titleRuns[1]);\n                if (isValidTitle(t)) candidates.push(t);\n            }\n            // title.simpleText 패턴\n            const titleSimple = chunk.match(/\"title\"\\s*:\\s*\\{\\s*\"simpleText\"\\s*:\\s*\"([^\"]+)\"/);\n            if (titleSimple?.[1]) {\n                const t = decodeUnicode(titleSimple[1]);\n                if (isValidTitle(t)) candidates.push(t);\n            }\n            if (candidates.length > 0) return candidates[0];\n        }\n    }\n    if (candidates.length > 0) return candidates[0];\n    // accessibilityData.label에서 추출\n    const accessPatterns = [\n        new RegExp(`\"${shortsId}\"[\\\\s\\\\S]{0,3000}?\"accessibilityData\"\\\\s*:\\\\s*\\\\{\\\\s*\"label\"\\\\s*:\\\\s*\"([^\"]+)\"`, \"m\"),\n        new RegExp(`\"accessibilityData\"\\\\s*:\\\\s*\\\\{\\\\s*\"label\"\\\\s*:\\\\s*\"([^\"]*${shortsId}[^\"]*)\"`, \"m\")\n    ];\n    for (const pattern of accessPatterns){\n        const match = html.match(pattern);\n        if (match?.[1]) {\n            const label = decodeUnicode(match[1]);\n            let title = label;\n            // \" - \" 이후 제거 (조회수 등)\n            const dashIdx = title.indexOf(\" - \");\n            if (dashIdx > 0) title = title.substring(0, dashIdx).trim();\n            // 마지막 \", N views\" 패턴 제거\n            title = title.replace(/,\\s*\\d[\\d,.]*\\s*(views?|조회|회).*$/i, \"\").trim();\n            if (isValidTitle(title)) return title;\n        }\n    }\n    // 일반 extractTitle로 폴백\n    return extractTitle(html, shortsId);\n}\n/**\r\n * 개별 Shorts 페이지에서 제목 직접 가져오기 (채널 페이지에서 실패 시 폴백)\r\n */ async function fetchShortsTitleDirect(shortsId) {\n    try {\n        const res = await fetch(`https://www.youtube.com/shorts/${shortsId}`, {\n            headers: COMMON_HEADERS,\n            cache: \"no-store\"\n        });\n        const html = await res.text();\n        // 1) og:title (가장 신뢰도 높음)\n        const ogTitle = html.match(/<meta[^>]+property=[\"']og:title[\"'][^>]+content=[\"']([^\"']+)[\"']/i) ?? html.match(/<meta[^>]+content=[\"']([^\"']+)[\"'][^>]+property=[\"']og:title[\"']/i);\n        if (ogTitle?.[1]) {\n            const t = decodeUnicode(ogTitle[1]).trim();\n            if (isValidTitle(t) && !t.includes(\"YouTube\") && !t.includes(\"@\")) return t;\n        }\n        // 2) <title> 태그\n        const titleTag = html.match(/<title[^>]*>([^<]+)<\\/title>/i);\n        if (titleTag?.[1]) {\n            const t = titleTag[1].replace(/\\s*-\\s*YouTube\\s*$/i, \"\").trim();\n            if (isValidTitle(t) && !t.includes(\"@\")) return t;\n        }\n        // 3) JSON 내 title.runs\n        const jsonTitle = html.match(/\"title\"\\s*:\\s*\\{\\s*\"runs\"\\s*:\\s*\\[\\s*\\{\\s*\"text\"\\s*:\\s*\"([^\"]+)\"/);\n        if (jsonTitle?.[1]) {\n            const t = decodeUnicode(jsonTitle[1]);\n            if (isValidTitle(t)) return t;\n        }\n        // 4) JSON 내 title.simpleText\n        const jsonSimple = html.match(/\"title\"\\s*:\\s*\\{\\s*\"simpleText\"\\s*:\\s*\"([^\"]+)\"/);\n        if (jsonSimple?.[1]) {\n            const t = decodeUnicode(jsonSimple[1]);\n            if (isValidTitle(t)) return t;\n        }\n        // 5) headline (Shorts 개별 페이지에서도 등장 가능)\n        const headline = html.match(/\"headline\"\\s*:\\s*\\{\\s*\"simpleText\"\\s*:\\s*\"([^\"]+)\"/);\n        if (headline?.[1]) {\n            const t = decodeUnicode(headline[1]);\n            if (isValidTitle(t)) return t;\n        }\n        // 6) engagementPanels 내 제목 (Shorts 페이지 특유)\n        const engagementTitle = html.match(/\"headerTitle\"\\s*:\\s*\"([^\"]+)\"/);\n        if (engagementTitle?.[1]) {\n            const t = decodeUnicode(engagementTitle[1]);\n            if (isValidTitle(t)) return t;\n        }\n        return \"\";\n    } catch  {\n        return \"\";\n    }\n}\nasync function fetchLatestVideo() {\n    try {\n        const res = await fetch(`${CHANNEL_URL}/videos`, {\n            headers: COMMON_HEADERS,\n            cache: \"no-store\"\n        });\n        const html = await res.text();\n        const videoId = extractLatestVideoId(html);\n        if (!videoId) return null;\n        const title = extractTitle(html, videoId);\n        const thumbnail = `https://i.ytimg.com/vi/${videoId}/maxresdefault.jpg`;\n        return {\n            id: videoId,\n            title: title || \"HADES 영상\",\n            thumbnail,\n            url: `https://www.youtube.com/watch?v=${videoId}`,\n            type: \"video\",\n            publishedAt: null\n        };\n    } catch  {\n        return null;\n    }\n}\nasync function fetchLatestShort() {\n    try {\n        const res = await fetch(`${CHANNEL_URL}/shorts`, {\n            headers: COMMON_HEADERS,\n            cache: \"no-store\"\n        });\n        const html = await res.text();\n        const shortsId = extractShortsId(html);\n        if (!shortsId) return null;\n        // 1차: 채널 shorts 탭 HTML에서 Shorts 전용 추출\n        let title = extractShortsTitle(html, shortsId);\n        // 2차: 실패 시 개별 Shorts 페이지에서 직접 가져오기\n        if (!title) {\n            title = await fetchShortsTitleDirect(shortsId);\n        }\n        const thumbnail = `https://i.ytimg.com/vi/${shortsId}/maxresdefault.jpg`;\n        return {\n            id: shortsId,\n            title: title || \"HADES Shorts\",\n            thumbnail,\n            url: `https://www.youtube.com/shorts/${shortsId}`,\n            type: \"shorts\",\n            publishedAt: null\n        };\n    } catch  {\n        return null;\n    }\n}\nasync function GET() {\n    const now = Date.now();\n    if (cached && cached.expiresAt > now) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(cached.data);\n    }\n    try {\n        const [video, short] = await Promise.all([\n            fetchLatestVideo(),\n            fetchLatestShort()\n        ]);\n        const results = [\n            video,\n            short\n        ].filter(Boolean);\n        cached = {\n            data: results,\n            expiresAt: now + 30 * 60 * 1000\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(results);\n    } catch  {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json([]);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3lvdXR1YmUvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkM7QUFXM0MsTUFBTUMsY0FBYztBQUNwQixNQUFNQyxpQkFBaUI7SUFDckIsY0FBYztJQUNkLG1CQUFtQjtBQUNyQjtBQUVBLElBQUlDLFNBQTZEO0FBRWpFLFNBQVNDLGVBQWVDLElBQVk7SUFDbEMsTUFBTUMsUUFBUUQsS0FBS0MsS0FBSyxDQUFDO0lBQ3pCLE9BQU9BLE9BQU8sQ0FBQyxFQUFFLElBQUk7QUFDdkI7QUFFQSxTQUFTQyxxQkFBcUJGLElBQVk7SUFDeEMsTUFBTUcsY0FBd0IsRUFBRTtJQUNoQyxNQUFNQyxtQkFBbUI7UUFDdkI7UUFDQTtLQUNEO0lBRUQsS0FBSyxNQUFNQyxXQUFXRCxpQkFBa0I7UUFDdEMsS0FBSyxNQUFNSCxTQUFTRCxLQUFLTSxRQUFRLENBQUNELFNBQVU7WUFDMUMsTUFBTUUsS0FBS04sS0FBSyxDQUFDLEVBQUU7WUFDbkIsSUFBSU0sSUFBSUosWUFBWUssSUFBSSxDQUFDRDtRQUMzQjtRQUNBLElBQUlKLFlBQVlNLE1BQU0sR0FBRyxHQUFHO0lBQzlCO0lBRUEsSUFBSU4sWUFBWU0sTUFBTSxHQUFHLEdBQUc7UUFDMUIsT0FBT0MsTUFBTUMsSUFBSSxDQUFDLElBQUlDLElBQUlULGFBQWEsQ0FBQyxFQUFFLElBQUk7SUFDaEQ7SUFFQSxPQUFPSixlQUFlQztBQUN4QjtBQUVBLFNBQVNhLGdCQUFnQmIsSUFBWTtJQUNuQyxNQUFNQyxRQUFRRCxLQUFLQyxLQUFLLENBQUM7SUFDekIsT0FBT0EsT0FBTyxDQUFDLEVBQUUsSUFBSTtBQUN2QjtBQUVBLFNBQVNhLGNBQWNDLEdBQVc7SUFDaEMsT0FBT0EsSUFDSkMsT0FBTyxDQUFDLHdCQUF3QixDQUFDQyxHQUFHQyxNQUFRQyxPQUFPQyxZQUFZLENBQUNDLFNBQVNILEtBQUssTUFDOUVGLE9BQU8sQ0FBQyxRQUFRLEtBQ2hCQSxPQUFPLENBQUMsUUFBUTtBQUNyQjtBQUVBOzs7Q0FHQyxHQUNELFNBQVNNLGFBQWFDLEtBQWE7SUFDakMsSUFBSSxDQUFDQSxTQUFTQSxNQUFNQyxJQUFJLEdBQUdmLE1BQU0sR0FBRyxHQUFHLE9BQU87SUFDOUMsTUFBTWdCLElBQUlGLE1BQU1DLElBQUk7SUFFcEIsa0NBQWtDO0lBQ2xDLElBQUlDLE1BQU0sUUFBUUEsTUFBTSxTQUFTLE9BQU87SUFFeEMsOENBQThDO0lBQzlDLElBQUkseUJBQXlCQyxJQUFJLENBQUNELElBQUksT0FBTztJQUU3QyxvQ0FBb0M7SUFDcEMsSUFBSSxxREFBcURDLElBQUksQ0FBQ0QsSUFBSSxPQUFPO0lBRXpFLG9CQUFvQjtJQUNwQixNQUFNRSxVQUFVO1FBQ2Q7UUFBVztRQUFNO1FBQU87UUFBTztRQUFNO1FBQ3JDO1FBQWE7UUFBUTtRQUFXO1FBQVM7UUFDekM7UUFBTztRQUFPO1FBQWE7UUFDM0I7UUFBTTtLQUNQO0lBQ0QsSUFBSUEsUUFBUUMsUUFBUSxDQUFDSCxJQUFJLE9BQU87SUFFaEMsT0FBTztBQUNUO0FBRUE7OztDQUdDLEdBQ0QsU0FBU0ksYUFBYUMsSUFBWSxFQUFFQyxPQUFlO0lBQ2pELE1BQU1DLGFBQXVCLEVBQUU7SUFFL0IsdUNBQXVDO0lBQ3ZDLE1BQU1DLE1BQU1ILEtBQUtJLE9BQU8sQ0FBQyxDQUFDLFdBQVcsRUFBRUgsUUFBUSxDQUFDLENBQUM7SUFDakQsSUFBSUUsUUFBUSxDQUFDLEdBQUc7UUFDZCxnQkFBZ0I7UUFDaEIsTUFBTUUsUUFBUUwsS0FBS00sU0FBUyxDQUFDSCxLQUFLSSxLQUFLQyxHQUFHLENBQUNMLE1BQU0sTUFBTUgsS0FBS3JCLE1BQU07UUFFbEUsNkNBQTZDO1FBQzdDLE1BQU04QixZQUFZSixNQUFNbEMsS0FBSyxDQUFDO1FBQzlCLElBQUlzQyxXQUFXLENBQUMsRUFBRSxFQUFFO1lBQ2xCLE1BQU1kLElBQUlYLGNBQWN5QixTQUFTLENBQUMsRUFBRTtZQUNwQyxJQUFJakIsYUFBYUcsSUFBSU8sV0FBV3hCLElBQUksQ0FBQ2lCO1FBQ3ZDO1FBRUEsOENBQThDO1FBQzlDLE1BQU1lLGNBQWNMLE1BQU1sQyxLQUFLLENBQUM7UUFDaEMsSUFBSXVDLGFBQWEsQ0FBQyxFQUFFLEVBQUU7WUFDcEIsTUFBTWYsSUFBSVgsY0FBYzBCLFdBQVcsQ0FBQyxFQUFFO1lBQ3RDLElBQUlsQixhQUFhRyxJQUFJTyxXQUFXeEIsSUFBSSxDQUFDaUI7UUFDdkM7UUFFQSxxQkFBcUI7UUFDckIsSUFBSU8sV0FBV3ZCLE1BQU0sR0FBRyxHQUFHLE9BQU91QixVQUFVLENBQUMsRUFBRTtRQUUvQyw2Q0FBNkM7UUFDN0MsSUFBSUMsTUFBTSxLQUFLO1lBQ2IsTUFBTVEsY0FBY1gsS0FBS00sU0FBUyxDQUFDQyxLQUFLSyxHQUFHLENBQUMsR0FBR1QsTUFBTSxNQUFNQSxNQUFNO1lBQ2pFLE1BQU1VLGFBQWFGLFlBQVl4QyxLQUFLLENBQUM7WUFDckMsSUFBSTBDLFlBQVksQ0FBQyxFQUFFLEVBQUU7Z0JBQ25CLE1BQU1sQixJQUFJWCxjQUFjNkIsVUFBVSxDQUFDLEVBQUU7Z0JBQ3JDLElBQUlyQixhQUFhRyxJQUFJTyxXQUFXeEIsSUFBSSxDQUFDaUI7WUFDdkM7WUFDQSxNQUFNbUIsZUFBZUgsWUFBWXhDLEtBQUssQ0FBQztZQUN2QyxJQUFJMkMsY0FBYyxDQUFDLEVBQUUsRUFBRTtnQkFDckIsTUFBTW5CLElBQUlYLGNBQWM4QixZQUFZLENBQUMsRUFBRTtnQkFDdkMsSUFBSXRCLGFBQWFHLElBQUlPLFdBQVd4QixJQUFJLENBQUNpQjtZQUN2QztRQUNGO0lBQ0Y7SUFFQSxJQUFJTyxXQUFXdkIsTUFBTSxHQUFHLEdBQUcsT0FBT3VCLFVBQVUsQ0FBQyxFQUFFO0lBRS9DLG9FQUFvRTtJQUNwRSxnREFBZ0Q7SUFDaEQsTUFBTTVCLG1CQUFtQjtRQUN2QixJQUFJeUMsT0FBTyxDQUFDLHdEQUF3RCxFQUFFZCxRQUFRLGdJQUFnSSxDQUFDLEVBQUU7UUFDak4sSUFBSWMsT0FBTyxDQUFDLHVEQUF1RCxFQUFFZCxRQUFRLHlFQUF5RSxDQUFDLEVBQUU7UUFDekosSUFBSWMsT0FBTyxDQUFDLG1CQUFtQixFQUFFZCxRQUFRLDBFQUEwRSxDQUFDLEVBQUU7S0FDdkg7SUFFRCxLQUFLLE1BQU0xQixXQUFXRCxpQkFBa0I7UUFDdEMsTUFBTUgsUUFBUTZCLEtBQUs3QixLQUFLLENBQUNJO1FBQ3pCLElBQUlKLE9BQU87WUFDVCxNQUFNd0IsSUFBSVgsY0FBY2IsS0FBSyxDQUFDLEVBQUUsSUFBSUEsS0FBSyxDQUFDLEVBQUUsSUFBSUEsS0FBSyxDQUFDLEVBQUUsSUFBSTtZQUM1RCxJQUFJcUIsYUFBYUcsSUFBSSxPQUFPQTtRQUM5QjtJQUNGO0lBRUEsa0NBQWtDO0lBQ2xDLE1BQU1xQixpQkFBaUI7UUFDckIsSUFBSUQsT0FBTyxDQUFDLG1CQUFtQixFQUFFZCxRQUFRLDhFQUE4RSxDQUFDLEVBQUU7UUFDMUgsSUFBSWMsT0FBTyxDQUFDLDBEQUEwRCxFQUFFZCxRQUFRLE9BQU8sQ0FBQyxFQUFFO0tBQzNGO0lBQ0QsS0FBSyxNQUFNMUIsV0FBV3lDLGVBQWdCO1FBQ3BDLE1BQU03QyxRQUFRNkIsS0FBSzdCLEtBQUssQ0FBQ0k7UUFDekIsSUFBSUosT0FBTyxDQUFDLEVBQUUsRUFBRTtZQUNkLE1BQU04QyxRQUFRakMsY0FBY2IsS0FBSyxDQUFDLEVBQUU7WUFDcEMsb0RBQW9EO1lBQ3BELDRCQUE0QjtZQUM1QixJQUFJc0IsUUFBUXdCO1lBQ1osTUFBTUMsVUFBVUQsTUFBTUUsV0FBVyxDQUFDO1lBQ2xDLElBQUlELFVBQVUsR0FBR3pCLFFBQVF3QixNQUFNWCxTQUFTLENBQUMsR0FBR1ksU0FBU3hCLElBQUk7WUFFekQsY0FBYztZQUNkRCxRQUFRQSxNQUFNUCxPQUFPLENBQUMsb0JBQW9CLElBQUlRLElBQUk7WUFDbERELFFBQVFBLE1BQU1QLE9BQU8sQ0FBQywwQkFBMEIsSUFBSVEsSUFBSTtZQUV4RCxJQUFJRixhQUFhQyxRQUFRLE9BQU9BO1FBQ2xDO0lBQ0Y7SUFFQSxvQ0FBb0M7SUFDcEMsTUFBTTJCLFVBQVVwQixLQUFLN0IsS0FBSyxDQUFDLHdFQUN0QjZCLEtBQUs3QixLQUFLLENBQUM7SUFDaEIsSUFBSWlELFNBQVMsQ0FBQyxFQUFFLEVBQUU7UUFDaEIsTUFBTXpCLElBQUlYLGNBQWNvQyxPQUFPLENBQUMsRUFBRSxFQUFFMUIsSUFBSTtRQUN4QyxJQUFJQyxLQUFLLENBQUNBLEVBQUVHLFFBQVEsQ0FBQyxjQUFjLENBQUNILEVBQUVHLFFBQVEsQ0FBQyxRQUFRTixhQUFhRyxJQUFJLE9BQU9BO0lBQ2pGO0lBRUEsZ0JBQWdCO0lBQ2hCLE1BQU0wQixXQUFXckIsS0FBSzdCLEtBQUssQ0FBQztJQUM1QixJQUFJa0QsVUFBVSxDQUFDLEVBQUUsRUFBRTtRQUNqQixNQUFNMUIsSUFBSTBCLFFBQVEsQ0FBQyxFQUFFLENBQUNuQyxPQUFPLENBQUMsdUJBQXVCLElBQUlRLElBQUk7UUFDN0QsSUFBSUYsYUFBYUcsTUFBTSxDQUFDQSxFQUFFRyxRQUFRLENBQUMsTUFBTSxPQUFPSDtJQUNsRDtJQUVBLE9BQU87QUFDVDtBQUVBOzs7Q0FHQyxHQUNELFNBQVMyQixtQkFBbUJ0QixJQUFZLEVBQUV1QixRQUFnQjtJQUN4RCxNQUFNckIsYUFBdUIsRUFBRTtJQUUvQixrQ0FBa0M7SUFDbEMsZ0VBQWdFO0lBQ2hFLE1BQU1zQixpQkFBaUI7UUFDckIsQ0FBQyxDQUFDLEVBQUVELFNBQVMsQ0FBQyxDQUFDO1FBQ2YsQ0FBQyxZQUFZLEVBQUVBLFNBQVMsQ0FBQztLQUMxQjtJQUVELEtBQUssTUFBTUUsYUFBYUQsZUFBZ0I7UUFDdEMsSUFBSUUsWUFBWTtRQUNoQixNQUFNQyxXQUFXRixVQUFVdkMsT0FBTyxDQUFDLFNBQVM7UUFFNUMsTUFBTyxLQUFNO1lBQ1gsTUFBTTBDLFFBQVE1QixLQUFLSSxPQUFPLENBQ3hCdUIsU0FBUzdCLFFBQVEsQ0FBQyxjQUFjLENBQUMsUUFBUSxFQUFFeUIsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUVBLFNBQVMsQ0FBQyxDQUFDLEVBQ3ZFRztZQUVGLElBQUlFLFVBQVUsQ0FBQyxHQUFHO1lBQ2xCRixZQUFZRSxRQUFRO1lBRXBCLHlCQUF5QjtZQUN6QixNQUFNQyxRQUFRdEIsS0FBS0ssR0FBRyxDQUFDLEdBQUdnQixRQUFRO1lBQ2xDLE1BQU1FLE1BQU12QixLQUFLQyxHQUFHLENBQUNSLEtBQUtyQixNQUFNLEVBQUVpRCxRQUFRO1lBQzFDLE1BQU12QixRQUFRTCxLQUFLTSxTQUFTLENBQUN1QixPQUFPQztZQUVwQyxvREFBb0Q7WUFDcEQsTUFBTUMsaUJBQWlCMUIsTUFBTWxDLEtBQUssQ0FBQztZQUNuQyxJQUFJNEQsZ0JBQWdCLENBQUMsRUFBRSxFQUFFO2dCQUN2QixNQUFNcEMsSUFBSVgsY0FBYytDLGNBQWMsQ0FBQyxFQUFFO2dCQUN6QyxJQUFJdkMsYUFBYUcsSUFBSU8sV0FBV3hCLElBQUksQ0FBQ2lCO1lBQ3ZDO1lBRUEsbUJBQW1CO1lBQ25CLE1BQU1xQyxlQUFlM0IsTUFBTWxDLEtBQUssQ0FBQztZQUNqQyxJQUFJNkQsY0FBYyxDQUFDLEVBQUUsRUFBRTtnQkFDckIsTUFBTXJDLElBQUlYLGNBQWNnRCxZQUFZLENBQUMsRUFBRTtnQkFDdkMsSUFBSXhDLGFBQWFHLElBQUlPLFdBQVd4QixJQUFJLENBQUNpQjtZQUN2QztZQUVBLHlDQUF5QztZQUN6QyxNQUFNc0MsaUJBQWlCNUIsTUFBTWxDLEtBQUssQ0FBQztZQUNuQyxJQUFJOEQsZ0JBQWdCLENBQUMsRUFBRSxFQUFFO2dCQUN2QixNQUFNdEMsSUFBSVgsY0FBY2lELGNBQWMsQ0FBQyxFQUFFO2dCQUN6QyxJQUFJekMsYUFBYUcsSUFBSU8sV0FBV3hCLElBQUksQ0FBQ2lCO1lBQ3ZDO1lBRUEsZ0JBQWdCO1lBQ2hCLE1BQU11QyxZQUFZN0IsTUFBTWxDLEtBQUssQ0FBQztZQUM5QixJQUFJK0QsV0FBVyxDQUFDLEVBQUUsRUFBRTtnQkFDbEIsTUFBTXZDLElBQUlYLGNBQWNrRCxTQUFTLENBQUMsRUFBRTtnQkFDcEMsSUFBSTFDLGFBQWFHLElBQUlPLFdBQVd4QixJQUFJLENBQUNpQjtZQUN2QztZQUVBLHNCQUFzQjtZQUN0QixNQUFNd0MsY0FBYzlCLE1BQU1sQyxLQUFLLENBQUM7WUFDaEMsSUFBSWdFLGFBQWEsQ0FBQyxFQUFFLEVBQUU7Z0JBQ3BCLE1BQU14QyxJQUFJWCxjQUFjbUQsV0FBVyxDQUFDLEVBQUU7Z0JBQ3RDLElBQUkzQyxhQUFhRyxJQUFJTyxXQUFXeEIsSUFBSSxDQUFDaUI7WUFDdkM7WUFFQSxJQUFJTyxXQUFXdkIsTUFBTSxHQUFHLEdBQUcsT0FBT3VCLFVBQVUsQ0FBQyxFQUFFO1FBQ2pEO0lBQ0Y7SUFFQSxJQUFJQSxXQUFXdkIsTUFBTSxHQUFHLEdBQUcsT0FBT3VCLFVBQVUsQ0FBQyxFQUFFO0lBRS9DLCtCQUErQjtJQUMvQixNQUFNYyxpQkFBaUI7UUFDckIsSUFBSUQsT0FBTyxDQUFDLENBQUMsRUFBRVEsU0FBUyw4RUFBOEUsQ0FBQyxFQUFFO1FBQ3pHLElBQUlSLE9BQU8sQ0FBQywwREFBMEQsRUFBRVEsU0FBUyxPQUFPLENBQUMsRUFBRTtLQUM1RjtJQUNELEtBQUssTUFBTWhELFdBQVd5QyxlQUFnQjtRQUNwQyxNQUFNN0MsUUFBUTZCLEtBQUs3QixLQUFLLENBQUNJO1FBQ3pCLElBQUlKLE9BQU8sQ0FBQyxFQUFFLEVBQUU7WUFDZCxNQUFNOEMsUUFBUWpDLGNBQWNiLEtBQUssQ0FBQyxFQUFFO1lBQ3BDLElBQUlzQixRQUFRd0I7WUFDWixzQkFBc0I7WUFDdEIsTUFBTW1CLFVBQVUzQyxNQUFNVyxPQUFPLENBQUM7WUFDOUIsSUFBSWdDLFVBQVUsR0FBRzNDLFFBQVFBLE1BQU1hLFNBQVMsQ0FBQyxHQUFHOEIsU0FBUzFDLElBQUk7WUFDekQsd0JBQXdCO1lBQ3hCRCxRQUFRQSxNQUFNUCxPQUFPLENBQUMscUNBQXFDLElBQUlRLElBQUk7WUFDbkUsSUFBSUYsYUFBYUMsUUFBUSxPQUFPQTtRQUNsQztJQUNGO0lBRUEsc0JBQXNCO0lBQ3RCLE9BQU9NLGFBQWFDLE1BQU11QjtBQUM1QjtBQUVBOztDQUVDLEdBQ0QsZUFBZWMsdUJBQXVCZCxRQUFnQjtJQUNwRCxJQUFJO1FBQ0YsTUFBTWUsTUFBTSxNQUFNQyxNQUFNLENBQUMsK0JBQStCLEVBQUVoQixTQUFTLENBQUMsRUFBRTtZQUNwRWlCLFNBQVN6RTtZQUNUMEUsT0FBTztRQUNUO1FBQ0EsTUFBTXpDLE9BQU8sTUFBTXNDLElBQUlwRSxJQUFJO1FBRTNCLDBCQUEwQjtRQUMxQixNQUFNa0QsVUFBVXBCLEtBQUs3QixLQUFLLENBQUMsd0VBQ3RCNkIsS0FBSzdCLEtBQUssQ0FBQztRQUNoQixJQUFJaUQsU0FBUyxDQUFDLEVBQUUsRUFBRTtZQUNoQixNQUFNekIsSUFBSVgsY0FBY29DLE9BQU8sQ0FBQyxFQUFFLEVBQUUxQixJQUFJO1lBQ3hDLElBQUlGLGFBQWFHLE1BQU0sQ0FBQ0EsRUFBRUcsUUFBUSxDQUFDLGNBQWMsQ0FBQ0gsRUFBRUcsUUFBUSxDQUFDLE1BQU0sT0FBT0g7UUFDNUU7UUFFQSxnQkFBZ0I7UUFDaEIsTUFBTTBCLFdBQVdyQixLQUFLN0IsS0FBSyxDQUFDO1FBQzVCLElBQUlrRCxVQUFVLENBQUMsRUFBRSxFQUFFO1lBQ2pCLE1BQU0xQixJQUFJMEIsUUFBUSxDQUFDLEVBQUUsQ0FBQ25DLE9BQU8sQ0FBQyx1QkFBdUIsSUFBSVEsSUFBSTtZQUM3RCxJQUFJRixhQUFhRyxNQUFNLENBQUNBLEVBQUVHLFFBQVEsQ0FBQyxNQUFNLE9BQU9IO1FBQ2xEO1FBRUEsdUJBQXVCO1FBQ3ZCLE1BQU0rQyxZQUFZMUMsS0FBSzdCLEtBQUssQ0FBQztRQUM3QixJQUFJdUUsV0FBVyxDQUFDLEVBQUUsRUFBRTtZQUNsQixNQUFNL0MsSUFBSVgsY0FBYzBELFNBQVMsQ0FBQyxFQUFFO1lBQ3BDLElBQUlsRCxhQUFhRyxJQUFJLE9BQU9BO1FBQzlCO1FBRUEsNkJBQTZCO1FBQzdCLE1BQU1nRCxhQUFhM0MsS0FBSzdCLEtBQUssQ0FBQztRQUM5QixJQUFJd0UsWUFBWSxDQUFDLEVBQUUsRUFBRTtZQUNuQixNQUFNaEQsSUFBSVgsY0FBYzJELFVBQVUsQ0FBQyxFQUFFO1lBQ3JDLElBQUluRCxhQUFhRyxJQUFJLE9BQU9BO1FBQzlCO1FBRUEsdUNBQXVDO1FBQ3ZDLE1BQU1pRCxXQUFXNUMsS0FBSzdCLEtBQUssQ0FBQztRQUM1QixJQUFJeUUsVUFBVSxDQUFDLEVBQUUsRUFBRTtZQUNqQixNQUFNakQsSUFBSVgsY0FBYzRELFFBQVEsQ0FBQyxFQUFFO1lBQ25DLElBQUlwRCxhQUFhRyxJQUFJLE9BQU9BO1FBQzlCO1FBRUEsMkNBQTJDO1FBQzNDLE1BQU1rRCxrQkFBa0I3QyxLQUFLN0IsS0FBSyxDQUFDO1FBQ25DLElBQUkwRSxpQkFBaUIsQ0FBQyxFQUFFLEVBQUU7WUFDeEIsTUFBTWxELElBQUlYLGNBQWM2RCxlQUFlLENBQUMsRUFBRTtZQUMxQyxJQUFJckQsYUFBYUcsSUFBSSxPQUFPQTtRQUM5QjtRQUVBLE9BQU87SUFDVCxFQUFFLE9BQU07UUFDTixPQUFPO0lBQ1Q7QUFDRjtBQUVBLGVBQWVtRDtJQUNiLElBQUk7UUFDRixNQUFNUixNQUFNLE1BQU1DLE1BQU0sQ0FBQyxFQUFFekUsWUFBWSxPQUFPLENBQUMsRUFBRTtZQUMvQzBFLFNBQVN6RTtZQUNUMEUsT0FBTztRQUNUO1FBQ0EsTUFBTXpDLE9BQU8sTUFBTXNDLElBQUlwRSxJQUFJO1FBQzNCLE1BQU0rQixVQUFVN0IscUJBQXFCNEI7UUFDckMsSUFBSSxDQUFDQyxTQUFTLE9BQU87UUFFckIsTUFBTVIsUUFBUU0sYUFBYUMsTUFBTUM7UUFDakMsTUFBTThDLFlBQVksQ0FBQyx1QkFBdUIsRUFBRTlDLFFBQVEsa0JBQWtCLENBQUM7UUFFdkUsT0FBTztZQUNMeEIsSUFBSXdCO1lBQ0pSLE9BQU9BLFNBQVM7WUFDaEJzRDtZQUNBQyxLQUFLLENBQUMsZ0NBQWdDLEVBQUUvQyxRQUFRLENBQUM7WUFDakRnRCxNQUFNO1lBQ05DLGFBQWE7UUFDZjtJQUNGLEVBQUUsT0FBTTtRQUNOLE9BQU87SUFDVDtBQUNGO0FBRUEsZUFBZUM7SUFDYixJQUFJO1FBQ0YsTUFBTWIsTUFBTSxNQUFNQyxNQUFNLENBQUMsRUFBRXpFLFlBQVksT0FBTyxDQUFDLEVBQUU7WUFDL0MwRSxTQUFTekU7WUFDVDBFLE9BQU87UUFDVDtRQUNBLE1BQU16QyxPQUFPLE1BQU1zQyxJQUFJcEUsSUFBSTtRQUMzQixNQUFNcUQsV0FBV3hDLGdCQUFnQmlCO1FBQ2pDLElBQUksQ0FBQ3VCLFVBQVUsT0FBTztRQUV0QixzQ0FBc0M7UUFDdEMsSUFBSTlCLFFBQVE2QixtQkFBbUJ0QixNQUFNdUI7UUFFckMsbUNBQW1DO1FBQ25DLElBQUksQ0FBQzlCLE9BQU87WUFDVkEsUUFBUSxNQUFNNEMsdUJBQXVCZDtRQUN2QztRQUVBLE1BQU13QixZQUFZLENBQUMsdUJBQXVCLEVBQUV4QixTQUFTLGtCQUFrQixDQUFDO1FBRXhFLE9BQU87WUFDTDlDLElBQUk4QztZQUNKOUIsT0FBT0EsU0FBUztZQUNoQnNEO1lBQ0FDLEtBQUssQ0FBQywrQkFBK0IsRUFBRXpCLFNBQVMsQ0FBQztZQUNqRDBCLE1BQU07WUFDTkMsYUFBYTtRQUNmO0lBQ0YsRUFBRSxPQUFNO1FBQ04sT0FBTztJQUNUO0FBQ0Y7QUFFTyxlQUFlRTtJQUNwQixNQUFNQyxNQUFNQyxLQUFLRCxHQUFHO0lBQ3BCLElBQUlyRixVQUFVQSxPQUFPdUYsU0FBUyxHQUFHRixLQUFLO1FBQ3BDLE9BQU94RixxREFBWUEsQ0FBQzJGLElBQUksQ0FBQ3hGLE9BQU95RixJQUFJO0lBQ3RDO0lBRUEsSUFBSTtRQUNGLE1BQU0sQ0FBQ0MsT0FBT0MsTUFBTSxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztZQUN2Q2Y7WUFDQUs7U0FDRDtRQUVELE1BQU1XLFVBQVU7WUFBQ0o7WUFBT0M7U0FBTSxDQUFDSSxNQUFNLENBQUNDO1FBRXRDaEcsU0FBUztZQUNQeUYsTUFBTUs7WUFDTlAsV0FBV0YsTUFBTSxLQUFLLEtBQUs7UUFDN0I7UUFFQSxPQUFPeEYscURBQVlBLENBQUMyRixJQUFJLENBQUNNO0lBQzNCLEVBQUUsT0FBTTtRQUNOLE9BQU9qRyxxREFBWUEsQ0FBQzJGLElBQUksQ0FBQyxFQUFFO0lBQzdCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYWRlcy1mYW5hcHAvLi9hcHAvYXBpL3lvdXR1YmUvcm91dGUudHM/N2JkNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuXHJcbnR5cGUgWW91VHViZVZpZGVvID0ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICB0aHVtYm5haWw6IHN0cmluZztcclxuICB1cmw6IHN0cmluZztcclxuICB0eXBlOiBcInZpZGVvXCIgfCBcInNob3J0c1wiO1xyXG4gIHB1Ymxpc2hlZEF0OiBzdHJpbmcgfCBudWxsO1xyXG59O1xyXG5cclxuY29uc3QgQ0hBTk5FTF9VUkwgPSBcImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL0BIQURFU19vZmZpXCI7XHJcbmNvbnN0IENPTU1PTl9IRUFERVJTID0ge1xyXG4gIFwiVXNlci1BZ2VudFwiOiBcIk1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjAuMC4wLjAgU2FmYXJpLzUzNy4zNlwiLFxyXG4gIFwiQWNjZXB0LUxhbmd1YWdlXCI6IFwia28tS1Isa287cT0wLjlcIixcclxufTtcclxuXHJcbmxldCBjYWNoZWQ6IHsgZGF0YTogWW91VHViZVZpZGVvW107IGV4cGlyZXNBdDogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcclxuXHJcbmZ1bmN0aW9uIGV4dHJhY3RWaWRlb0lkKHRleHQ6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xyXG4gIGNvbnN0IG1hdGNoID0gdGV4dC5tYXRjaCgvXFwvd2F0Y2hcXD92PShbYS16QS1aMC05Xy1dezExfSkvKTtcclxuICByZXR1cm4gbWF0Y2g/LlsxXSA/PyBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBleHRyYWN0TGF0ZXN0VmlkZW9JZCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcclxuICBjb25zdCByZW5kZXJlcklkczogc3RyaW5nW10gPSBbXTtcclxuICBjb25zdCByZW5kZXJlclBhdHRlcm5zID0gW1xyXG4gICAgL1wiZ3JpZFZpZGVvUmVuZGVyZXJcIlxccyo6XFxzKlxce1tcXHNcXFNdezAsMTIwfT9cInZpZGVvSWRcIlxccyo6XFxzKlwiKFthLXpBLVowLTlfLV17MTF9KVwiL2csXHJcbiAgICAvXCJ2aWRlb1JlbmRlcmVyXCJcXHMqOlxccypcXHtbXFxzXFxTXXswLDEyMH0/XCJ2aWRlb0lkXCJcXHMqOlxccypcIihbYS16QS1aMC05Xy1dezExfSlcIi9nLFxyXG4gIF07XHJcblxyXG4gIGZvciAoY29uc3QgcGF0dGVybiBvZiByZW5kZXJlclBhdHRlcm5zKSB7XHJcbiAgICBmb3IgKGNvbnN0IG1hdGNoIG9mIHRleHQubWF0Y2hBbGwocGF0dGVybikpIHtcclxuICAgICAgY29uc3QgaWQgPSBtYXRjaFsxXTtcclxuICAgICAgaWYgKGlkKSByZW5kZXJlcklkcy5wdXNoKGlkKTtcclxuICAgIH1cclxuICAgIGlmIChyZW5kZXJlcklkcy5sZW5ndGggPiAwKSBicmVhaztcclxuICB9XHJcblxyXG4gIGlmIChyZW5kZXJlcklkcy5sZW5ndGggPiAwKSB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbShuZXcgU2V0KHJlbmRlcmVySWRzKSlbMF0gPz8gbnVsbDtcclxuICB9XHJcblxyXG4gIHJldHVybiBleHRyYWN0VmlkZW9JZCh0ZXh0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZXh0cmFjdFNob3J0c0lkKHRleHQ6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xyXG4gIGNvbnN0IG1hdGNoID0gdGV4dC5tYXRjaCgvXFwvc2hvcnRzXFwvKFthLXpBLVowLTlfLV17MTF9KS8pO1xyXG4gIHJldHVybiBtYXRjaD8uWzFdID8/IG51bGw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlY29kZVVuaWNvZGUoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHJldHVybiBzdHJcclxuICAgIC5yZXBsYWNlKC9cXFxcdShbMC05YS1mQS1GXXs0fSkvZywgKF8sIGhleCkgPT4gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChoZXgsIDE2KSkpXHJcbiAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpXHJcbiAgICAucmVwbGFjZSgvXFxcXG4vZywgXCIgXCIpO1xyXG59XHJcblxyXG4vKipcclxuICog7Jyg7Zqo7ZWcIOygnOuqqeyduOyngCDqsoDspp1cclxuICogLSBcIuuLq+q4sFwiLCDsiJzsiJgg7YOA7J6E7Iqk7YOs7ZSELCDruYgg66y47J6Q7Je0IOuTseydgCDsoJzsmbhcclxuICovXHJcbmZ1bmN0aW9uIGlzVmFsaWRUaXRsZSh0aXRsZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgaWYgKCF0aXRsZSB8fCB0aXRsZS50cmltKCkubGVuZ3RoIDwgMikgcmV0dXJuIGZhbHNlO1xyXG4gIGNvbnN0IHQgPSB0aXRsZS50cmltKCk7XHJcblxyXG4gIC8vIFwi64ur6riwXCIgKFNob3J0cyDtjpjsnbTsp4DsnZggY2xvc2Ug67KE7Yq8IO2FjeyKpO2KuClcclxuICBpZiAodCA9PT0gXCLri6vquLBcIiB8fCB0ID09PSBcIkNsb3NlXCIpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgLy8g7Iic7IiYIO2DgOyehOyKpO2DrO2UhCDtjKjthLQgKOyYiDogXCIwOjAwXCIsIFwiMToyMzo0NVwiLCBcIjAwOjMwXCIpXHJcbiAgaWYgKC9eXFxkezEsMn0oOlxcZHsyfSl7MSwyfSQvLnRlc3QodCkpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgLy8g7YOA7J6E7Iqk7YOs7ZSEICsg7Iqs656Y7IucIO2MqO2EtCAo7JiIOiBcIjA6MDAgLyAzOjQ1XCIpXHJcbiAgaWYgKC9eXFxkezEsMn0oOlxcZHsyfSl7MSwyfVxccypcXC9cXHMqXFxkezEsMn0oOlxcZHsyfSl7MSwyfSQvLnRlc3QodCkpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgLy8gWW91VHViZSBVSSDqtIDroKgg7YWN7Iqk7Yq4XHJcbiAgY29uc3QgdWlUZXh0cyA9IFtcclxuICAgIFwiWW91VHViZVwiLCBcIuq1rOuPhVwiLCBcIuyii+yVhOyalFwiLCBcIuyLq+yWtOyalFwiLCBcIuqzteycoFwiLCBcIuyggOyepVwiLFxyXG4gICAgXCJTdWJzY3JpYmVcIiwgXCJMaWtlXCIsIFwiRGlzbGlrZVwiLCBcIlNoYXJlXCIsIFwiU2F2ZVwiLFxyXG4gICAgXCLrjZTrs7TquLBcIiwgXCLqsITrnrXtnohcIiwgXCJTaG93IG1vcmVcIiwgXCJTaG93IGxlc3NcIixcclxuICAgIFwi64yT6riAXCIsIFwiQ29tbWVudHNcIixcclxuICBdO1xyXG4gIGlmICh1aVRleHRzLmluY2x1ZGVzKHQpKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICog6rCc7ISg65CcIOygnOuqqSDstpTstpwgLSDsl6zrn6wg7Yyo7YS07J2EIOyLnOuPhO2VmOyXrCDsi6TsoJwg7JiB7IOBIOygnOuqqeydhCDtmZXsi6Ttnogg6rCA7KC47Ji0XHJcbiAqIFNob3J0c+ydmCBcIuuLq+q4sFwiIOusuOygnCDrsI8gVmlkZW/snZgg7YOA7J6E7Iqk7YOs7ZSEIOusuOygnOulvCDrsKnsp4BcclxuICovXHJcbmZ1bmN0aW9uIGV4dHJhY3RUaXRsZShodG1sOiBzdHJpbmcsIHZpZGVvSWQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgY29uc3QgY2FuZGlkYXRlczogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgLy8gMSkgdmlkZW9JZCDso7zrs4Dsl5DshJwgdGl0bGUg7LaU7LacICjqsIDsnqUg7Iug66Kw64+EIOuGkuydjClcclxuICBjb25zdCBpZHggPSBodG1sLmluZGV4T2YoYFwidmlkZW9JZFwiOlwiJHt2aWRlb0lkfVwiYCk7XHJcbiAgaWYgKGlkeCAhPT0gLTEpIHtcclxuICAgIC8vIHZpZGVvSWQg65Kk7Kq9IO2DkOyDiVxyXG4gICAgY29uc3QgY2h1bmsgPSBodG1sLnN1YnN0cmluZyhpZHgsIE1hdGgubWluKGlkeCArIDEyMDAsIGh0bWwubGVuZ3RoKSk7XHJcblxyXG4gICAgLy8gcnVucyDtmJXsi506IFwidGl0bGVcIjp7XCJydW5zXCI6W3tcInRleHRcIjpcIi4uLlwifV19XHJcbiAgICBjb25zdCBydW5zTWF0Y2ggPSBjaHVuay5tYXRjaCgvXCJ0aXRsZVwiXFxzKjpcXHMqXFx7XFxzKlwicnVuc1wiXFxzKjpcXHMqXFxbXFxzKlxce1xccypcInRleHRcIlxccyo6XFxzKlwiKFteXCJdKylcIi8pO1xyXG4gICAgaWYgKHJ1bnNNYXRjaD8uWzFdKSB7XHJcbiAgICAgIGNvbnN0IHQgPSBkZWNvZGVVbmljb2RlKHJ1bnNNYXRjaFsxXSk7XHJcbiAgICAgIGlmIChpc1ZhbGlkVGl0bGUodCkpIGNhbmRpZGF0ZXMucHVzaCh0KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBzaW1wbGVUZXh0IO2YleyLnTogXCJ0aXRsZVwiOntcInNpbXBsZVRleHRcIjpcIi4uLlwifVxyXG4gICAgY29uc3Qgc2ltcGxlTWF0Y2ggPSBjaHVuay5tYXRjaCgvXCJ0aXRsZVwiXFxzKjpcXHMqXFx7XFxzKlwic2ltcGxlVGV4dFwiXFxzKjpcXHMqXCIoW15cIl0rKVwiLyk7XHJcbiAgICBpZiAoc2ltcGxlTWF0Y2g/LlsxXSkge1xyXG4gICAgICBjb25zdCB0ID0gZGVjb2RlVW5pY29kZShzaW1wbGVNYXRjaFsxXSk7XHJcbiAgICAgIGlmIChpc1ZhbGlkVGl0bGUodCkpIGNhbmRpZGF0ZXMucHVzaCh0KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDsnbTrr7gg7Jyg7Zqo7ZWcIOygnOuqqeydhCDssL7slZjsnLzrqbQg67CY7ZmYXHJcbiAgICBpZiAoY2FuZGlkYXRlcy5sZW5ndGggPiAwKSByZXR1cm4gY2FuZGlkYXRlc1swXTtcclxuXHJcbiAgICAvLyB2aWRlb0lkIOyVnuyqveyXkOyEnOuPhCDtg5Dsg4kgKOygnOuqqeydtCB2aWRlb0lk67O064ukIOuovOyggCDsmKwg7IiYIOyeiOydjClcclxuICAgIGlmIChpZHggPiAzMDApIHtcclxuICAgICAgY29uc3QgYmVmb3JlQ2h1bmsgPSBodG1sLnN1YnN0cmluZyhNYXRoLm1heCgwLCBpZHggLSA2MDApLCBpZHggKyAxMDApO1xyXG4gICAgICBjb25zdCBiZWZvcmVSdW5zID0gYmVmb3JlQ2h1bmsubWF0Y2goL1widGl0bGVcIlxccyo6XFxzKlxce1xccypcInJ1bnNcIlxccyo6XFxzKlxcW1xccypcXHtcXHMqXCJ0ZXh0XCJcXHMqOlxccypcIihbXlwiXSspXCIvKTtcclxuICAgICAgaWYgKGJlZm9yZVJ1bnM/LlsxXSkge1xyXG4gICAgICAgIGNvbnN0IHQgPSBkZWNvZGVVbmljb2RlKGJlZm9yZVJ1bnNbMV0pO1xyXG4gICAgICAgIGlmIChpc1ZhbGlkVGl0bGUodCkpIGNhbmRpZGF0ZXMucHVzaCh0KTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBiZWZvcmVTaW1wbGUgPSBiZWZvcmVDaHVuay5tYXRjaCgvXCJ0aXRsZVwiXFxzKjpcXHMqXFx7XFxzKlwic2ltcGxlVGV4dFwiXFxzKjpcXHMqXCIoW15cIl0rKVwiLyk7XHJcbiAgICAgIGlmIChiZWZvcmVTaW1wbGU/LlsxXSkge1xyXG4gICAgICAgIGNvbnN0IHQgPSBkZWNvZGVVbmljb2RlKGJlZm9yZVNpbXBsZVsxXSk7XHJcbiAgICAgICAgaWYgKGlzVmFsaWRUaXRsZSh0KSkgY2FuZGlkYXRlcy5wdXNoKHQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAoY2FuZGlkYXRlcy5sZW5ndGggPiAwKSByZXR1cm4gY2FuZGlkYXRlc1swXTtcclxuXHJcbiAgLy8gMikgZ3JpZFZpZGVvUmVuZGVyZXIgLyByZWVsSXRlbVJlbmRlcmVyIOq4sOuwmCDtg5Dsg4kgKOyxhOuEkCDtjpjsnbTsp4Dsl5DshJwg66CM642U66eB65CY64qUIO2Yle2DnClcclxuICAvLyB2aWRlb0lk66W8IO2PrO2VqO2VmOuKlCByZW5kZXJlciDruJTroZ3snYQg7LC+6rOgLCDqt7gg7JWI7JeQ7IScIHRpdGxlIOy2lOy2nFxyXG4gIGNvbnN0IHJlbmRlcmVyUGF0dGVybnMgPSBbXHJcbiAgICBuZXcgUmVnRXhwKGBcImdyaWRWaWRlb1JlbmRlcmVyXCJcXFxccyo6XFxcXHMqXFxcXHtbXn1dKj9cInZpZGVvSWRcIlxcXFxzKjpcXFxccypcIiR7dmlkZW9JZH1cIltcXFxcc1xcXFxTXXswLDgwMH0/XCJ0aXRsZVwiXFxcXHMqOlxcXFxzKlxcXFx7XFxcXHMqKD86XCJydW5zXCJcXFxccyo6XFxcXHMqXFxcXFtcXFxccypcXFxce1xcXFxzKlwidGV4dFwiXFxcXHMqOlxcXFxzKlwiKFteXCJdKylcInxcInNpbXBsZVRleHRcIlxcXFxzKjpcXFxccypcIihbXlwiXSspXCIpYCwgXCJtXCIpLFxyXG4gICAgbmV3IFJlZ0V4cChgXCJyZWVsSXRlbVJlbmRlcmVyXCJcXFxccyo6XFxcXHMqXFxcXHtbXn1dKj9cInZpZGVvSWRcIlxcXFxzKjpcXFxccypcIiR7dmlkZW9JZH1cIltcXFxcc1xcXFxTXXswLDgwMH0/XCJoZWFkbGluZVwiXFxcXHMqOlxcXFxzKlxcXFx7XFxcXHMqXCJzaW1wbGVUZXh0XCJcXFxccyo6XFxcXHMqXCIoW15cIl0rKVwiYCwgXCJtXCIpLFxyXG4gICAgbmV3IFJlZ0V4cChgXCJ2aWRlb0lkXCJcXFxccyo6XFxcXHMqXCIke3ZpZGVvSWR9XCJbXFxcXHNcXFxcU117MCwxMDAwfT9cImhlYWRsaW5lXCJcXFxccyo6XFxcXHMqXFxcXHtcXFxccypcInNpbXBsZVRleHRcIlxcXFxzKjpcXFxccypcIihbXlwiXSspXCJgLCBcIm1cIiksXHJcbiAgXTtcclxuXHJcbiAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIHJlbmRlcmVyUGF0dGVybnMpIHtcclxuICAgIGNvbnN0IG1hdGNoID0gaHRtbC5tYXRjaChwYXR0ZXJuKTtcclxuICAgIGlmIChtYXRjaCkge1xyXG4gICAgICBjb25zdCB0ID0gZGVjb2RlVW5pY29kZShtYXRjaFsxXSB8fCBtYXRjaFsyXSB8fCBtYXRjaFszXSB8fCBcIlwiKTtcclxuICAgICAgaWYgKGlzVmFsaWRUaXRsZSh0KSkgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyAzKSBhY2Nlc3NpYmlsaXR5RGF0YeyXkOyEnCBsYWJlbCDstpTstpxcclxuICBjb25zdCBhY2Nlc3NQYXR0ZXJucyA9IFtcclxuICAgIG5ldyBSZWdFeHAoYFwidmlkZW9JZFwiXFxcXHMqOlxcXFxzKlwiJHt2aWRlb0lkfVwiW1xcXFxzXFxcXFNdezAsMjAwMH0/XCJhY2Nlc3NpYmlsaXR5RGF0YVwiXFxcXHMqOlxcXFxzKlxcXFx7XFxcXHMqXCJsYWJlbFwiXFxcXHMqOlxcXFxzKlwiKFteXCJdKylcImAsIFwibVwiKSxcclxuICAgIG5ldyBSZWdFeHAoYFwiYWNjZXNzaWJpbGl0eURhdGFcIlxcXFxzKjpcXFxccypcXFxce1xcXFxzKlwibGFiZWxcIlxcXFxzKjpcXFxccypcIihbXlwiXSoke3ZpZGVvSWR9W15cIl0qKVwiYCwgXCJtXCIpLFxyXG4gIF07XHJcbiAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIGFjY2Vzc1BhdHRlcm5zKSB7XHJcbiAgICBjb25zdCBtYXRjaCA9IGh0bWwubWF0Y2gocGF0dGVybik7XHJcbiAgICBpZiAobWF0Y2g/LlsxXSkge1xyXG4gICAgICBjb25zdCBsYWJlbCA9IGRlY29kZVVuaWNvZGUobWF0Y2hbMV0pO1xyXG4gICAgICAvLyBsYWJlbOydgCDrs7TthrUgXCLsoJzrqqkgYnkg7LGE64SQIE4gdmlld3MgTiBhZ29cIiDtmJXtg5wg4oaSIOunqCDslZ4g67aA67aEIOyCrOyaqVxyXG4gICAgICAvLyDrmJDripQgXCLsoJzrqqkgLSDsnqzsg50g7Iuc6rCEOiBO67aEIE7stIhcIiDtmJXtg5xcclxuICAgICAgbGV0IHRpdGxlID0gbGFiZWw7XHJcbiAgICAgIGNvbnN0IGJ5SW5kZXggPSBsYWJlbC5sYXN0SW5kZXhPZihcIiBieSBcIik7XHJcbiAgICAgIGlmIChieUluZGV4ID4gMCkgdGl0bGUgPSBsYWJlbC5zdWJzdHJpbmcoMCwgYnlJbmRleCkudHJpbSgpO1xyXG5cclxuICAgICAgLy8g7J6s7IOdIOyLnOqwhCDrtoDrtoQg7KCc6rGwXHJcbiAgICAgIHRpdGxlID0gdGl0bGUucmVwbGFjZSgvXFxzKi1cXHMq7J6s7IOdIOyLnOqwhDouKiQvLCBcIlwiKS50cmltKCk7XHJcbiAgICAgIHRpdGxlID0gdGl0bGUucmVwbGFjZSgvXFxzKi1cXHMqcGxheSBsZW5ndGguKiQvaSwgXCJcIikudHJpbSgpO1xyXG5cclxuICAgICAgaWYgKGlzVmFsaWRUaXRsZSh0aXRsZSkpIHJldHVybiB0aXRsZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIDQpIG9nOnRpdGxlIOuplO2DgCDtg5zqt7ggKOqwnOuzhCDsmIHsg4Eg7Y6Y7J207KeA7J24IOqyveyasClcclxuICBjb25zdCBvZ1RpdGxlID0gaHRtbC5tYXRjaCgvPG1ldGFbXj5dK3Byb3BlcnR5PVtcIiddb2c6dGl0bGVbXCInXVtePl0rY29udGVudD1bXCInXShbXlwiJ10rKVtcIiddL2kpXHJcbiAgICA/PyBodG1sLm1hdGNoKC88bWV0YVtePl0rY29udGVudD1bXCInXShbXlwiJ10rKVtcIiddW14+XStwcm9wZXJ0eT1bXCInXW9nOnRpdGxlW1wiJ10vaSk7XHJcbiAgaWYgKG9nVGl0bGU/LlsxXSkge1xyXG4gICAgY29uc3QgdCA9IGRlY29kZVVuaWNvZGUob2dUaXRsZVsxXSkudHJpbSgpO1xyXG4gICAgaWYgKHQgJiYgIXQuaW5jbHVkZXMoXCJZb3VUdWJlXCIpICYmICF0LmluY2x1ZGVzKFwiQFwiKSAmJiBpc1ZhbGlkVGl0bGUodCkpIHJldHVybiB0O1xyXG4gIH1cclxuXHJcbiAgLy8gNSkgPHRpdGxlPiDtg5zqt7hcclxuICBjb25zdCB0aXRsZVRhZyA9IGh0bWwubWF0Y2goLzx0aXRsZVtePl0qPihbXjxdKyk8XFwvdGl0bGU+L2kpO1xyXG4gIGlmICh0aXRsZVRhZz8uWzFdKSB7XHJcbiAgICBjb25zdCB0ID0gdGl0bGVUYWdbMV0ucmVwbGFjZSgvXFxzKi1cXHMqWW91VHViZVxccyokL2ksIFwiXCIpLnRyaW0oKTtcclxuICAgIGlmIChpc1ZhbGlkVGl0bGUodCkgJiYgIXQuaW5jbHVkZXMoXCJAXCIpKSByZXR1cm4gdDtcclxuICB9XHJcblxyXG4gIHJldHVybiBcIlwiO1xyXG59XHJcblxyXG4vKipcclxuICogU2hvcnRzIOyghOyaqSDsoJzrqqkg7LaU7LacIC0g7LGE64SQIHNob3J0cyDtg60gSFRNTOyXkOyEnCByZWVsSXRlbVJlbmRlcmVyIOq4sOuwmOycvOuhnCDstpTstpxcclxuICog7J2867CYIGV4dHJhY3RUaXRsZeqzvCDri6zrpqwgU2hvcnRzIO2KueycoOydmCBKU09OIOq1rOyhsChoZWFkbGluZSwgb3ZlcmxheU1ldGFkYXRhIOuTsSnrpbwg7Jqw7ISgIO2DkOyDiVxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdFNob3J0c1RpdGxlKGh0bWw6IHN0cmluZywgc2hvcnRzSWQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgY29uc3QgY2FuZGlkYXRlczogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgLy8gc2hvcnRzSWTqsIAgSFRNTOyXkOyEnCDrk7HsnqXtlZjripQg66qo65OgIOychOy5mOulvCDtg5Dsg4lcclxuICAvLyBZb3VUdWJlIFNob3J0cyDssYTrhJAg7YOt7JeQ7ISc64qUIFwidmlkZW9JZFwiOlwiSURcIiDsmbjsl5Drj4QgXCIvc2hvcnRzL0lEXCIg7ZiV7YOc66GcIOuTseyepVxyXG4gIGNvbnN0IHNlYXJjaFBhdHRlcm5zID0gW1xyXG4gICAgYFwiJHtzaG9ydHNJZH1cImAsXHJcbiAgICBgXFxcXC9zaG9ydHNcXFxcLyR7c2hvcnRzSWR9YCxcclxuICBdO1xyXG5cclxuICBmb3IgKGNvbnN0IHNlYXJjaFN0ciBvZiBzZWFyY2hQYXR0ZXJucykge1xyXG4gICAgbGV0IHNlYXJjaElkeCA9IDA7XHJcbiAgICBjb25zdCBwbGFpblN0ciA9IHNlYXJjaFN0ci5yZXBsYWNlKC9cXFxcXFxcXC9nLCBcIi9cIik7XHJcblxyXG4gICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgY29uc3QgaWRJZHggPSBodG1sLmluZGV4T2YoXHJcbiAgICAgICAgcGxhaW5TdHIuaW5jbHVkZXMoXCIvc2hvcnRzL1wiKSA/IGAvc2hvcnRzLyR7c2hvcnRzSWR9YCA6IGBcIiR7c2hvcnRzSWR9XCJgLFxyXG4gICAgICAgIHNlYXJjaElkeFxyXG4gICAgICApO1xyXG4gICAgICBpZiAoaWRJZHggPT09IC0xKSBicmVhaztcclxuICAgICAgc2VhcmNoSWR4ID0gaWRJZHggKyAxO1xyXG5cclxuICAgICAgLy8gSUQg7KO867OAIOyVnuuSpCAyNTAw7J6QIOuylOychOyXkOyEnCDtg5Dsg4lcclxuICAgICAgY29uc3Qgc3RhcnQgPSBNYXRoLm1heCgwLCBpZElkeCAtIDE1MDApO1xyXG4gICAgICBjb25zdCBlbmQgPSBNYXRoLm1pbihodG1sLmxlbmd0aCwgaWRJZHggKyAyNTAwKTtcclxuICAgICAgY29uc3QgY2h1bmsgPSBodG1sLnN1YnN0cmluZyhzdGFydCwgZW5kKTtcclxuXHJcbiAgICAgIC8vIGhlYWRsaW5lLnNpbXBsZVRleHQg7Yyo7YS0IChyZWVsSXRlbVJlbmRlcmVy7JeQ7IScIOqwgOyepSDtnZTtlagpXHJcbiAgICAgIGNvbnN0IGhlYWRsaW5lU2ltcGxlID0gY2h1bmsubWF0Y2goL1wiaGVhZGxpbmVcIlxccyo6XFxzKlxce1xccypcInNpbXBsZVRleHRcIlxccyo6XFxzKlwiKFteXCJdKylcIi8pO1xyXG4gICAgICBpZiAoaGVhZGxpbmVTaW1wbGU/LlsxXSkge1xyXG4gICAgICAgIGNvbnN0IHQgPSBkZWNvZGVVbmljb2RlKGhlYWRsaW5lU2ltcGxlWzFdKTtcclxuICAgICAgICBpZiAoaXNWYWxpZFRpdGxlKHQpKSBjYW5kaWRhdGVzLnB1c2godCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGhlYWRsaW5lLnJ1bnMg7Yyo7YS0XHJcbiAgICAgIGNvbnN0IGhlYWRsaW5lUnVucyA9IGNodW5rLm1hdGNoKC9cImhlYWRsaW5lXCJcXHMqOlxccypcXHtcXHMqXCJydW5zXCJcXHMqOlxccypcXFtcXHMqXFx7XFxzKlwidGV4dFwiXFxzKjpcXHMqXCIoW15cIl0rKVwiLyk7XHJcbiAgICAgIGlmIChoZWFkbGluZVJ1bnM/LlsxXSkge1xyXG4gICAgICAgIGNvbnN0IHQgPSBkZWNvZGVVbmljb2RlKGhlYWRsaW5lUnVuc1sxXSk7XHJcbiAgICAgICAgaWYgKGlzVmFsaWRUaXRsZSh0KSkgY2FuZGlkYXRlcy5wdXNoKHQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBvdmVybGF5TWV0YWRhdGEucHJpbWFyeVRleHQuY29udGVudCDtjKjthLRcclxuICAgICAgY29uc3Qgb3ZlcmxheVByaW1hcnkgPSBjaHVuay5tYXRjaCgvXCJwcmltYXJ5VGV4dFwiXFxzKjpcXHMqXFx7XFxzKlwiY29udGVudFwiXFxzKjpcXHMqXCIoW15cIl0rKVwiLyk7XHJcbiAgICAgIGlmIChvdmVybGF5UHJpbWFyeT8uWzFdKSB7XHJcbiAgICAgICAgY29uc3QgdCA9IGRlY29kZVVuaWNvZGUob3ZlcmxheVByaW1hcnlbMV0pO1xyXG4gICAgICAgIGlmIChpc1ZhbGlkVGl0bGUodCkpIGNhbmRpZGF0ZXMucHVzaCh0KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gdGl0bGUucnVucyDtjKjthLRcclxuICAgICAgY29uc3QgdGl0bGVSdW5zID0gY2h1bmsubWF0Y2goL1widGl0bGVcIlxccyo6XFxzKlxce1xccypcInJ1bnNcIlxccyo6XFxzKlxcW1xccypcXHtcXHMqXCJ0ZXh0XCJcXHMqOlxccypcIihbXlwiXSspXCIvKTtcclxuICAgICAgaWYgKHRpdGxlUnVucz8uWzFdKSB7XHJcbiAgICAgICAgY29uc3QgdCA9IGRlY29kZVVuaWNvZGUodGl0bGVSdW5zWzFdKTtcclxuICAgICAgICBpZiAoaXNWYWxpZFRpdGxlKHQpKSBjYW5kaWRhdGVzLnB1c2godCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHRpdGxlLnNpbXBsZVRleHQg7Yyo7YS0XHJcbiAgICAgIGNvbnN0IHRpdGxlU2ltcGxlID0gY2h1bmsubWF0Y2goL1widGl0bGVcIlxccyo6XFxzKlxce1xccypcInNpbXBsZVRleHRcIlxccyo6XFxzKlwiKFteXCJdKylcIi8pO1xyXG4gICAgICBpZiAodGl0bGVTaW1wbGU/LlsxXSkge1xyXG4gICAgICAgIGNvbnN0IHQgPSBkZWNvZGVVbmljb2RlKHRpdGxlU2ltcGxlWzFdKTtcclxuICAgICAgICBpZiAoaXNWYWxpZFRpdGxlKHQpKSBjYW5kaWRhdGVzLnB1c2godCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChjYW5kaWRhdGVzLmxlbmd0aCA+IDApIHJldHVybiBjYW5kaWRhdGVzWzBdO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKGNhbmRpZGF0ZXMubGVuZ3RoID4gMCkgcmV0dXJuIGNhbmRpZGF0ZXNbMF07XHJcblxyXG4gIC8vIGFjY2Vzc2liaWxpdHlEYXRhLmxhYmVs7JeQ7IScIOy2lOy2nFxyXG4gIGNvbnN0IGFjY2Vzc1BhdHRlcm5zID0gW1xyXG4gICAgbmV3IFJlZ0V4cChgXCIke3Nob3J0c0lkfVwiW1xcXFxzXFxcXFNdezAsMzAwMH0/XCJhY2Nlc3NpYmlsaXR5RGF0YVwiXFxcXHMqOlxcXFxzKlxcXFx7XFxcXHMqXCJsYWJlbFwiXFxcXHMqOlxcXFxzKlwiKFteXCJdKylcImAsIFwibVwiKSxcclxuICAgIG5ldyBSZWdFeHAoYFwiYWNjZXNzaWJpbGl0eURhdGFcIlxcXFxzKjpcXFxccypcXFxce1xcXFxzKlwibGFiZWxcIlxcXFxzKjpcXFxccypcIihbXlwiXSoke3Nob3J0c0lkfVteXCJdKilcImAsIFwibVwiKSxcclxuICBdO1xyXG4gIGZvciAoY29uc3QgcGF0dGVybiBvZiBhY2Nlc3NQYXR0ZXJucykge1xyXG4gICAgY29uc3QgbWF0Y2ggPSBodG1sLm1hdGNoKHBhdHRlcm4pO1xyXG4gICAgaWYgKG1hdGNoPy5bMV0pIHtcclxuICAgICAgY29uc3QgbGFiZWwgPSBkZWNvZGVVbmljb2RlKG1hdGNoWzFdKTtcclxuICAgICAgbGV0IHRpdGxlID0gbGFiZWw7XHJcbiAgICAgIC8vIFwiIC0gXCIg7J207ZuEIOygnOqxsCAo7KGw7ZqM7IiYIOuTsSlcclxuICAgICAgY29uc3QgZGFzaElkeCA9IHRpdGxlLmluZGV4T2YoXCIgLSBcIik7XHJcbiAgICAgIGlmIChkYXNoSWR4ID4gMCkgdGl0bGUgPSB0aXRsZS5zdWJzdHJpbmcoMCwgZGFzaElkeCkudHJpbSgpO1xyXG4gICAgICAvLyDrp4jsp4Drp4kgXCIsIE4gdmlld3NcIiDtjKjthLQg7KCc6rGwXHJcbiAgICAgIHRpdGxlID0gdGl0bGUucmVwbGFjZSgvLFxccypcXGRbXFxkLC5dKlxccyoodmlld3M/fOyhsO2ajHztmowpLiokL2ksIFwiXCIpLnRyaW0oKTtcclxuICAgICAgaWYgKGlzVmFsaWRUaXRsZSh0aXRsZSkpIHJldHVybiB0aXRsZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOydvOuwmCBleHRyYWN0VGl0bGXroZwg7Y+067CxXHJcbiAgcmV0dXJuIGV4dHJhY3RUaXRsZShodG1sLCBzaG9ydHNJZCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDqsJzrs4QgU2hvcnRzIO2OmOydtOyngOyXkOyEnCDsoJzrqqkg7KeB7KCRIOqwgOyguOyYpOq4sCAo7LGE64SQIO2OmOydtOyngOyXkOyEnCDsi6TtjKgg7IucIO2PtOuwsSlcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoU2hvcnRzVGl0bGVEaXJlY3Qoc2hvcnRzSWQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGBodHRwczovL3d3dy55b3V0dWJlLmNvbS9zaG9ydHMvJHtzaG9ydHNJZH1gLCB7XHJcbiAgICAgIGhlYWRlcnM6IENPTU1PTl9IRUFERVJTLFxyXG4gICAgICBjYWNoZTogXCJuby1zdG9yZVwiLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVzLnRleHQoKTtcclxuXHJcbiAgICAvLyAxKSBvZzp0aXRsZSAo6rCA7J6lIOyLoOuisOuPhCDrhpLsnYwpXHJcbiAgICBjb25zdCBvZ1RpdGxlID0gaHRtbC5tYXRjaCgvPG1ldGFbXj5dK3Byb3BlcnR5PVtcIiddb2c6dGl0bGVbXCInXVtePl0rY29udGVudD1bXCInXShbXlwiJ10rKVtcIiddL2kpXHJcbiAgICAgID8/IGh0bWwubWF0Y2goLzxtZXRhW14+XStjb250ZW50PVtcIiddKFteXCInXSspW1wiJ11bXj5dK3Byb3BlcnR5PVtcIiddb2c6dGl0bGVbXCInXS9pKTtcclxuICAgIGlmIChvZ1RpdGxlPy5bMV0pIHtcclxuICAgICAgY29uc3QgdCA9IGRlY29kZVVuaWNvZGUob2dUaXRsZVsxXSkudHJpbSgpO1xyXG4gICAgICBpZiAoaXNWYWxpZFRpdGxlKHQpICYmICF0LmluY2x1ZGVzKFwiWW91VHViZVwiKSAmJiAhdC5pbmNsdWRlcyhcIkBcIikpIHJldHVybiB0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIDIpIDx0aXRsZT4g7YOc6re4XHJcbiAgICBjb25zdCB0aXRsZVRhZyA9IGh0bWwubWF0Y2goLzx0aXRsZVtePl0qPihbXjxdKyk8XFwvdGl0bGU+L2kpO1xyXG4gICAgaWYgKHRpdGxlVGFnPy5bMV0pIHtcclxuICAgICAgY29uc3QgdCA9IHRpdGxlVGFnWzFdLnJlcGxhY2UoL1xccyotXFxzKllvdVR1YmVcXHMqJC9pLCBcIlwiKS50cmltKCk7XHJcbiAgICAgIGlmIChpc1ZhbGlkVGl0bGUodCkgJiYgIXQuaW5jbHVkZXMoXCJAXCIpKSByZXR1cm4gdDtcclxuICAgIH1cclxuXHJcbiAgICAvLyAzKSBKU09OIOuCtCB0aXRsZS5ydW5zXHJcbiAgICBjb25zdCBqc29uVGl0bGUgPSBodG1sLm1hdGNoKC9cInRpdGxlXCJcXHMqOlxccypcXHtcXHMqXCJydW5zXCJcXHMqOlxccypcXFtcXHMqXFx7XFxzKlwidGV4dFwiXFxzKjpcXHMqXCIoW15cIl0rKVwiLyk7XHJcbiAgICBpZiAoanNvblRpdGxlPy5bMV0pIHtcclxuICAgICAgY29uc3QgdCA9IGRlY29kZVVuaWNvZGUoanNvblRpdGxlWzFdKTtcclxuICAgICAgaWYgKGlzVmFsaWRUaXRsZSh0KSkgcmV0dXJuIHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gNCkgSlNPTiDrgrQgdGl0bGUuc2ltcGxlVGV4dFxyXG4gICAgY29uc3QganNvblNpbXBsZSA9IGh0bWwubWF0Y2goL1widGl0bGVcIlxccyo6XFxzKlxce1xccypcInNpbXBsZVRleHRcIlxccyo6XFxzKlwiKFteXCJdKylcIi8pO1xyXG4gICAgaWYgKGpzb25TaW1wbGU/LlsxXSkge1xyXG4gICAgICBjb25zdCB0ID0gZGVjb2RlVW5pY29kZShqc29uU2ltcGxlWzFdKTtcclxuICAgICAgaWYgKGlzVmFsaWRUaXRsZSh0KSkgcmV0dXJuIHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gNSkgaGVhZGxpbmUgKFNob3J0cyDqsJzrs4Qg7Y6Y7J207KeA7JeQ7ISc64+EIOuTseyepSDqsIDriqUpXHJcbiAgICBjb25zdCBoZWFkbGluZSA9IGh0bWwubWF0Y2goL1wiaGVhZGxpbmVcIlxccyo6XFxzKlxce1xccypcInNpbXBsZVRleHRcIlxccyo6XFxzKlwiKFteXCJdKylcIi8pO1xyXG4gICAgaWYgKGhlYWRsaW5lPy5bMV0pIHtcclxuICAgICAgY29uc3QgdCA9IGRlY29kZVVuaWNvZGUoaGVhZGxpbmVbMV0pO1xyXG4gICAgICBpZiAoaXNWYWxpZFRpdGxlKHQpKSByZXR1cm4gdDtcclxuICAgIH1cclxuXHJcbiAgICAvLyA2KSBlbmdhZ2VtZW50UGFuZWxzIOuCtCDsoJzrqqkgKFNob3J0cyDtjpjsnbTsp4Ag7Yq57JygKVxyXG4gICAgY29uc3QgZW5nYWdlbWVudFRpdGxlID0gaHRtbC5tYXRjaCgvXCJoZWFkZXJUaXRsZVwiXFxzKjpcXHMqXCIoW15cIl0rKVwiLyk7XHJcbiAgICBpZiAoZW5nYWdlbWVudFRpdGxlPy5bMV0pIHtcclxuICAgICAgY29uc3QgdCA9IGRlY29kZVVuaWNvZGUoZW5nYWdlbWVudFRpdGxlWzFdKTtcclxuICAgICAgaWYgKGlzVmFsaWRUaXRsZSh0KSkgcmV0dXJuIHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFwiXCI7XHJcbiAgfSBjYXRjaCB7XHJcbiAgICByZXR1cm4gXCJcIjtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoTGF0ZXN0VmlkZW8oKTogUHJvbWlzZTxZb3VUdWJlVmlkZW8gfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke0NIQU5ORUxfVVJMfS92aWRlb3NgLCB7XHJcbiAgICAgIGhlYWRlcnM6IENPTU1PTl9IRUFERVJTLFxyXG4gICAgICBjYWNoZTogXCJuby1zdG9yZVwiLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVzLnRleHQoKTtcclxuICAgIGNvbnN0IHZpZGVvSWQgPSBleHRyYWN0TGF0ZXN0VmlkZW9JZChodG1sKTtcclxuICAgIGlmICghdmlkZW9JZCkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgY29uc3QgdGl0bGUgPSBleHRyYWN0VGl0bGUoaHRtbCwgdmlkZW9JZCk7XHJcbiAgICBjb25zdCB0aHVtYm5haWwgPSBgaHR0cHM6Ly9pLnl0aW1nLmNvbS92aS8ke3ZpZGVvSWR9L21heHJlc2RlZmF1bHQuanBnYDtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpZDogdmlkZW9JZCxcclxuICAgICAgdGl0bGU6IHRpdGxlIHx8IFwiSEFERVMg7JiB7IOBXCIsXHJcbiAgICAgIHRodW1ibmFpbCxcclxuICAgICAgdXJsOiBgaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj0ke3ZpZGVvSWR9YCxcclxuICAgICAgdHlwZTogXCJ2aWRlb1wiLFxyXG4gICAgICBwdWJsaXNoZWRBdDogbnVsbCxcclxuICAgIH07XHJcbiAgfSBjYXRjaCB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoTGF0ZXN0U2hvcnQoKTogUHJvbWlzZTxZb3VUdWJlVmlkZW8gfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke0NIQU5ORUxfVVJMfS9zaG9ydHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IENPTU1PTl9IRUFERVJTLFxyXG4gICAgICBjYWNoZTogXCJuby1zdG9yZVwiLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVzLnRleHQoKTtcclxuICAgIGNvbnN0IHNob3J0c0lkID0gZXh0cmFjdFNob3J0c0lkKGh0bWwpO1xyXG4gICAgaWYgKCFzaG9ydHNJZCkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgLy8gMeywqDog7LGE64SQIHNob3J0cyDtg60gSFRNTOyXkOyEnCBTaG9ydHMg7KCE7JqpIOy2lOy2nFxyXG4gICAgbGV0IHRpdGxlID0gZXh0cmFjdFNob3J0c1RpdGxlKGh0bWwsIHNob3J0c0lkKTtcclxuXHJcbiAgICAvLyAy7LCoOiDsi6TtjKgg7IucIOqwnOuzhCBTaG9ydHMg7Y6Y7J207KeA7JeQ7IScIOyngeygkSDqsIDsoLjsmKTquLBcclxuICAgIGlmICghdGl0bGUpIHtcclxuICAgICAgdGl0bGUgPSBhd2FpdCBmZXRjaFNob3J0c1RpdGxlRGlyZWN0KHNob3J0c0lkKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0aHVtYm5haWwgPSBgaHR0cHM6Ly9pLnl0aW1nLmNvbS92aS8ke3Nob3J0c0lkfS9tYXhyZXNkZWZhdWx0LmpwZ2A7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaWQ6IHNob3J0c0lkLFxyXG4gICAgICB0aXRsZTogdGl0bGUgfHwgXCJIQURFUyBTaG9ydHNcIixcclxuICAgICAgdGh1bWJuYWlsLFxyXG4gICAgICB1cmw6IGBodHRwczovL3d3dy55b3V0dWJlLmNvbS9zaG9ydHMvJHtzaG9ydHNJZH1gLFxyXG4gICAgICB0eXBlOiBcInNob3J0c1wiLFxyXG4gICAgICBwdWJsaXNoZWRBdDogbnVsbCxcclxuICAgIH07XHJcbiAgfSBjYXRjaCB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XHJcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICBpZiAoY2FjaGVkICYmIGNhY2hlZC5leHBpcmVzQXQgPiBub3cpIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihjYWNoZWQuZGF0YSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgW3ZpZGVvLCBzaG9ydF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgIGZldGNoTGF0ZXN0VmlkZW8oKSxcclxuICAgICAgZmV0Y2hMYXRlc3RTaG9ydCgpLFxyXG4gICAgXSk7XHJcblxyXG4gICAgY29uc3QgcmVzdWx0cyA9IFt2aWRlbywgc2hvcnRdLmZpbHRlcihCb29sZWFuKSBhcyBZb3VUdWJlVmlkZW9bXTtcclxuXHJcbiAgICBjYWNoZWQgPSB7XHJcbiAgICAgIGRhdGE6IHJlc3VsdHMsXHJcbiAgICAgIGV4cGlyZXNBdDogbm93ICsgMzAgKiA2MCAqIDEwMDAsXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihyZXN1bHRzKTtcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihbXSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJDSEFOTkVMX1VSTCIsIkNPTU1PTl9IRUFERVJTIiwiY2FjaGVkIiwiZXh0cmFjdFZpZGVvSWQiLCJ0ZXh0IiwibWF0Y2giLCJleHRyYWN0TGF0ZXN0VmlkZW9JZCIsInJlbmRlcmVySWRzIiwicmVuZGVyZXJQYXR0ZXJucyIsInBhdHRlcm4iLCJtYXRjaEFsbCIsImlkIiwicHVzaCIsImxlbmd0aCIsIkFycmF5IiwiZnJvbSIsIlNldCIsImV4dHJhY3RTaG9ydHNJZCIsImRlY29kZVVuaWNvZGUiLCJzdHIiLCJyZXBsYWNlIiwiXyIsImhleCIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsInBhcnNlSW50IiwiaXNWYWxpZFRpdGxlIiwidGl0bGUiLCJ0cmltIiwidCIsInRlc3QiLCJ1aVRleHRzIiwiaW5jbHVkZXMiLCJleHRyYWN0VGl0bGUiLCJodG1sIiwidmlkZW9JZCIsImNhbmRpZGF0ZXMiLCJpZHgiLCJpbmRleE9mIiwiY2h1bmsiLCJzdWJzdHJpbmciLCJNYXRoIiwibWluIiwicnVuc01hdGNoIiwic2ltcGxlTWF0Y2giLCJiZWZvcmVDaHVuayIsIm1heCIsImJlZm9yZVJ1bnMiLCJiZWZvcmVTaW1wbGUiLCJSZWdFeHAiLCJhY2Nlc3NQYXR0ZXJucyIsImxhYmVsIiwiYnlJbmRleCIsImxhc3RJbmRleE9mIiwib2dUaXRsZSIsInRpdGxlVGFnIiwiZXh0cmFjdFNob3J0c1RpdGxlIiwic2hvcnRzSWQiLCJzZWFyY2hQYXR0ZXJucyIsInNlYXJjaFN0ciIsInNlYXJjaElkeCIsInBsYWluU3RyIiwiaWRJZHgiLCJzdGFydCIsImVuZCIsImhlYWRsaW5lU2ltcGxlIiwiaGVhZGxpbmVSdW5zIiwib3ZlcmxheVByaW1hcnkiLCJ0aXRsZVJ1bnMiLCJ0aXRsZVNpbXBsZSIsImRhc2hJZHgiLCJmZXRjaFNob3J0c1RpdGxlRGlyZWN0IiwicmVzIiwiZmV0Y2giLCJoZWFkZXJzIiwiY2FjaGUiLCJqc29uVGl0bGUiLCJqc29uU2ltcGxlIiwiaGVhZGxpbmUiLCJlbmdhZ2VtZW50VGl0bGUiLCJmZXRjaExhdGVzdFZpZGVvIiwidGh1bWJuYWlsIiwidXJsIiwidHlwZSIsInB1Ymxpc2hlZEF0IiwiZmV0Y2hMYXRlc3RTaG9ydCIsIkdFVCIsIm5vdyIsIkRhdGUiLCJleHBpcmVzQXQiLCJqc29uIiwiZGF0YSIsInZpZGVvIiwic2hvcnQiLCJQcm9taXNlIiwiYWxsIiwicmVzdWx0cyIsImZpbHRlciIsIkJvb2xlYW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/youtube/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fyoutube%2Froute&page=%2Fapi%2Fyoutube%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fyoutube%2Froute.ts&appDir=C%3A%5CUsers%5Cpyosh%5COneDrive%5C%EB%B0%94%ED%83%95%20%ED%99%94%EB%A9%B4%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpyosh%5COneDrive%5C%EB%B0%94%ED%83%95%20%ED%99%94%EB%A9%B4%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();