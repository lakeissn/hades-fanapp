"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/votes/route";
exports.ids = ["app/api/votes/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvotes%2Froute&page=%2Fapi%2Fvotes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvotes%2Froute.ts&appDir=C%3A%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvotes%2Froute&page=%2Fapi%2Fvotes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvotes%2Froute.ts&appDir=C%3A%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_hades_fanapp_app_api_votes_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/votes/route.ts */ \"(rsc)/./app/api/votes/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/votes/route\",\n        pathname: \"/api/votes\",\n        filename: \"route\",\n        bundlePath: \"app/api/votes/route\"\n    },\n    resolvedPagePath: \"C:\\\\hades-fanapp\\\\app\\\\api\\\\votes\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_hades_fanapp_app_api_votes_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/votes/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ2b3RlcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdm90ZXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ2b3RlcyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDaGFkZXMtZmFuYXBwJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDaGFkZXMtZmFuYXBwJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNMO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFkZXMtZmFuYXBwLz9kNGJiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXGhhZGVzLWZhbmFwcFxcXFxhcHBcXFxcYXBpXFxcXHZvdGVzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS92b3Rlcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3ZvdGVzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS92b3Rlcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXGhhZGVzLWZhbmFwcFxcXFxhcHBcXFxcYXBpXFxcXHZvdGVzXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS92b3Rlcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvotes%2Froute&page=%2Fapi%2Fvotes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvotes%2Froute.ts&appDir=C%3A%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/votes/route.ts":
/*!********************************!*\
  !*** ./app/api/votes/route.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   revalidate: () => (/* binding */ revalidate)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_parseKstDate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/parseKstDate */ \"(rsc)/./lib/parseKstDate.ts\");\n/* harmony import */ var _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/supabase-admin */ \"(rsc)/./lib/supabase-admin.ts\");\n\n\n\nconst dynamic = \"force-dynamic\";\nconst revalidate = 0;\nconst FALLBACK_CSV_URL = \"https://docs.google.com/spreadsheets/d/e/2PACX-1vRPX-EvmCuv7Dk_ozK2PhR0VmxW94s3-bZkY5Kou8FMXBR7f4indzBJ5GayAwv_VurZa0Dsp7SsrnBL/pub?gid=0&single=true&output=csv\";\nconst PLATFORM_LABELS = {\n    idolchamp: \"아이돌챔프\",\n    mubeat: \"뮤빗\",\n    upick: \"유픽\",\n    fancast: \"팬캐스트\",\n    fanplus: \"팬플러스\",\n    podoal: \"포도알\",\n    whosfan: \"후즈팬\",\n    duckad: \"덕애드\",\n    \"10asia\": \"텐아시아\",\n    muniverse: \"뮤니버스\",\n    my1pick: \"마이원픽\",\n    mnetplus: \"엠넷플러스\",\n    fannstar: \"팬앤스타\",\n    higher: \"하이어\",\n    ktopstar: \"K탑스타\"\n};\nconst REQUEST_TIMEOUT_MS = 4500;\n// 동시 요청 1회로 합치기\nlet inFlightRequest = null;\n// CSV polling 간격(기존 30초 유지)\nconst MIN_REFRESH_MS = 30000;\n// 현재 API가 노출하는 안정 스냅샷\nlet lastGoodVotes = null;\nlet lastFetchedAt = 0;\nfunction withCacheBusting(url) {\n    const bucket = Math.floor(Date.now() / MIN_REFRESH_MS);\n    try {\n        const parsed = new URL(url);\n        parsed.searchParams.set(\"_cb\", String(bucket));\n        return parsed.toString();\n    } catch  {\n        const separator = url.includes(\"?\") ? \"&\" : \"?\";\n        return `${url}${separator}_cb=${bucket}`;\n    }\n}\nfunction normalizeBoolean(value) {\n    const normalized = value.trim().toLowerCase();\n    return normalized === \"true\" || normalized === \"1\" || normalized === \"yes\";\n}\nfunction normalizePlatform(platform) {\n    return platform.trim().toLowerCase();\n}\nfunction normalizeVoteUrl(url) {\n    return url.trim();\n}\nfunction voteIdentityKey(platform, url) {\n    return `${normalizePlatform(platform)}|${normalizeVoteUrl(url)}`.toLowerCase();\n}\nfunction parsePlatforms(platformsRaw) {\n    const normalized = platformsRaw.replace(/[|,/]/g, \" \").replace(/\\s+/g, \" \").trim();\n    const unique = new Set();\n    normalized.split(\" \").map((value)=>normalizePlatform(value)).filter(Boolean).forEach((platform)=>unique.add(platform));\n    if (unique.size === 0) {\n        return [\n            \"etc\"\n        ];\n    }\n    return Array.from(unique);\n}\nfunction labelForPlatform(platform) {\n    const key = normalizePlatform(platform);\n    return PLATFORM_LABELS[key] ?? \"기타\";\n}\nfunction isInProgressKeyword(value) {\n    const normalized = value.replace(/\\s+/g, \"\").toLowerCase();\n    return normalized === \"진행중\";\n}\nfunction parseDateKst(rawValue) {\n    if (!rawValue) return null;\n    const value = rawValue.trim();\n    if (!value || isInProgressKeyword(value)) return null;\n    return (0,_lib_parseKstDate__WEBPACK_IMPORTED_MODULE_1__.parseKstDate)(value);\n}\nfunction isExpired(closesAt) {\n    const date = parseDateKst(closesAt);\n    if (!date) return false;\n    return date.getTime() <= Date.now();\n}\nfunction hashToVoteId(raw) {\n    let hash = 0;\n    for(let i = 0; i < raw.length; i += 1){\n        hash = hash * 31 + raw.charCodeAt(i) >>> 0;\n    }\n    return `vote-${hash.toString(36)}`;\n}\nfunction createStableId(row) {\n    return hashToVoteId(voteIdentityKey(row.platform ?? \"\", row.url ?? \"\"));\n}\nfunction createLegacyStableId(row) {\n    const legacyRaw = [\n        normalizePlatform(row.platform ?? \"\"),\n        row.title?.trim() ?? \"\",\n        row.url?.trim() ?? \"\",\n        row.opensAt?.trim() ?? \"\",\n        row.closesAt?.trim() ?? \"\"\n    ].join(\"|\");\n    return hashToVoteId(legacyRaw);\n}\nfunction parseCsvLine(line) {\n    const values = [];\n    let current = \"\";\n    let inQuotes = false;\n    for(let i = 0; i < line.length; i += 1){\n        const char = line[i];\n        const nextChar = line[i + 1];\n        if (char === '\"') {\n            if (inQuotes && nextChar === '\"') {\n                current += '\"';\n                i += 1;\n            } else {\n                inQuotes = !inQuotes;\n            }\n            continue;\n        }\n        if (char === \",\" && !inQuotes) {\n            values.push(current.trim());\n            current = \"\";\n            continue;\n        }\n        current += char;\n    }\n    values.push(current.trim());\n    return values;\n}\nfunction parseCsv(content) {\n    const lines = content.split(/\\r?\\n/).map((line)=>line.trim()).filter((line)=>line.length > 0);\n    if (lines.length <= 1) {\n        return [];\n    }\n    const [headerLine, ...rows] = lines;\n    const headers = parseCsvLine(headerLine);\n    return rows.map((line)=>{\n        const values = parseCsvLine(line);\n        const record = {};\n        headers.forEach((header, index)=>{\n            record[header] = values[index] ?? \"\";\n        });\n        return record;\n    });\n}\nfunction uniqueVotes(votes) {\n    const seen = new Set();\n    return votes.filter((vote)=>{\n        const key = `${vote.platform}|${vote.title}|${vote.url}|${vote.closesAt ?? \"\"}`.toLowerCase();\n        if (seen.has(key)) return false;\n        seen.add(key);\n        return true;\n    });\n}\nasync function fetchVotesCsv(csvUrl) {\n    const controller = new AbortController();\n    const timeout = setTimeout(()=>controller.abort(), REQUEST_TIMEOUT_MS);\n    const cacheBustedUrl = withCacheBusting(csvUrl);\n    try {\n        const response = await fetch(cacheBustedUrl, {\n            cache: \"no-store\",\n            next: {\n                revalidate: 0\n            },\n            headers: {\n                Accept: \"text/csv,*/*;q=0.9\",\n                \"Cache-Control\": \"no-cache\",\n                Pragma: \"no-cache\"\n            },\n            signal: controller.signal\n        });\n        if (!response.ok) {\n            throw new Error(`Failed to fetch votes csv: ${response.status}`);\n        }\n        return response.text();\n    } finally{\n        clearTimeout(timeout);\n    }\n}\nasync function fetchLatestVotes() {\n    const csvUrl = process.env.VOTES_SHEET_CSV_URL ?? FALLBACK_CSV_URL;\n    const csv = await fetchVotesCsv(csvUrl);\n    const parsedRows = parseCsv(csv);\n    const fetchedVotes = parsedRows.filter((row)=>normalizeBoolean(row.enabled ?? \"\")).filter((row)=>!isExpired(row.closesAt ?? \"\")).map((row)=>{\n        const platforms = parsePlatforms(row.platform ?? \"\");\n        const rawOpensAt = row.opensAt?.trim() ?? \"\";\n        const openDate = parseDateKst(rawOpensAt);\n        const closeDate = parseDateKst(row.closesAt ?? \"\");\n        return {\n            id: createStableId(row),\n            legacyId: createLegacyStableId(row),\n            title: row.title?.trim() ?? \"\",\n            platform: platforms[0],\n            platformLabel: labelForPlatform(platforms[0]),\n            platforms,\n            platformLabels: platforms.map(labelForPlatform),\n            url: row.url?.trim() ?? \"\",\n            opensAt: isInProgressKeyword(rawOpensAt) ? \"진행중\" : openDate ? openDate.toISOString() : undefined,\n            closesAt: closeDate ? closeDate.toISOString() : undefined,\n            note: row.note?.trim() || undefined\n        };\n    }).filter((vote)=>vote.title && vote.url);\n    return uniqueVotes(fetchedVotes);\n}\n// 30초 polling + inFlight 공유 + 실패 폴백 + 전체 즉시 반영(삭제 포함)\nasync function loadVotesFromSheet() {\n    const now = Date.now();\n    if (lastGoodVotes && now - lastFetchedAt < MIN_REFRESH_MS) {\n        return lastGoodVotes;\n    }\n    if (inFlightRequest) {\n        return inFlightRequest;\n    }\n    inFlightRequest = (async ()=>{\n        const fetchedVotes = await fetchLatestVotes();\n        lastGoodVotes = fetchedVotes;\n        lastFetchedAt = Date.now();\n        return fetchedVotes;\n    })();\n    try {\n        return await inFlightRequest;\n    } catch  {\n        if (lastGoodVotes) return lastGoodVotes;\n        return [];\n    } finally{\n        inFlightRequest = null;\n    }\n}\nasync function loadVotesFromSupabase() {\n    try {\n        const { data, error } = await _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_2__.supabaseAdmin.from(\"votes\").select(\"*\").eq(\"enabled\", true).order(\"created_at\", {\n            ascending: false\n        });\n        if (error || !data) return null;\n        // 활성 투표 0건은 정상 상태 — null(=Sheet 폴백) 대신 빈 배열 반환\n        if (data.length === 0) return [];\n        const now = Date.now();\n        const items = data.filter((row)=>{\n            if (!row.closes_at) return true;\n            const d = (0,_lib_parseKstDate__WEBPACK_IMPORTED_MODULE_1__.parseKstDate)(row.closes_at);\n            if (!d) return true;\n            return d.getTime() > now;\n        }).map((row)=>{\n            const platforms = parsePlatforms(row.platform ?? \"\");\n            const openDate = parseDateKst(row.opens_at ?? \"\");\n            const closeDate = parseDateKst(row.closes_at ?? \"\");\n            const rawOpensAt = row.opens_at?.trim() ?? \"\";\n            // Supabase UUID를 기본 ID로 사용 — 고유하고 수정해도 불변\n            // legacyId에 기존 해시를 넣어 이전 cron 상태와 호환\n            const legacyHash = hashToVoteId(`${row.platform ?? \"\"}|${row.url ?? \"\"}`);\n            return {\n                id: String(row.id),\n                legacyId: legacyHash,\n                title: row.title?.trim() ?? \"\",\n                platform: platforms[0],\n                platformLabel: labelForPlatform(platforms[0]),\n                platforms,\n                platformLabels: platforms.map(labelForPlatform),\n                url: row.url?.trim() ?? \"\",\n                opensAt: isInProgressKeyword(rawOpensAt) ? \"진행중\" : openDate ? openDate.toISOString() : undefined,\n                closesAt: closeDate ? closeDate.toISOString() : undefined,\n                note: row.note?.trim() || undefined\n            };\n        }).filter((v)=>v.title);\n        return uniqueVotes(items);\n    } catch  {\n        return null;\n    }\n}\nasync function GET() {\n    const NO_CACHE = {\n        \"Cache-Control\": \"no-store, no-cache, must-revalidate, max-age=0\",\n        Pragma: \"no-cache\",\n        Expires: \"0\"\n    };\n    try {\n        const votes = await loadVotesFromSupabase();\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(votes ?? [], {\n            headers: NO_CACHE\n        });\n    } catch  {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json([], {\n            status: 200,\n            headers: NO_CACHE\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3hFLE9BQU87Z0JBQ0xpSCxJQUFJdkcsT0FBTzJDLElBQUk0RCxFQUFFO2dCQUNqQkMsVUFBVWtCO2dCQUNWNUUsT0FBT0gsSUFBSUcsS0FBSyxFQUFFdkMsVUFBVTtnQkFDNUJHLFVBQVV5RixTQUFTLENBQUMsRUFBRTtnQkFDdEJNLGVBQWU5RSxpQkFBaUJ3RSxTQUFTLENBQUMsRUFBRTtnQkFDNUNBO2dCQUNBTyxnQkFBZ0JQLFVBQVVoRixHQUFHLENBQUNRO2dCQUM5QnJDLEtBQUtxRCxJQUFJckQsR0FBRyxFQUFFaUIsVUFBVTtnQkFDeEJ3QyxTQUFTbEIsb0JBQW9CdUUsY0FDekIsUUFDQUMsV0FDQUEsU0FBU00sV0FBVyxLQUNwQkM7Z0JBQ0ozRSxVQUFVcUUsWUFBWUEsVUFBVUssV0FBVyxLQUFLQztnQkFDaERDLE1BQU1sRSxJQUFJa0UsSUFBSSxFQUFFdEcsVUFBVXFHO1lBQzVCO1FBQ0YsR0FDQ3hGLE1BQU0sQ0FBQyxDQUFDdUcsSUFBTUEsRUFBRTdFLEtBQUs7UUFFeEIsT0FBT29CLFlBQVlvRDtJQUNyQixFQUFFLE9BQU07UUFDTixPQUFPO0lBQ1Q7QUFDRjtBQUVPLGVBQWVNO0lBQ3BCLE1BQU1DLFdBQVc7UUFDZixpQkFBaUI7UUFDakJ6QyxRQUFRO1FBQ1IwQyxTQUFTO0lBQ1g7SUFFQSxJQUFJO1FBQ0YsTUFBTTNELFFBQVEsTUFBTTRDO1FBQ3BCLE9BQU9wSixxREFBWUEsQ0FBQ29LLElBQUksQ0FBQzVELFNBQVMsRUFBRSxFQUFFO1lBQUVMLFNBQVMrRDtRQUFTO0lBQzVELEVBQUUsT0FBTTtRQUNOLE9BQU9sSyxxREFBWUEsQ0FBQ29LLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFBRXZDLFFBQVE7WUFBSzFCLFNBQVMrRDtRQUFTO0lBQ2hFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYWRlcy1mYW5hcHAvLi9hcHAvYXBpL3ZvdGVzL3JvdXRlLnRzPzc1MDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XHJcbmltcG9ydCB7IHBhcnNlS3N0RGF0ZSB9IGZyb20gXCJAL2xpYi9wYXJzZUtzdERhdGVcIjtcclxuaW1wb3J0IHsgc3VwYWJhc2VBZG1pbiB9IGZyb20gXCJAL2xpYi9zdXBhYmFzZS1hZG1pblwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSBcImZvcmNlLWR5bmFtaWNcIjtcclxuZXhwb3J0IGNvbnN0IHJldmFsaWRhdGUgPSAwO1xyXG5cclxudHlwZSBWb3RlUGxhdGZvcm0gPVxyXG4gIHwgXCJpZG9sY2hhbXBcIlxyXG4gIHwgXCJtdWJlYXRcIlxyXG4gIHwgXCJ1cGlja1wiXHJcbiAgfCBcImZhbmNhc3RcIlxyXG4gIHwgXCJmYW5wbHVzXCJcclxuICB8IFwicG9kb2FsXCJcclxuICB8IFwid2hvc2ZhblwiXHJcbiAgfCBcImR1Y2thZFwiXHJcbiAgfCBcIjEwYXNpYVwiXHJcbiAgfCBcIm11bml2ZXJzZVwiXHJcbiAgfCBcIm15MXBpY2tcIlxyXG4gIHwgXCJtbmV0cGx1c1wiXHJcbiAgfCBcImZhbm5zdGFyXCJcclxuICB8IFwiaGlnaGVyXCJcclxuICB8IFwia3RvcHN0YXJcIjtcclxuXHJcbnR5cGUgVm90ZVJvdyA9IHtcclxuICBlbmFibGVkOiBzdHJpbmc7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBwbGF0Zm9ybTogc3RyaW5nO1xyXG4gIHVybDogc3RyaW5nO1xyXG4gIG9wZW5zQXQ6IHN0cmluZztcclxuICBjbG9zZXNBdDogc3RyaW5nO1xyXG4gIG5vdGU6IHN0cmluZztcclxufTtcclxuXHJcbnR5cGUgVm90ZUl0ZW0gPSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBsZWdhY3lJZD86IHN0cmluZztcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIHBsYXRmb3JtOiBzdHJpbmc7XHJcbiAgcGxhdGZvcm1MYWJlbDogc3RyaW5nO1xyXG4gIHBsYXRmb3Jtczogc3RyaW5nW107XHJcbiAgcGxhdGZvcm1MYWJlbHM6IHN0cmluZ1tdO1xyXG4gIHVybDogc3RyaW5nO1xyXG4gIG9wZW5zQXQ/OiBzdHJpbmc7XHJcbiAgY2xvc2VzQXQ/OiBzdHJpbmc7XHJcbiAgbm90ZT86IHN0cmluZztcclxufTtcclxuXHJcbmNvbnN0IEZBTExCQUNLX0NTVl9VUkwgPVxyXG4gIFwiaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vc3ByZWFkc2hlZXRzL2QvZS8yUEFDWC0xdlJQWC1Fdm1DdXY3RGtfb3pLMlBoUjBWbXhXOTRzMy1iWmtZNUtvdThGTVhCUjdmNGluZHpCSjVHYXlBd3ZfVnVyWmEwRHNwN1Nzcm5CTC9wdWI/Z2lkPTAmc2luZ2xlPXRydWUmb3V0cHV0PWNzdlwiO1xyXG5cclxuY29uc3QgUExBVEZPUk1fTEFCRUxTOiBSZWNvcmQ8Vm90ZVBsYXRmb3JtLCBzdHJpbmc+ID0ge1xyXG4gIGlkb2xjaGFtcDogXCLslYTsnbTrj4zssZTtlIRcIixcclxuICBtdWJlYXQ6IFwi666k67mXXCIsXHJcbiAgdXBpY2s6IFwi7Jyg7ZS9XCIsXHJcbiAgZmFuY2FzdDogXCLtjKzsupDsiqTtirhcIixcclxuICBmYW5wbHVzOiBcIu2MrO2UjOufrOyKpFwiLFxyXG4gIHBvZG9hbDogXCLtj6zrj4TslYxcIixcclxuICB3aG9zZmFuOiBcIu2bhOymiO2MrFwiLFxyXG4gIGR1Y2thZDogXCLrjZXslaDrk5xcIixcclxuICBcIjEwYXNpYVwiOiBcIu2FkOyVhOyLnOyVhFwiLFxyXG4gIG11bml2ZXJzZTogXCLrrqTri4jrsoTsiqRcIixcclxuICBteTFwaWNrOiBcIuuniOydtOybkO2UvVwiLFxyXG4gIG1uZXRwbHVzOiBcIuyXoOuEt+2UjOufrOyKpFwiLFxyXG4gIGZhbm5zdGFyOiBcIu2MrOyVpOyKpO2DgFwiLFxyXG4gIGhpZ2hlcjogXCLtlZjsnbTslrRcIixcclxuICBrdG9wc3RhcjogXCJL7YOR7Iqk7YOAXCIsXHJcbn07XHJcblxyXG5jb25zdCBSRVFVRVNUX1RJTUVPVVRfTVMgPSA0XzUwMDtcclxuXHJcbi8vIOuPmeyLnCDsmpTssq0gMe2ajOuhnCDtlansuZjquLBcclxubGV0IGluRmxpZ2h0UmVxdWVzdDogUHJvbWlzZTxWb3RlSXRlbVtdPiB8IG51bGwgPSBudWxsO1xyXG5cclxuLy8gQ1NWIHBvbGxpbmcg6rCE6rKpKOq4sOyhtCAzMOy0iCDsnKDsp4ApXHJcbmNvbnN0IE1JTl9SRUZSRVNIX01TID0gMzBfMDAwO1xyXG5cclxuLy8g7ZiE7J6sIEFQSeqwgCDrhbjstpztlZjripQg7JWI7KCVIOyKpOuDheyDt1xyXG5sZXQgbGFzdEdvb2RWb3RlczogVm90ZUl0ZW1bXSB8IG51bGwgPSBudWxsO1xyXG5sZXQgbGFzdEZldGNoZWRBdCA9IDA7XHJcblxyXG5mdW5jdGlvbiB3aXRoQ2FjaGVCdXN0aW5nKHVybDogc3RyaW5nKSB7XHJcbiAgY29uc3QgYnVja2V0ID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gTUlOX1JFRlJFU0hfTVMpO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcGFyc2VkID0gbmV3IFVSTCh1cmwpO1xyXG4gICAgcGFyc2VkLnNlYXJjaFBhcmFtcy5zZXQoXCJfY2JcIiwgU3RyaW5nKGJ1Y2tldCkpO1xyXG4gICAgcmV0dXJuIHBhcnNlZC50b1N0cmluZygpO1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgY29uc3Qgc2VwYXJhdG9yID0gdXJsLmluY2x1ZGVzKFwiP1wiKSA/IFwiJlwiIDogXCI/XCI7XHJcbiAgICByZXR1cm4gYCR7dXJsfSR7c2VwYXJhdG9yfV9jYj0ke2J1Y2tldH1gO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbm9ybWFsaXplQm9vbGVhbih2YWx1ZTogc3RyaW5nKSB7XHJcbiAgY29uc3Qgbm9ybWFsaXplZCA9IHZhbHVlLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG4gIHJldHVybiBub3JtYWxpemVkID09PSBcInRydWVcIiB8fCBub3JtYWxpemVkID09PSBcIjFcIiB8fCBub3JtYWxpemVkID09PSBcInllc1wiO1xyXG59XHJcblxyXG5mdW5jdGlvbiBub3JtYWxpemVQbGF0Zm9ybShwbGF0Zm9ybTogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIHBsYXRmb3JtLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBub3JtYWxpemVWb3RlVXJsKHVybDogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIHVybC50cmltKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZvdGVJZGVudGl0eUtleShwbGF0Zm9ybTogc3RyaW5nLCB1cmw6IHN0cmluZykge1xyXG4gIHJldHVybiBgJHtub3JtYWxpemVQbGF0Zm9ybShwbGF0Zm9ybSl9fCR7bm9ybWFsaXplVm90ZVVybCh1cmwpfWAudG9Mb3dlckNhc2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VQbGF0Zm9ybXMocGxhdGZvcm1zUmF3OiBzdHJpbmcpIHtcclxuICBjb25zdCBub3JtYWxpemVkID0gcGxhdGZvcm1zUmF3XHJcbiAgICAucmVwbGFjZSgvW3wsL10vZywgXCIgXCIpXHJcbiAgICAucmVwbGFjZSgvXFxzKy9nLCBcIiBcIilcclxuICAgIC50cmltKCk7XHJcblxyXG4gIGNvbnN0IHVuaXF1ZSA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gIG5vcm1hbGl6ZWRcclxuICAgIC5zcGxpdChcIiBcIilcclxuICAgIC5tYXAoKHZhbHVlKSA9PiBub3JtYWxpemVQbGF0Zm9ybSh2YWx1ZSkpXHJcbiAgICAuZmlsdGVyKEJvb2xlYW4pXHJcbiAgICAuZm9yRWFjaCgocGxhdGZvcm0pID0+IHVuaXF1ZS5hZGQocGxhdGZvcm0pKTtcclxuXHJcbiAgaWYgKHVuaXF1ZS5zaXplID09PSAwKSB7XHJcbiAgICByZXR1cm4gW1wiZXRjXCJdO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIEFycmF5LmZyb20odW5pcXVlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbGFiZWxGb3JQbGF0Zm9ybShwbGF0Zm9ybTogc3RyaW5nKSB7XHJcbiAgY29uc3Qga2V5ID0gbm9ybWFsaXplUGxhdGZvcm0ocGxhdGZvcm0pIGFzIFZvdGVQbGF0Zm9ybTtcclxuICByZXR1cm4gUExBVEZPUk1fTEFCRUxTW2tleV0gPz8gXCLquLDtg4BcIjtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNJblByb2dyZXNzS2V5d29yZCh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgY29uc3Qgbm9ybWFsaXplZCA9IHZhbHVlLnJlcGxhY2UoL1xccysvZywgXCJcIikudG9Mb3dlckNhc2UoKTtcclxuICByZXR1cm4gbm9ybWFsaXplZCA9PT0gXCLsp4TtlonspJFcIjtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VEYXRlS3N0KHJhd1ZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcclxuICBpZiAoIXJhd1ZhbHVlKSByZXR1cm4gbnVsbDtcclxuICBjb25zdCB2YWx1ZSA9IHJhd1ZhbHVlLnRyaW0oKTtcclxuICBpZiAoIXZhbHVlIHx8IGlzSW5Qcm9ncmVzc0tleXdvcmQodmFsdWUpKSByZXR1cm4gbnVsbDtcclxuICByZXR1cm4gcGFyc2VLc3REYXRlKHZhbHVlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNFeHBpcmVkKGNsb3Nlc0F0OiBzdHJpbmcpIHtcclxuICBjb25zdCBkYXRlID0gcGFyc2VEYXRlS3N0KGNsb3Nlc0F0KTtcclxuICBpZiAoIWRhdGUpIHJldHVybiBmYWxzZTtcclxuICByZXR1cm4gZGF0ZS5nZXRUaW1lKCkgPD0gRGF0ZS5ub3coKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFzaFRvVm90ZUlkKHJhdzogc3RyaW5nKSB7XHJcbiAgbGV0IGhhc2ggPSAwO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcmF3Lmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICBoYXNoID0gKGhhc2ggKiAzMSArIHJhdy5jaGFyQ29kZUF0KGkpKSA+Pj4gMDtcclxuICB9XHJcbiAgcmV0dXJuIGB2b3RlLSR7aGFzaC50b1N0cmluZygzNil9YDtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlU3RhYmxlSWQocm93OiBWb3RlUm93KSB7XHJcbiAgcmV0dXJuIGhhc2hUb1ZvdGVJZCh2b3RlSWRlbnRpdHlLZXkocm93LnBsYXRmb3JtID8/IFwiXCIsIHJvdy51cmwgPz8gXCJcIikpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVMZWdhY3lTdGFibGVJZChyb3c6IFZvdGVSb3cpIHtcclxuICBjb25zdCBsZWdhY3lSYXcgPSBbXHJcbiAgICBub3JtYWxpemVQbGF0Zm9ybShyb3cucGxhdGZvcm0gPz8gXCJcIiksXHJcbiAgICByb3cudGl0bGU/LnRyaW0oKSA/PyBcIlwiLFxyXG4gICAgcm93LnVybD8udHJpbSgpID8/IFwiXCIsXHJcbiAgICByb3cub3BlbnNBdD8udHJpbSgpID8/IFwiXCIsXHJcbiAgICByb3cuY2xvc2VzQXQ/LnRyaW0oKSA/PyBcIlwiLFxyXG4gIF0uam9pbihcInxcIik7XHJcblxyXG4gIHJldHVybiBoYXNoVG9Wb3RlSWQobGVnYWN5UmF3KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VDc3ZMaW5lKGxpbmU6IHN0cmluZykge1xyXG4gIGNvbnN0IHZhbHVlczogc3RyaW5nW10gPSBbXTtcclxuICBsZXQgY3VycmVudCA9IFwiXCI7XHJcbiAgbGV0IGluUXVvdGVzID0gZmFsc2U7XHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZS5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgY29uc3QgY2hhciA9IGxpbmVbaV07XHJcbiAgICBjb25zdCBuZXh0Q2hhciA9IGxpbmVbaSArIDFdO1xyXG5cclxuICAgIGlmIChjaGFyID09PSAnXCInKSB7XHJcbiAgICAgIGlmIChpblF1b3RlcyAmJiBuZXh0Q2hhciA9PT0gJ1wiJykge1xyXG4gICAgICAgIGN1cnJlbnQgKz0gJ1wiJztcclxuICAgICAgICBpICs9IDE7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaW5RdW90ZXMgPSAhaW5RdW90ZXM7XHJcbiAgICAgIH1cclxuICAgICAgY29udGludWU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNoYXIgPT09IFwiLFwiICYmICFpblF1b3Rlcykge1xyXG4gICAgICB2YWx1ZXMucHVzaChjdXJyZW50LnRyaW0oKSk7XHJcbiAgICAgIGN1cnJlbnQgPSBcIlwiO1xyXG4gICAgICBjb250aW51ZTtcclxuICAgIH1cclxuXHJcbiAgICBjdXJyZW50ICs9IGNoYXI7XHJcbiAgfVxyXG5cclxuICB2YWx1ZXMucHVzaChjdXJyZW50LnRyaW0oKSk7XHJcbiAgcmV0dXJuIHZhbHVlcztcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VDc3YoY29udGVudDogc3RyaW5nKSB7XHJcbiAgY29uc3QgbGluZXMgPSBjb250ZW50XHJcbiAgICAuc3BsaXQoL1xccj9cXG4vKVxyXG4gICAgLm1hcCgobGluZSkgPT4gbGluZS50cmltKCkpXHJcbiAgICAuZmlsdGVyKChsaW5lKSA9PiBsaW5lLmxlbmd0aCA+IDApO1xyXG5cclxuICBpZiAobGluZXMubGVuZ3RoIDw9IDEpIHtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcblxyXG4gIGNvbnN0IFtoZWFkZXJMaW5lLCAuLi5yb3dzXSA9IGxpbmVzO1xyXG4gIGNvbnN0IGhlYWRlcnMgPSBwYXJzZUNzdkxpbmUoaGVhZGVyTGluZSk7XHJcblxyXG4gIHJldHVybiByb3dzLm1hcCgobGluZSkgPT4ge1xyXG4gICAgY29uc3QgdmFsdWVzID0gcGFyc2VDc3ZMaW5lKGxpbmUpO1xyXG4gICAgY29uc3QgcmVjb3JkOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XHJcblxyXG4gICAgaGVhZGVycy5mb3JFYWNoKChoZWFkZXIsIGluZGV4KSA9PiB7XHJcbiAgICAgIHJlY29yZFtoZWFkZXJdID0gdmFsdWVzW2luZGV4XSA/PyBcIlwiO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHJlY29yZCBhcyBWb3RlUm93O1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1bmlxdWVWb3Rlcyh2b3RlczogVm90ZUl0ZW1bXSkge1xyXG4gIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICByZXR1cm4gdm90ZXMuZmlsdGVyKCh2b3RlKSA9PiB7XHJcbiAgICBjb25zdCBrZXkgPSBgJHt2b3RlLnBsYXRmb3JtfXwke3ZvdGUudGl0bGV9fCR7dm90ZS51cmx9fCR7dm90ZS5jbG9zZXNBdCA/PyBcIlwifWAudG9Mb3dlckNhc2UoKTtcclxuICAgIGlmIChzZWVuLmhhcyhrZXkpKSByZXR1cm4gZmFsc2U7XHJcbiAgICBzZWVuLmFkZChrZXkpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoVm90ZXNDc3YoY3N2VXJsOiBzdHJpbmcpIHtcclxuICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xyXG4gIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgUkVRVUVTVF9USU1FT1VUX01TKTtcclxuICBjb25zdCBjYWNoZUJ1c3RlZFVybCA9IHdpdGhDYWNoZUJ1c3RpbmcoY3N2VXJsKTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goY2FjaGVCdXN0ZWRVcmwsIHtcclxuICAgICAgY2FjaGU6IFwibm8tc3RvcmVcIixcclxuICAgICAgbmV4dDogeyByZXZhbGlkYXRlOiAwIH0sXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBBY2NlcHQ6IFwidGV4dC9jc3YsKi8qO3E9MC45XCIsXHJcbiAgICAgICAgXCJDYWNoZS1Db250cm9sXCI6IFwibm8tY2FjaGVcIixcclxuICAgICAgICBQcmFnbWE6IFwibm8tY2FjaGVcIixcclxuICAgICAgfSxcclxuICAgICAgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbCxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggdm90ZXMgY3N2OiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBmZXRjaExhdGVzdFZvdGVzKCkge1xyXG4gIGNvbnN0IGNzdlVybCA9IHByb2Nlc3MuZW52LlZPVEVTX1NIRUVUX0NTVl9VUkwgPz8gRkFMTEJBQ0tfQ1NWX1VSTDtcclxuICBjb25zdCBjc3YgPSBhd2FpdCBmZXRjaFZvdGVzQ3N2KGNzdlVybCk7XHJcbiAgY29uc3QgcGFyc2VkUm93cyA9IHBhcnNlQ3N2KGNzdik7XHJcblxyXG4gIGNvbnN0IGZldGNoZWRWb3RlcyA9IHBhcnNlZFJvd3NcclxuICAgIC5maWx0ZXIoKHJvdykgPT4gbm9ybWFsaXplQm9vbGVhbihyb3cuZW5hYmxlZCA/PyBcIlwiKSlcclxuICAgIC5maWx0ZXIoKHJvdykgPT4gIWlzRXhwaXJlZChyb3cuY2xvc2VzQXQgPz8gXCJcIikpXHJcbiAgICAubWFwKChyb3cpID0+IHtcclxuICAgICAgY29uc3QgcGxhdGZvcm1zID0gcGFyc2VQbGF0Zm9ybXMocm93LnBsYXRmb3JtID8/IFwiXCIpO1xyXG4gICAgICBjb25zdCByYXdPcGVuc0F0ID0gcm93Lm9wZW5zQXQ/LnRyaW0oKSA/PyBcIlwiO1xyXG4gICAgICBjb25zdCBvcGVuRGF0ZSA9IHBhcnNlRGF0ZUtzdChyYXdPcGVuc0F0KTtcclxuICAgICAgY29uc3QgY2xvc2VEYXRlID0gcGFyc2VEYXRlS3N0KHJvdy5jbG9zZXNBdCA/PyBcIlwiKTtcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgaWQ6IGNyZWF0ZVN0YWJsZUlkKHJvdyksXHJcbiAgICAgICAgbGVnYWN5SWQ6IGNyZWF0ZUxlZ2FjeVN0YWJsZUlkKHJvdyksXHJcbiAgICAgICAgdGl0bGU6IHJvdy50aXRsZT8udHJpbSgpID8/IFwiXCIsXHJcbiAgICAgICAgcGxhdGZvcm06IHBsYXRmb3Jtc1swXSxcclxuICAgICAgICBwbGF0Zm9ybUxhYmVsOiBsYWJlbEZvclBsYXRmb3JtKHBsYXRmb3Jtc1swXSksXHJcbiAgICAgICAgcGxhdGZvcm1zLFxyXG4gICAgICAgIHBsYXRmb3JtTGFiZWxzOiBwbGF0Zm9ybXMubWFwKGxhYmVsRm9yUGxhdGZvcm0pLFxyXG4gICAgICAgIHVybDogcm93LnVybD8udHJpbSgpID8/IFwiXCIsXHJcbiAgICAgICAgb3BlbnNBdDogaXNJblByb2dyZXNzS2V5d29yZChyYXdPcGVuc0F0KVxyXG4gICAgICAgICAgPyBcIuynhO2WieykkVwiXHJcbiAgICAgICAgICA6IG9wZW5EYXRlXHJcbiAgICAgICAgICA/IG9wZW5EYXRlLnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgIDogdW5kZWZpbmVkLFxyXG4gICAgICAgIGNsb3Nlc0F0OiBjbG9zZURhdGUgPyBjbG9zZURhdGUudG9JU09TdHJpbmcoKSA6IHVuZGVmaW5lZCxcclxuICAgICAgICBub3RlOiByb3cubm90ZT8udHJpbSgpIHx8IHVuZGVmaW5lZCxcclxuICAgICAgfSBhcyBWb3RlSXRlbTtcclxuICAgIH0pXHJcbiAgICAuZmlsdGVyKCh2b3RlKSA9PiB2b3RlLnRpdGxlICYmIHZvdGUudXJsKTtcclxuXHJcbiAgcmV0dXJuIHVuaXF1ZVZvdGVzKGZldGNoZWRWb3Rlcyk7XHJcbn1cclxuXHJcbi8vIDMw7LSIIHBvbGxpbmcgKyBpbkZsaWdodCDqs7XsnKAgKyDsi6TtjKgg7Y+067CxICsg7KCE7LK0IOymieyLnCDrsJjsmIEo7IKt7KCcIO2PrO2VqClcclxuYXN5bmMgZnVuY3Rpb24gbG9hZFZvdGVzRnJvbVNoZWV0KCkge1xyXG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcblxyXG4gIGlmIChsYXN0R29vZFZvdGVzICYmIG5vdyAtIGxhc3RGZXRjaGVkQXQgPCBNSU5fUkVGUkVTSF9NUykge1xyXG4gICAgcmV0dXJuIGxhc3RHb29kVm90ZXM7XHJcbiAgfVxyXG5cclxuICBpZiAoaW5GbGlnaHRSZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gaW5GbGlnaHRSZXF1ZXN0O1xyXG4gIH1cclxuXHJcbiAgaW5GbGlnaHRSZXF1ZXN0ID0gKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IGZldGNoZWRWb3RlcyA9IGF3YWl0IGZldGNoTGF0ZXN0Vm90ZXMoKTtcclxuICAgIGxhc3RHb29kVm90ZXMgPSBmZXRjaGVkVm90ZXM7XHJcbiAgICBsYXN0RmV0Y2hlZEF0ID0gRGF0ZS5ub3coKTtcclxuICAgIHJldHVybiBmZXRjaGVkVm90ZXM7XHJcbiAgfSkoKTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIHJldHVybiBhd2FpdCBpbkZsaWdodFJlcXVlc3Q7XHJcbiAgfSBjYXRjaCB7XHJcbiAgICBpZiAobGFzdEdvb2RWb3RlcykgcmV0dXJuIGxhc3RHb29kVm90ZXM7XHJcbiAgICByZXR1cm4gW107XHJcbiAgfSBmaW5hbGx5IHtcclxuICAgIGluRmxpZ2h0UmVxdWVzdCA9IG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBsb2FkVm90ZXNGcm9tU3VwYWJhc2UoKTogUHJvbWlzZTxWb3RlSXRlbVtdIHwgbnVsbD4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKFwidm90ZXNcIilcclxuICAgICAgLnNlbGVjdChcIipcIilcclxuICAgICAgLmVxKFwiZW5hYmxlZFwiLCB0cnVlKVxyXG4gICAgICAub3JkZXIoXCJjcmVhdGVkX2F0XCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3IgfHwgIWRhdGEpIHJldHVybiBudWxsO1xyXG4gICAgLy8g7Zmc7ISxIO2IrO2RnCAw6rG07J2AIOygleyDgSDsg4Htg5wg4oCUIG51bGwoPVNoZWV0IO2PtOuwsSkg64yA7IugIOu5iCDrsLDsl7Qg67CY7ZmYXHJcbiAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHJldHVybiBbXTtcclxuXHJcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgY29uc3QgaXRlbXMgPSBkYXRhXHJcbiAgICAgIC5maWx0ZXIoKHJvdykgPT4ge1xyXG4gICAgICAgIGlmICghcm93LmNsb3Nlc19hdCkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgY29uc3QgZCA9IHBhcnNlS3N0RGF0ZShyb3cuY2xvc2VzX2F0KTtcclxuICAgICAgICBpZiAoIWQpIHJldHVybiB0cnVlO1xyXG4gICAgICAgIHJldHVybiBkLmdldFRpbWUoKSA+IG5vdztcclxuICAgICAgfSlcclxuICAgICAgLm1hcCgocm93KSA9PiB7XHJcbiAgICAgICAgY29uc3QgcGxhdGZvcm1zID0gcGFyc2VQbGF0Zm9ybXMocm93LnBsYXRmb3JtID8/IFwiXCIpO1xyXG4gICAgICAgIGNvbnN0IG9wZW5EYXRlID0gcGFyc2VEYXRlS3N0KHJvdy5vcGVuc19hdCA/PyBcIlwiKTtcclxuICAgICAgICBjb25zdCBjbG9zZURhdGUgPSBwYXJzZURhdGVLc3Qocm93LmNsb3Nlc19hdCA/PyBcIlwiKTtcclxuICAgICAgICBjb25zdCByYXdPcGVuc0F0ID0gcm93Lm9wZW5zX2F0Py50cmltKCkgPz8gXCJcIjtcclxuICAgICAgICAvLyBTdXBhYmFzZSBVVUlE66W8IOq4sOuzuCBJROuhnCDsgqzsmqkg4oCUIOqzoOycoO2VmOqzoCDsiJjsoJXtlbTrj4Qg67aI67OAXHJcbiAgICAgICAgLy8gbGVnYWN5SWTsl5Ag6riw7KG0IO2VtOyLnOulvCDrhKPslrQg7J207KCEIGNyb24g7IOB7YOc7JmAIO2YuO2ZmFxyXG4gICAgICAgIGNvbnN0IGxlZ2FjeUhhc2ggPSBoYXNoVG9Wb3RlSWQoYCR7cm93LnBsYXRmb3JtID8/IFwiXCJ9fCR7cm93LnVybCA/PyBcIlwifWApO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBpZDogU3RyaW5nKHJvdy5pZCksXHJcbiAgICAgICAgICBsZWdhY3lJZDogbGVnYWN5SGFzaCxcclxuICAgICAgICAgIHRpdGxlOiByb3cudGl0bGU/LnRyaW0oKSA/PyBcIlwiLFxyXG4gICAgICAgICAgcGxhdGZvcm06IHBsYXRmb3Jtc1swXSxcclxuICAgICAgICAgIHBsYXRmb3JtTGFiZWw6IGxhYmVsRm9yUGxhdGZvcm0ocGxhdGZvcm1zWzBdKSxcclxuICAgICAgICAgIHBsYXRmb3JtcyxcclxuICAgICAgICAgIHBsYXRmb3JtTGFiZWxzOiBwbGF0Zm9ybXMubWFwKGxhYmVsRm9yUGxhdGZvcm0pLFxyXG4gICAgICAgICAgdXJsOiByb3cudXJsPy50cmltKCkgPz8gXCJcIixcclxuICAgICAgICAgIG9wZW5zQXQ6IGlzSW5Qcm9ncmVzc0tleXdvcmQocmF3T3BlbnNBdClcclxuICAgICAgICAgICAgPyBcIuynhO2WieykkVwiXHJcbiAgICAgICAgICAgIDogb3BlbkRhdGVcclxuICAgICAgICAgICAgPyBvcGVuRGF0ZS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgY2xvc2VzQXQ6IGNsb3NlRGF0ZSA/IGNsb3NlRGF0ZS50b0lTT1N0cmluZygpIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgbm90ZTogcm93Lm5vdGU/LnRyaW0oKSB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgfSBhcyBWb3RlSXRlbTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbHRlcigodikgPT4gdi50aXRsZSk7XHJcblxyXG4gICAgcmV0dXJuIHVuaXF1ZVZvdGVzKGl0ZW1zKTtcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcclxuICBjb25zdCBOT19DQUNIRSA9IHtcclxuICAgIFwiQ2FjaGUtQ29udHJvbFwiOiBcIm5vLXN0b3JlLCBuby1jYWNoZSwgbXVzdC1yZXZhbGlkYXRlLCBtYXgtYWdlPTBcIixcclxuICAgIFByYWdtYTogXCJuby1jYWNoZVwiLFxyXG4gICAgRXhwaXJlczogXCIwXCIsXHJcbiAgfTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHZvdGVzID0gYXdhaXQgbG9hZFZvdGVzRnJvbVN1cGFiYXNlKCk7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24odm90ZXMgPz8gW10sIHsgaGVhZGVyczogTk9fQ0FDSEUgfSk7XHJcbiAgfSBjYXRjaCB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oW10sIHsgc3RhdHVzOiAyMDAsIGhlYWRlcnM6IE5PX0NBQ0hFIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicGFyc2VLc3REYXRlIiwic3VwYWJhc2VBZG1pbiIsImR5bmFtaWMiLCJyZXZhbGlkYXRlIiwiRkFMTEJBQ0tfQ1NWX1VSTCIsIlBMQVRGT1JNX0xBQkVMUyIsImlkb2xjaGFtcCIsIm11YmVhdCIsInVwaWNrIiwiZmFuY2FzdCIsImZhbnBsdXMiLCJwb2RvYWwiLCJ3aG9zZmFuIiwiZHVja2FkIiwibXVuaXZlcnNlIiwibXkxcGljayIsIm1uZXRwbHVzIiwiZmFubnN0YXIiLCJoaWdoZXIiLCJrdG9wc3RhciIsIlJFUVVFU1RfVElNRU9VVF9NUyIsImluRmxpZ2h0UmVxdWVzdCIsIk1JTl9SRUZSRVNIX01TIiwibGFzdEdvb2RWb3RlcyIsImxhc3RGZXRjaGVkQXQiLCJ3aXRoQ2FjaGVCdXN0aW5nIiwidXJsIiwiYnVja2V0IiwiTWF0aCIsImZsb29yIiwiRGF0ZSIsIm5vdyIsInBhcnNlZCIsIlVSTCIsInNlYXJjaFBhcmFtcyIsInNldCIsIlN0cmluZyIsInRvU3RyaW5nIiwic2VwYXJhdG9yIiwiaW5jbHVkZXMiLCJub3JtYWxpemVCb29sZWFuIiwidmFsdWUiLCJub3JtYWxpemVkIiwidHJpbSIsInRvTG93ZXJDYXNlIiwibm9ybWFsaXplUGxhdGZvcm0iLCJwbGF0Zm9ybSIsIm5vcm1hbGl6ZVZvdGVVcmwiLCJ2b3RlSWRlbnRpdHlLZXkiLCJwYXJzZVBsYXRmb3JtcyIsInBsYXRmb3Jtc1JhdyIsInJlcGxhY2UiLCJ1bmlxdWUiLCJTZXQiLCJzcGxpdCIsIm1hcCIsImZpbHRlciIsIkJvb2xlYW4iLCJmb3JFYWNoIiwiYWRkIiwic2l6ZSIsIkFycmF5IiwiZnJvbSIsImxhYmVsRm9yUGxhdGZvcm0iLCJrZXkiLCJpc0luUHJvZ3Jlc3NLZXl3b3JkIiwicGFyc2VEYXRlS3N0IiwicmF3VmFsdWUiLCJpc0V4cGlyZWQiLCJjbG9zZXNBdCIsImRhdGUiLCJnZXRUaW1lIiwiaGFzaFRvVm90ZUlkIiwicmF3IiwiaGFzaCIsImkiLCJsZW5ndGgiLCJjaGFyQ29kZUF0IiwiY3JlYXRlU3RhYmxlSWQiLCJyb3ciLCJjcmVhdGVMZWdhY3lTdGFibGVJZCIsImxlZ2FjeVJhdyIsInRpdGxlIiwib3BlbnNBdCIsImpvaW4iLCJwYXJzZUNzdkxpbmUiLCJsaW5lIiwidmFsdWVzIiwiY3VycmVudCIsImluUXVvdGVzIiwiY2hhciIsIm5leHRDaGFyIiwicHVzaCIsInBhcnNlQ3N2IiwiY29udGVudCIsImxpbmVzIiwiaGVhZGVyTGluZSIsInJvd3MiLCJoZWFkZXJzIiwicmVjb3JkIiwiaGVhZGVyIiwiaW5kZXgiLCJ1bmlxdWVWb3RlcyIsInZvdGVzIiwic2VlbiIsInZvdGUiLCJoYXMiLCJmZXRjaFZvdGVzQ3N2IiwiY3N2VXJsIiwiY29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsInRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiYWJvcnQiLCJjYWNoZUJ1c3RlZFVybCIsInJlc3BvbnNlIiwiZmV0Y2giLCJjYWNoZSIsIm5leHQiLCJBY2NlcHQiLCJQcmFnbWEiLCJzaWduYWwiLCJvayIsIkVycm9yIiwic3RhdHVzIiwidGV4dCIsImNsZWFyVGltZW91dCIsImZldGNoTGF0ZXN0Vm90ZXMiLCJwcm9jZXNzIiwiZW52IiwiVk9URVNfU0hFRVRfQ1NWX1VSTCIsImNzdiIsInBhcnNlZFJvd3MiLCJmZXRjaGVkVm90ZXMiLCJlbmFibGVkIiwicGxhdGZvcm1zIiwicmF3T3BlbnNBdCIsIm9wZW5EYXRlIiwiY2xvc2VEYXRlIiwiaWQiLCJsZWdhY3lJZCIsInBsYXRmb3JtTGFiZWwiLCJwbGF0Zm9ybUxhYmVscyIsInRvSVNPU3RyaW5nIiwidW5kZWZpbmVkIiwibm90ZSIsImxvYWRWb3Rlc0Zyb21TaGVldCIsImxvYWRWb3Rlc0Zyb21TdXBhYmFzZSIsImRhdGEiLCJlcnJvciIsInNlbGVjdCIsImVxIiwib3JkZXIiLCJhc2NlbmRpbmciLCJpdGVtcyIsImNsb3Nlc19hdCIsImQiLCJvcGVuc19hdCIsImxlZ2FjeUhhc2giLCJ2IiwiR0VUIiwiTk9fQ0FDSEUiLCJFeHBpcmVzIiwianNvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/votes/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/parseKstDate.ts":
/*!*****************************!*\
  !*** ./lib/parseKstDate.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseKstDate: () => (/* binding */ parseKstDate)\n/* harmony export */ });\nconst EXPLICIT_TIMEZONE_RE = /(z|[+-]\\d{2}:?\\d{2})$/i;\nfunction pad2(value) {\n    return String(value).padStart(2, \"0\");\n}\nfunction parseDatePartsAsKst(datePart, hour = 0, minute = 0, second = 0) {\n    const normalizedDate = normalizeDatePart(datePart);\n    if (!normalizedDate) return new Date(\"invalid\");\n    return new Date(`${normalizedDate}T${pad2(hour)}:${pad2(minute)}:${pad2(second)}+09:00`);\n}\nfunction normalizeDatePart(datePart) {\n    const [year, month, day] = datePart.split(\"-\");\n    if (!year || !month || !day) return null;\n    return `${year}-${pad2(month)}-${pad2(day)}`;\n}\nfunction parseKstDate(value) {\n    if (!value) return null;\n    const raw = value.trim();\n    if (!raw || raw.replace(/\\s+/g, \"\") === \"진행중\") return null;\n    if (EXPLICIT_TIMEZONE_RE.test(raw)) {\n        const explicit = new Date(raw);\n        return Number.isNaN(explicit.getTime()) ? null : explicit;\n    }\n    const normalized = raw.replace(/\\./g, \"-\").replace(/\\//g, \"-\").replace(/\\s*-\\s*/g, \"-\").replace(/\\s+/g, \" \").trim();\n    const amPmMatch = normalized.match(/^(\\d{4}-\\d{1,2}-\\d{1,2})\\s*(오전|오후)\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?$/);\n    if (amPmMatch) {\n        const [, datePart, amPm, rawHour, rawMinute, rawSecond] = amPmMatch;\n        let hour = Number(rawHour);\n        if (amPm === \"오전\" && hour === 12) hour = 0;\n        if (amPm === \"오후\" && hour < 12) hour += 12;\n        const parsed = parseDatePartsAsKst(datePart, hour, Number(rawMinute), Number(rawSecond ?? \"0\"));\n        return Number.isNaN(parsed.getTime()) ? null : parsed;\n    }\n    const numericMatch = normalized.match(/^(\\d{4}-\\d{1,2}-\\d{1,2})(?:\\s+(\\d{1,2})(?::(\\d{1,2}))?(?::(\\d{1,2}))?)?$/);\n    if (numericMatch) {\n        const [, datePart, rawHour, rawMinute, rawSecond] = numericMatch;\n        const parsed = parseDatePartsAsKst(datePart, Number(rawHour ?? \"0\"), Number(rawMinute ?? \"0\"), Number(rawSecond ?? \"0\"));\n        return Number.isNaN(parsed.getTime()) ? null : parsed;\n    }\n    const direct = new Date(raw);\n    return Number.isNaN(direct.getTime()) ? null : direct;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcGFyc2VLc3REYXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxNQUFNQSx1QkFBdUI7QUFFN0IsU0FBU0MsS0FBS0MsS0FBc0I7SUFDbEMsT0FBT0MsT0FBT0QsT0FBT0UsUUFBUSxDQUFDLEdBQUc7QUFDbkM7QUFFQSxTQUFTQyxvQkFBb0JDLFFBQWdCLEVBQUVDLE9BQU8sQ0FBQyxFQUFFQyxTQUFTLENBQUMsRUFBRUMsU0FBUyxDQUFDO0lBQzdFLE1BQU1DLGlCQUFpQkMsa0JBQWtCTDtJQUN6QyxJQUFJLENBQUNJLGdCQUFnQixPQUFPLElBQUlFLEtBQUs7SUFDckMsT0FBTyxJQUFJQSxLQUFLLENBQUMsRUFBRUYsZUFBZSxDQUFDLEVBQUVULEtBQUtNLE1BQU0sQ0FBQyxFQUFFTixLQUFLTyxRQUFRLENBQUMsRUFBRVAsS0FBS1EsUUFBUSxNQUFNLENBQUM7QUFDekY7QUFHQSxTQUFTRSxrQkFBa0JMLFFBQWdCO0lBQ3pDLE1BQU0sQ0FBQ08sTUFBTUMsT0FBT0MsSUFBSSxHQUFHVCxTQUFTVSxLQUFLLENBQUM7SUFDMUMsSUFBSSxDQUFDSCxRQUFRLENBQUNDLFNBQVMsQ0FBQ0MsS0FBSyxPQUFPO0lBQ3BDLE9BQU8sQ0FBQyxFQUFFRixLQUFLLENBQUMsRUFBRVosS0FBS2EsT0FBTyxDQUFDLEVBQUViLEtBQUtjLEtBQUssQ0FBQztBQUM5QztBQUVPLFNBQVNFLGFBQWFmLEtBQWM7SUFDekMsSUFBSSxDQUFDQSxPQUFPLE9BQU87SUFFbkIsTUFBTWdCLE1BQU1oQixNQUFNaUIsSUFBSTtJQUN0QixJQUFJLENBQUNELE9BQU9BLElBQUlFLE9BQU8sQ0FBQyxRQUFRLFFBQVEsT0FBTyxPQUFPO0lBRXRELElBQUlwQixxQkFBcUJxQixJQUFJLENBQUNILE1BQU07UUFDbEMsTUFBTUksV0FBVyxJQUFJVixLQUFLTTtRQUMxQixPQUFPSyxPQUFPQyxLQUFLLENBQUNGLFNBQVNHLE9BQU8sTUFBTSxPQUFPSDtJQUNuRDtJQUVBLE1BQU1JLGFBQWFSLElBQ2hCRSxPQUFPLENBQUMsT0FBTyxLQUNmQSxPQUFPLENBQUMsT0FBTyxLQUNmQSxPQUFPLENBQUMsWUFBWSxLQUNwQkEsT0FBTyxDQUFDLFFBQVEsS0FDaEJELElBQUk7SUFFUCxNQUFNUSxZQUFZRCxXQUFXRSxLQUFLLENBQUM7SUFDbkMsSUFBSUQsV0FBVztRQUNiLE1BQU0sR0FBR3JCLFVBQVV1QixNQUFNQyxTQUFTQyxXQUFXQyxVQUFVLEdBQUdMO1FBQzFELElBQUlwQixPQUFPZ0IsT0FBT087UUFDbEIsSUFBSUQsU0FBUyxRQUFRdEIsU0FBUyxJQUFJQSxPQUFPO1FBQ3pDLElBQUlzQixTQUFTLFFBQVF0QixPQUFPLElBQUlBLFFBQVE7UUFDeEMsTUFBTTBCLFNBQVM1QixvQkFBb0JDLFVBQVVDLE1BQU1nQixPQUFPUSxZQUFZUixPQUFPUyxhQUFhO1FBQzFGLE9BQU9ULE9BQU9DLEtBQUssQ0FBQ1MsT0FBT1IsT0FBTyxNQUFNLE9BQU9RO0lBQ2pEO0lBRUEsTUFBTUMsZUFBZVIsV0FBV0UsS0FBSyxDQUFDO0lBQ3RDLElBQUlNLGNBQWM7UUFDaEIsTUFBTSxHQUFHNUIsVUFBVXdCLFNBQVNDLFdBQVdDLFVBQVUsR0FBR0U7UUFDcEQsTUFBTUQsU0FBUzVCLG9CQUNiQyxVQUNBaUIsT0FBT08sV0FBVyxNQUNsQlAsT0FBT1EsYUFBYSxNQUNwQlIsT0FBT1MsYUFBYTtRQUV0QixPQUFPVCxPQUFPQyxLQUFLLENBQUNTLE9BQU9SLE9BQU8sTUFBTSxPQUFPUTtJQUNqRDtJQUVBLE1BQU1FLFNBQVMsSUFBSXZCLEtBQUtNO0lBQ3hCLE9BQU9LLE9BQU9DLEtBQUssQ0FBQ1csT0FBT1YsT0FBTyxNQUFNLE9BQU9VO0FBQ2pEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFkZXMtZmFuYXBwLy4vbGliL3BhcnNlS3N0RGF0ZS50cz8xNWMwIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEVYUExJQ0lUX1RJTUVaT05FX1JFID0gLyh6fFsrLV1cXGR7Mn06P1xcZHsyfSkkL2k7XHJcblxyXG5mdW5jdGlvbiBwYWQyKHZhbHVlOiBzdHJpbmcgfCBudW1iZXIpIHtcclxuICByZXR1cm4gU3RyaW5nKHZhbHVlKS5wYWRTdGFydCgyLCBcIjBcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlRGF0ZVBhcnRzQXNLc3QoZGF0ZVBhcnQ6IHN0cmluZywgaG91ciA9IDAsIG1pbnV0ZSA9IDAsIHNlY29uZCA9IDApIHtcclxuICBjb25zdCBub3JtYWxpemVkRGF0ZSA9IG5vcm1hbGl6ZURhdGVQYXJ0KGRhdGVQYXJ0KTtcclxuICBpZiAoIW5vcm1hbGl6ZWREYXRlKSByZXR1cm4gbmV3IERhdGUoXCJpbnZhbGlkXCIpO1xyXG4gIHJldHVybiBuZXcgRGF0ZShgJHtub3JtYWxpemVkRGF0ZX1UJHtwYWQyKGhvdXIpfToke3BhZDIobWludXRlKX06JHtwYWQyKHNlY29uZCl9KzA5OjAwYCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBub3JtYWxpemVEYXRlUGFydChkYXRlUGFydDogc3RyaW5nKSB7XHJcbiAgY29uc3QgW3llYXIsIG1vbnRoLCBkYXldID0gZGF0ZVBhcnQuc3BsaXQoXCItXCIpO1xyXG4gIGlmICgheWVhciB8fCAhbW9udGggfHwgIWRheSkgcmV0dXJuIG51bGw7XHJcbiAgcmV0dXJuIGAke3llYXJ9LSR7cGFkMihtb250aCl9LSR7cGFkMihkYXkpfWA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUtzdERhdGUodmFsdWU/OiBzdHJpbmcpIHtcclxuICBpZiAoIXZhbHVlKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgY29uc3QgcmF3ID0gdmFsdWUudHJpbSgpO1xyXG4gIGlmICghcmF3IHx8IHJhdy5yZXBsYWNlKC9cXHMrL2csIFwiXCIpID09PSBcIuynhO2WieykkVwiKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgaWYgKEVYUExJQ0lUX1RJTUVaT05FX1JFLnRlc3QocmF3KSkge1xyXG4gICAgY29uc3QgZXhwbGljaXQgPSBuZXcgRGF0ZShyYXcpO1xyXG4gICAgcmV0dXJuIE51bWJlci5pc05hTihleHBsaWNpdC5nZXRUaW1lKCkpID8gbnVsbCA6IGV4cGxpY2l0O1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgbm9ybWFsaXplZCA9IHJhd1xyXG4gICAgLnJlcGxhY2UoL1xcLi9nLCBcIi1cIilcclxuICAgIC5yZXBsYWNlKC9cXC8vZywgXCItXCIpXHJcbiAgICAucmVwbGFjZSgvXFxzKi1cXHMqL2csIFwiLVwiKVxyXG4gICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpXHJcbiAgICAudHJpbSgpO1xyXG5cclxuICBjb25zdCBhbVBtTWF0Y2ggPSBub3JtYWxpemVkLm1hdGNoKC9eKFxcZHs0fS1cXGR7MSwyfS1cXGR7MSwyfSlcXHMqKOyYpOyghHzsmKTtm4QpXFxzKihcXGR7MSwyfSk6KFxcZHsxLDJ9KSg/OjooXFxkezEsMn0pKT8kLyk7XHJcbiAgaWYgKGFtUG1NYXRjaCkge1xyXG4gICAgY29uc3QgWywgZGF0ZVBhcnQsIGFtUG0sIHJhd0hvdXIsIHJhd01pbnV0ZSwgcmF3U2Vjb25kXSA9IGFtUG1NYXRjaDtcclxuICAgIGxldCBob3VyID0gTnVtYmVyKHJhd0hvdXIpO1xyXG4gICAgaWYgKGFtUG0gPT09IFwi7Jik7KCEXCIgJiYgaG91ciA9PT0gMTIpIGhvdXIgPSAwO1xyXG4gICAgaWYgKGFtUG0gPT09IFwi7Jik7ZuEXCIgJiYgaG91ciA8IDEyKSBob3VyICs9IDEyO1xyXG4gICAgY29uc3QgcGFyc2VkID0gcGFyc2VEYXRlUGFydHNBc0tzdChkYXRlUGFydCwgaG91ciwgTnVtYmVyKHJhd01pbnV0ZSksIE51bWJlcihyYXdTZWNvbmQgPz8gXCIwXCIpKTtcclxuICAgIHJldHVybiBOdW1iZXIuaXNOYU4ocGFyc2VkLmdldFRpbWUoKSkgPyBudWxsIDogcGFyc2VkO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgbnVtZXJpY01hdGNoID0gbm9ybWFsaXplZC5tYXRjaCgvXihcXGR7NH0tXFxkezEsMn0tXFxkezEsMn0pKD86XFxzKyhcXGR7MSwyfSkoPzo6KFxcZHsxLDJ9KSk/KD86OihcXGR7MSwyfSkpPyk/JC8pO1xyXG4gIGlmIChudW1lcmljTWF0Y2gpIHtcclxuICAgIGNvbnN0IFssIGRhdGVQYXJ0LCByYXdIb3VyLCByYXdNaW51dGUsIHJhd1NlY29uZF0gPSBudW1lcmljTWF0Y2g7XHJcbiAgICBjb25zdCBwYXJzZWQgPSBwYXJzZURhdGVQYXJ0c0FzS3N0KFxyXG4gICAgICBkYXRlUGFydCxcclxuICAgICAgTnVtYmVyKHJhd0hvdXIgPz8gXCIwXCIpLFxyXG4gICAgICBOdW1iZXIocmF3TWludXRlID8/IFwiMFwiKSxcclxuICAgICAgTnVtYmVyKHJhd1NlY29uZCA/PyBcIjBcIiksXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIE51bWJlci5pc05hTihwYXJzZWQuZ2V0VGltZSgpKSA/IG51bGwgOiBwYXJzZWQ7XHJcbiAgfVxyXG5cclxuICBjb25zdCBkaXJlY3QgPSBuZXcgRGF0ZShyYXcpO1xyXG4gIHJldHVybiBOdW1iZXIuaXNOYU4oZGlyZWN0LmdldFRpbWUoKSkgPyBudWxsIDogZGlyZWN0O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJFWFBMSUNJVF9USU1FWk9ORV9SRSIsInBhZDIiLCJ2YWx1ZSIsIlN0cmluZyIsInBhZFN0YXJ0IiwicGFyc2VEYXRlUGFydHNBc0tzdCIsImRhdGVQYXJ0IiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsIm5vcm1hbGl6ZWREYXRlIiwibm9ybWFsaXplRGF0ZVBhcnQiLCJEYXRlIiwieWVhciIsIm1vbnRoIiwiZGF5Iiwic3BsaXQiLCJwYXJzZUtzdERhdGUiLCJyYXciLCJ0cmltIiwicmVwbGFjZSIsInRlc3QiLCJleHBsaWNpdCIsIk51bWJlciIsImlzTmFOIiwiZ2V0VGltZSIsIm5vcm1hbGl6ZWQiLCJhbVBtTWF0Y2giLCJtYXRjaCIsImFtUG0iLCJyYXdIb3VyIiwicmF3TWludXRlIiwicmF3U2Vjb25kIiwicGFyc2VkIiwibnVtZXJpY01hdGNoIiwiZGlyZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/parseKstDate.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase-admin.ts":
/*!*******************************!*\
  !*** ./lib/supabase-admin.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/index.mjs\");\n/**\r\n * lib/supabase-admin.ts\r\n * 서버 사이드 Supabase 클라이언트 (Service Role Key)\r\n */ \nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(process.env.SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UtYWRtaW4udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7O0NBR0MsR0FDb0Q7QUFFOUMsTUFBTUMsZ0JBQWdCRCxtRUFBWUEsQ0FDdkNFLFFBQVFDLEdBQUcsQ0FBQ0MsWUFBWSxFQUN4QkYsUUFBUUMsR0FBRyxDQUFDRSx5QkFBeUIsRUFDckMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYWRlcy1mYW5hcHAvLi9saWIvc3VwYWJhc2UtYWRtaW4udHM/Mzc5MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogbGliL3N1cGFiYXNlLWFkbWluLnRzXHJcbiAqIOyEnOuyhCDsgqzsnbTrk5wgU3VwYWJhc2Ug7YG065287J207Ja47Yq4IChTZXJ2aWNlIFJvbGUgS2V5KVxyXG4gKi9cclxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSBcIkBzdXBhYmFzZS9zdXBhYmFzZS1qc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlQWRtaW4gPSBjcmVhdGVDbGllbnQoXHJcbiAgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfVVJMISxcclxuICBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIVxyXG4pO1xyXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VBZG1pbiIsInByb2Nlc3MiLCJlbnYiLCJTVVBBQkFTRV9VUkwiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase-admin.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvotes%2Froute&page=%2Fapi%2Fvotes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvotes%2Froute.ts&appDir=C%3A%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();