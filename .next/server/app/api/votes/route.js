"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/votes/route";
exports.ids = ["app/api/votes/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvotes%2Froute&page=%2Fapi%2Fvotes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvotes%2Froute.ts&appDir=C%3A%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvotes%2Froute&page=%2Fapi%2Fvotes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvotes%2Froute.ts&appDir=C%3A%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_hades_fanapp_app_api_votes_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/votes/route.ts */ \"(rsc)/./app/api/votes/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/votes/route\",\n        pathname: \"/api/votes\",\n        filename: \"route\",\n        bundlePath: \"app/api/votes/route\"\n    },\n    resolvedPagePath: \"C:\\\\hades-fanapp\\\\app\\\\api\\\\votes\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_hades_fanapp_app_api_votes_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/votes/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ2b3RlcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdm90ZXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ2b3RlcyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDaGFkZXMtZmFuYXBwJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDaGFkZXMtZmFuYXBwJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNMO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFkZXMtZmFuYXBwLz9kNGJiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXGhhZGVzLWZhbmFwcFxcXFxhcHBcXFxcYXBpXFxcXHZvdGVzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS92b3Rlcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3ZvdGVzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS92b3Rlcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXGhhZGVzLWZhbmFwcFxcXFxhcHBcXFxcYXBpXFxcXHZvdGVzXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS92b3Rlcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvotes%2Froute&page=%2Fapi%2Fvotes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvotes%2Froute.ts&appDir=C%3A%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/votes/route.ts":
/*!********************************!*\
  !*** ./app/api/votes/route.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   revalidate: () => (/* binding */ revalidate)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_parseKstDate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/parseKstDate */ \"(rsc)/./lib/parseKstDate.ts\");\n/* harmony import */ var _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/supabase-admin */ \"(rsc)/./lib/supabase-admin.ts\");\n\n\n\nconst dynamic = \"force-dynamic\";\nconst revalidate = 0;\nconst FALLBACK_CSV_URL = \"https://docs.google.com/spreadsheets/d/e/2PACX-1vRPX-EvmCuv7Dk_ozK2PhR0VmxW94s3-bZkY5Kou8FMXBR7f4indzBJ5GayAwv_VurZa0Dsp7SsrnBL/pub?gid=0&single=true&output=csv\";\nconst PLATFORM_LABELS = {\n    idolchamp: \"아이돌챔프\",\n    mubeat: \"뮤빗\",\n    upick: \"유픽\",\n    fancast: \"팬캐스트\",\n    fanplus: \"팬플러스\",\n    podoal: \"포도알\",\n    whosfan: \"후즈팬\",\n    duckad: \"덕애드\",\n    \"10asia\": \"텐아시아\",\n    muniverse: \"뮤니버스\",\n    my1pick: \"마이원픽\",\n    mnetplus: \"엠넷플러스\",\n    fannstar: \"팬앤스타\",\n    higher: \"하이어\",\n    ktopstar: \"K탑스타\"\n};\nconst REQUEST_TIMEOUT_MS = 4500;\n// 동시 요청 1회로 합치기\nlet inFlightRequest = null;\n// CSV polling 간격(기존 30초 유지)\nconst MIN_REFRESH_MS = 30000;\n// 현재 API가 노출하는 안정 스냅샷\nlet lastGoodVotes = null;\nlet lastFetchedAt = 0;\nfunction withCacheBusting(url) {\n    const bucket = Math.floor(Date.now() / MIN_REFRESH_MS);\n    try {\n        const parsed = new URL(url);\n        parsed.searchParams.set(\"_cb\", String(bucket));\n        return parsed.toString();\n    } catch  {\n        const separator = url.includes(\"?\") ? \"&\" : \"?\";\n        return `${url}${separator}_cb=${bucket}`;\n    }\n}\nfunction normalizeBoolean(value) {\n    const normalized = value.trim().toLowerCase();\n    return normalized === \"true\" || normalized === \"1\" || normalized === \"yes\";\n}\nfunction normalizePlatform(platform) {\n    return platform.trim().toLowerCase();\n}\nfunction normalizeVoteUrl(url) {\n    return url.trim();\n}\nfunction voteIdentityKey(platform, url) {\n    return `${normalizePlatform(platform)}|${normalizeVoteUrl(url)}`.toLowerCase();\n}\nfunction parsePlatforms(platformsRaw) {\n    const normalized = platformsRaw.replace(/[|,/]/g, \" \").replace(/\\s+/g, \" \").trim();\n    const unique = new Set();\n    normalized.split(\" \").map((value)=>normalizePlatform(value)).filter(Boolean).forEach((platform)=>unique.add(platform));\n    if (unique.size === 0) {\n        return [\n            \"etc\"\n        ];\n    }\n    return Array.from(unique);\n}\nfunction labelForPlatform(platform) {\n    const key = normalizePlatform(platform);\n    return PLATFORM_LABELS[key] ?? \"기타\";\n}\nfunction isInProgressKeyword(value) {\n    const normalized = value.replace(/\\s+/g, \"\").toLowerCase();\n    return normalized === \"진행중\";\n}\nfunction parseDateKst(rawValue) {\n    if (!rawValue) return null;\n    const value = rawValue.trim();\n    if (!value || isInProgressKeyword(value)) return null;\n    return (0,_lib_parseKstDate__WEBPACK_IMPORTED_MODULE_1__.parseKstDate)(value);\n}\nfunction isExpired(closesAt) {\n    const date = parseDateKst(closesAt);\n    if (!date) return false;\n    return date.getTime() <= Date.now();\n}\nfunction hashToVoteId(raw) {\n    let hash = 0;\n    for(let i = 0; i < raw.length; i += 1){\n        hash = hash * 31 + raw.charCodeAt(i) >>> 0;\n    }\n    return `vote-${hash.toString(36)}`;\n}\nfunction createStableId(row) {\n    return hashToVoteId(voteIdentityKey(row.platform ?? \"\", row.url ?? \"\"));\n}\nfunction createLegacyStableId(row) {\n    const legacyRaw = [\n        normalizePlatform(row.platform ?? \"\"),\n        row.title?.trim() ?? \"\",\n        row.url?.trim() ?? \"\",\n        row.opensAt?.trim() ?? \"\",\n        row.closesAt?.trim() ?? \"\"\n    ].join(\"|\");\n    return hashToVoteId(legacyRaw);\n}\nfunction parseCsvLine(line) {\n    const values = [];\n    let current = \"\";\n    let inQuotes = false;\n    for(let i = 0; i < line.length; i += 1){\n        const char = line[i];\n        const nextChar = line[i + 1];\n        if (char === '\"') {\n            if (inQuotes && nextChar === '\"') {\n                current += '\"';\n                i += 1;\n            } else {\n                inQuotes = !inQuotes;\n            }\n            continue;\n        }\n        if (char === \",\" && !inQuotes) {\n            values.push(current.trim());\n            current = \"\";\n            continue;\n        }\n        current += char;\n    }\n    values.push(current.trim());\n    return values;\n}\nfunction parseCsv(content) {\n    const lines = content.split(/\\r?\\n/).map((line)=>line.trim()).filter((line)=>line.length > 0);\n    if (lines.length <= 1) {\n        return [];\n    }\n    const [headerLine, ...rows] = lines;\n    const headers = parseCsvLine(headerLine);\n    return rows.map((line)=>{\n        const values = parseCsvLine(line);\n        const record = {};\n        headers.forEach((header, index)=>{\n            record[header] = values[index] ?? \"\";\n        });\n        return record;\n    });\n}\nfunction uniqueVotes(votes) {\n    const seen = new Set();\n    return votes.filter((vote)=>{\n        const key = `${vote.platform}|${vote.title}|${vote.url}|${vote.closesAt ?? \"\"}`.toLowerCase();\n        if (seen.has(key)) return false;\n        seen.add(key);\n        return true;\n    });\n}\nasync function fetchVotesCsv(csvUrl) {\n    const controller = new AbortController();\n    const timeout = setTimeout(()=>controller.abort(), REQUEST_TIMEOUT_MS);\n    const cacheBustedUrl = withCacheBusting(csvUrl);\n    try {\n        const response = await fetch(cacheBustedUrl, {\n            cache: \"no-store\",\n            next: {\n                revalidate: 0\n            },\n            headers: {\n                Accept: \"text/csv,*/*;q=0.9\",\n                \"Cache-Control\": \"no-cache\",\n                Pragma: \"no-cache\"\n            },\n            signal: controller.signal\n        });\n        if (!response.ok) {\n            throw new Error(`Failed to fetch votes csv: ${response.status}`);\n        }\n        return response.text();\n    } finally{\n        clearTimeout(timeout);\n    }\n}\nasync function fetchLatestVotes() {\n    const csvUrl = process.env.VOTES_SHEET_CSV_URL ?? FALLBACK_CSV_URL;\n    const csv = await fetchVotesCsv(csvUrl);\n    const parsedRows = parseCsv(csv);\n    const fetchedVotes = parsedRows.filter((row)=>normalizeBoolean(row.enabled ?? \"\")).filter((row)=>!isExpired(row.closesAt ?? \"\")).map((row)=>{\n        const platforms = parsePlatforms(row.platform ?? \"\");\n        const rawOpensAt = row.opensAt?.trim() ?? \"\";\n        const openDate = parseDateKst(rawOpensAt);\n        const closeDate = parseDateKst(row.closesAt ?? \"\");\n        return {\n            id: createStableId(row),\n            legacyId: createLegacyStableId(row),\n            title: row.title?.trim() ?? \"\",\n            platform: platforms[0],\n            platformLabel: labelForPlatform(platforms[0]),\n            platforms,\n            platformLabels: platforms.map(labelForPlatform),\n            url: row.url?.trim() ?? \"\",\n            opensAt: isInProgressKeyword(rawOpensAt) ? \"진행중\" : openDate ? openDate.toISOString() : undefined,\n            closesAt: closeDate ? closeDate.toISOString() : undefined,\n            note: row.note?.trim() || undefined\n        };\n    }).filter((vote)=>vote.title && vote.url);\n    return uniqueVotes(fetchedVotes);\n}\n// 30초 polling + inFlight 공유 + 실패 폴백 + 전체 즉시 반영(삭제 포함)\nasync function loadVotesFromSheet() {\n    const now = Date.now();\n    if (lastGoodVotes && now - lastFetchedAt < MIN_REFRESH_MS) {\n        return lastGoodVotes;\n    }\n    if (inFlightRequest) {\n        return inFlightRequest;\n    }\n    inFlightRequest = (async ()=>{\n        const fetchedVotes = await fetchLatestVotes();\n        lastGoodVotes = fetchedVotes;\n        lastFetchedAt = Date.now();\n        return fetchedVotes;\n    })();\n    try {\n        return await inFlightRequest;\n    } catch  {\n        if (lastGoodVotes) return lastGoodVotes;\n        return [];\n    } finally{\n        inFlightRequest = null;\n    }\n}\nasync function loadVotesFromSupabase() {\n    try {\n        const { data, error } = await _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_2__.supabaseAdmin.from(\"votes\").select(\"*\").eq(\"enabled\", true);\n        if (error || !data) return null;\n        // 활성 투표 0건은 정상 상태 — null(=Sheet 폴백) 대신 빈 배열 반환\n        if (data.length === 0) return [];\n        const now = Date.now();\n        const items = data.filter((row)=>{\n            if (!row.closes_at) return true;\n            const d = (0,_lib_parseKstDate__WEBPACK_IMPORTED_MODULE_1__.parseKstDate)(row.closes_at);\n            if (!d) return true;\n            return d.getTime() > now;\n        }).map((row)=>{\n            const platforms = parsePlatforms(row.platform ?? \"\");\n            const openDate = parseDateKst(row.opens_at ?? \"\");\n            const closeDate = parseDateKst(row.closes_at ?? \"\");\n            const rawOpensAt = row.opens_at?.trim() ?? \"\";\n            // Supabase UUID를 기본 ID로 사용 — 고유하고 수정해도 불변\n            // legacyId에 기존 해시를 넣어 이전 cron 상태와 호환\n            const legacyHash = hashToVoteId(voteIdentityKey(row.platform ?? \"\", row.url ?? \"\"));\n            return {\n                id: row.id,\n                legacyId: legacyHash,\n                title: row.title?.trim() ?? \"\",\n                platform: platforms[0],\n                platformLabel: labelForPlatform(platforms[0]),\n                platforms,\n                platformLabels: platforms.map(labelForPlatform),\n                url: row.url?.trim() ?? \"\",\n                opensAt: isInProgressKeyword(rawOpensAt) ? \"진행중\" : openDate ? openDate.toISOString() : undefined,\n                closesAt: closeDate ? closeDate.toISOString() : undefined,\n                note: row.note?.trim() || undefined\n            };\n        }).filter((v)=>v.title);\n        return uniqueVotes(items);\n    } catch  {\n        return null;\n    }\n}\nasync function GET() {\n    const NO_CACHE = {\n        \"Cache-Control\": \"no-store, no-cache, must-revalidate, max-age=0\",\n        Pragma: \"no-cache\",\n        Expires: \"0\"\n    };\n    try {\n        const votes = await loadVotesFromSupabase();\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(votes ?? [], {\n            headers: NO_CACHE\n        });\n    } catch  {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json([], {\n            status: 200,\n            headers: NO_CACHE\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU9ILElBQUlHLEtBQUssRUFBRXZDLFVBQVU7Z0JBQzVCRyxVQUFVeUYsU0FBUyxDQUFDLEVBQUU7Z0JBQ3RCTSxlQUFlOUUsaUJBQWlCd0UsU0FBUyxDQUFDLEVBQUU7Z0JBQzVDQTtnQkFDQU8sZ0JBQWdCUCxVQUFVaEYsR0FBRyxDQUFDUTtnQkFDOUJyQyxLQUFLcUQsSUFBSXJELEdBQUcsRUFBRWlCLFVBQVU7Z0JBQ3hCd0MsU0FBU2xCLG9CQUFvQnVFLGNBQ3pCLFFBQ0FDLFdBQ0FBLFNBQVNNLFdBQVcsS0FDcEJDO2dCQUNKM0UsVUFBVXFFLFlBQVlBLFVBQVVLLFdBQVcsS0FBS0M7Z0JBQ2hEQyxNQUFNbEUsSUFBSWtFLElBQUksRUFBRXRHLFVBQVVxRztZQUM1QjtRQUNGLEdBQ0N4RixNQUFNLENBQUMsQ0FBQ3FHLElBQU1BLEVBQUUzRSxLQUFLO1FBRXhCLE9BQU9vQixZQUFZa0Q7SUFDckIsRUFBRSxPQUFNO1FBQ04sT0FBTztJQUNUO0FBQ0Y7QUFFTyxlQUFlTTtJQUNwQixNQUFNQyxXQUFXO1FBQ2YsaUJBQWlCO1FBQ2pCdkMsUUFBUTtRQUNSd0MsU0FBUztJQUNYO0lBRUEsSUFBSTtRQUNGLE1BQU16RCxRQUFRLE1BQU00QztRQUNwQixPQUFPcEoscURBQVlBLENBQUNrSyxJQUFJLENBQUMxRCxTQUFTLEVBQUUsRUFBRTtZQUFFTCxTQUFTNkQ7UUFBUztJQUM1RCxFQUFFLE9BQU07UUFDTixPQUFPaEsscURBQVlBLENBQUNrSyxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQUVyQyxRQUFRO1lBQUsxQixTQUFTNkQ7UUFBUztJQUNoRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFkZXMtZmFuYXBwLy4vYXBwL2FwaS92b3Rlcy9yb3V0ZS50cz83NTA0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5pbXBvcnQgeyBwYXJzZUtzdERhdGUgfSBmcm9tIFwiQC9saWIvcGFyc2VLc3REYXRlXCI7XHJcbmltcG9ydCB7IHN1cGFiYXNlQWRtaW4gfSBmcm9tIFwiQC9saWIvc3VwYWJhc2UtYWRtaW5cIjtcclxuXHJcbmV4cG9ydCBjb25zdCBkeW5hbWljID0gXCJmb3JjZS1keW5hbWljXCI7XHJcbmV4cG9ydCBjb25zdCByZXZhbGlkYXRlID0gMDtcclxuXHJcbnR5cGUgVm90ZVBsYXRmb3JtID1cclxuICB8IFwiaWRvbGNoYW1wXCJcclxuICB8IFwibXViZWF0XCJcclxuICB8IFwidXBpY2tcIlxyXG4gIHwgXCJmYW5jYXN0XCJcclxuICB8IFwiZmFucGx1c1wiXHJcbiAgfCBcInBvZG9hbFwiXHJcbiAgfCBcIndob3NmYW5cIlxyXG4gIHwgXCJkdWNrYWRcIlxyXG4gIHwgXCIxMGFzaWFcIlxyXG4gIHwgXCJtdW5pdmVyc2VcIlxyXG4gIHwgXCJteTFwaWNrXCJcclxuICB8IFwibW5ldHBsdXNcIlxyXG4gIHwgXCJmYW5uc3RhclwiXHJcbiAgfCBcImhpZ2hlclwiXHJcbiAgfCBcImt0b3BzdGFyXCI7XHJcblxyXG50eXBlIFZvdGVSb3cgPSB7XHJcbiAgZW5hYmxlZDogc3RyaW5nO1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgcGxhdGZvcm06IHN0cmluZztcclxuICB1cmw6IHN0cmluZztcclxuICBvcGVuc0F0OiBzdHJpbmc7XHJcbiAgY2xvc2VzQXQ6IHN0cmluZztcclxuICBub3RlOiBzdHJpbmc7XHJcbn07XHJcblxyXG50eXBlIFZvdGVJdGVtID0ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgbGVnYWN5SWQ/OiBzdHJpbmc7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBwbGF0Zm9ybTogc3RyaW5nO1xyXG4gIHBsYXRmb3JtTGFiZWw6IHN0cmluZztcclxuICBwbGF0Zm9ybXM6IHN0cmluZ1tdO1xyXG4gIHBsYXRmb3JtTGFiZWxzOiBzdHJpbmdbXTtcclxuICB1cmw6IHN0cmluZztcclxuICBvcGVuc0F0Pzogc3RyaW5nO1xyXG4gIGNsb3Nlc0F0Pzogc3RyaW5nO1xyXG4gIG5vdGU/OiBzdHJpbmc7XHJcbn07XHJcblxyXG5jb25zdCBGQUxMQkFDS19DU1ZfVVJMID1cclxuICBcImh0dHBzOi8vZG9jcy5nb29nbGUuY29tL3NwcmVhZHNoZWV0cy9kL2UvMlBBQ1gtMXZSUFgtRXZtQ3V2N0RrX296SzJQaFIwVm14Vzk0czMtYlprWTVLb3U4Rk1YQlI3ZjRpbmR6Qko1R2F5QXd2X1Z1clphMERzcDdTc3JuQkwvcHViP2dpZD0wJnNpbmdsZT10cnVlJm91dHB1dD1jc3ZcIjtcclxuXHJcbmNvbnN0IFBMQVRGT1JNX0xBQkVMUzogUmVjb3JkPFZvdGVQbGF0Zm9ybSwgc3RyaW5nPiA9IHtcclxuICBpZG9sY2hhbXA6IFwi7JWE7J2064+M7LGU7ZSEXCIsXHJcbiAgbXViZWF0OiBcIuuupOu5l1wiLFxyXG4gIHVwaWNrOiBcIuycoO2UvVwiLFxyXG4gIGZhbmNhc3Q6IFwi7Yys7LqQ7Iqk7Yq4XCIsXHJcbiAgZmFucGx1czogXCLtjKztlIzrn6zsiqRcIixcclxuICBwb2RvYWw6IFwi7Y+s64+E7JWMXCIsXHJcbiAgd2hvc2ZhbjogXCLtm4TspojtjKxcIixcclxuICBkdWNrYWQ6IFwi642V7JWg65OcXCIsXHJcbiAgXCIxMGFzaWFcIjogXCLthZDslYTsi5zslYRcIixcclxuICBtdW5pdmVyc2U6IFwi666k64uI67KE7IqkXCIsXHJcbiAgbXkxcGljazogXCLrp4jsnbTsm5DtlL1cIixcclxuICBtbmV0cGx1czogXCLsl6DrhLftlIzrn6zsiqRcIixcclxuICBmYW5uc3RhcjogXCLtjKzslaTsiqTtg4BcIixcclxuICBoaWdoZXI6IFwi7ZWY7J207Ja0XCIsXHJcbiAga3RvcHN0YXI6IFwiS+2DkeyKpO2DgFwiLFxyXG59O1xyXG5cclxuY29uc3QgUkVRVUVTVF9USU1FT1VUX01TID0gNF81MDA7XHJcblxyXG4vLyDrj5nsi5wg7JqU7LKtIDHtmozroZwg7ZWp7LmY6riwXHJcbmxldCBpbkZsaWdodFJlcXVlc3Q6IFByb21pc2U8Vm90ZUl0ZW1bXT4gfCBudWxsID0gbnVsbDtcclxuXHJcbi8vIENTViBwb2xsaW5nIOqwhOqyqSjquLDsobQgMzDstIgg7Jyg7KeAKVxyXG5jb25zdCBNSU5fUkVGUkVTSF9NUyA9IDMwXzAwMDtcclxuXHJcbi8vIO2YhOyerCBBUEnqsIAg64W47Lac7ZWY64qUIOyViOyglSDsiqTrg4Xsg7dcclxubGV0IGxhc3RHb29kVm90ZXM6IFZvdGVJdGVtW10gfCBudWxsID0gbnVsbDtcclxubGV0IGxhc3RGZXRjaGVkQXQgPSAwO1xyXG5cclxuZnVuY3Rpb24gd2l0aENhY2hlQnVzdGluZyh1cmw6IHN0cmluZykge1xyXG4gIGNvbnN0IGJ1Y2tldCA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIE1JTl9SRUZSRVNIX01TKTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHBhcnNlZCA9IG5ldyBVUkwodXJsKTtcclxuICAgIHBhcnNlZC5zZWFyY2hQYXJhbXMuc2V0KFwiX2NiXCIsIFN0cmluZyhidWNrZXQpKTtcclxuICAgIHJldHVybiBwYXJzZWQudG9TdHJpbmcoKTtcclxuICB9IGNhdGNoIHtcclxuICAgIGNvbnN0IHNlcGFyYXRvciA9IHVybC5pbmNsdWRlcyhcIj9cIikgPyBcIiZcIiA6IFwiP1wiO1xyXG4gICAgcmV0dXJuIGAke3VybH0ke3NlcGFyYXRvcn1fY2I9JHtidWNrZXR9YDtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUJvb2xlYW4odmFsdWU6IHN0cmluZykge1xyXG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSB2YWx1ZS50cmltKCkudG9Mb3dlckNhc2UoKTtcclxuICByZXR1cm4gbm9ybWFsaXplZCA9PT0gXCJ0cnVlXCIgfHwgbm9ybWFsaXplZCA9PT0gXCIxXCIgfHwgbm9ybWFsaXplZCA9PT0gXCJ5ZXNcIjtcclxufVxyXG5cclxuZnVuY3Rpb24gbm9ybWFsaXplUGxhdGZvcm0ocGxhdGZvcm06IHN0cmluZykge1xyXG4gIHJldHVybiBwbGF0Zm9ybS50cmltKCkudG9Mb3dlckNhc2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbm9ybWFsaXplVm90ZVVybCh1cmw6IHN0cmluZykge1xyXG4gIHJldHVybiB1cmwudHJpbSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB2b3RlSWRlbnRpdHlLZXkocGxhdGZvcm06IHN0cmluZywgdXJsOiBzdHJpbmcpIHtcclxuICByZXR1cm4gYCR7bm9ybWFsaXplUGxhdGZvcm0ocGxhdGZvcm0pfXwke25vcm1hbGl6ZVZvdGVVcmwodXJsKX1gLnRvTG93ZXJDYXNlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlUGxhdGZvcm1zKHBsYXRmb3Jtc1Jhdzogc3RyaW5nKSB7XHJcbiAgY29uc3Qgbm9ybWFsaXplZCA9IHBsYXRmb3Jtc1Jhd1xyXG4gICAgLnJlcGxhY2UoL1t8LC9dL2csIFwiIFwiKVxyXG4gICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpXHJcbiAgICAudHJpbSgpO1xyXG5cclxuICBjb25zdCB1bmlxdWUgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICBub3JtYWxpemVkXHJcbiAgICAuc3BsaXQoXCIgXCIpXHJcbiAgICAubWFwKCh2YWx1ZSkgPT4gbm9ybWFsaXplUGxhdGZvcm0odmFsdWUpKVxyXG4gICAgLmZpbHRlcihCb29sZWFuKVxyXG4gICAgLmZvckVhY2goKHBsYXRmb3JtKSA9PiB1bmlxdWUuYWRkKHBsYXRmb3JtKSk7XHJcblxyXG4gIGlmICh1bmlxdWUuc2l6ZSA9PT0gMCkge1xyXG4gICAgcmV0dXJuIFtcImV0Y1wiXTtcclxuICB9XHJcblxyXG4gIHJldHVybiBBcnJheS5mcm9tKHVuaXF1ZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxhYmVsRm9yUGxhdGZvcm0ocGxhdGZvcm06IHN0cmluZykge1xyXG4gIGNvbnN0IGtleSA9IG5vcm1hbGl6ZVBsYXRmb3JtKHBsYXRmb3JtKSBhcyBWb3RlUGxhdGZvcm07XHJcbiAgcmV0dXJuIFBMQVRGT1JNX0xBQkVMU1trZXldID8/IFwi6riw7YOAXCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzSW5Qcm9ncmVzc0tleXdvcmQodmFsdWU6IHN0cmluZykge1xyXG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSB2YWx1ZS5yZXBsYWNlKC9cXHMrL2csIFwiXCIpLnRvTG93ZXJDYXNlKCk7XHJcbiAgcmV0dXJuIG5vcm1hbGl6ZWQgPT09IFwi7KeE7ZaJ7KSRXCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlRGF0ZUtzdChyYXdWYWx1ZTogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XHJcbiAgaWYgKCFyYXdWYWx1ZSkgcmV0dXJuIG51bGw7XHJcbiAgY29uc3QgdmFsdWUgPSByYXdWYWx1ZS50cmltKCk7XHJcbiAgaWYgKCF2YWx1ZSB8fCBpc0luUHJvZ3Jlc3NLZXl3b3JkKHZhbHVlKSkgcmV0dXJuIG51bGw7XHJcbiAgcmV0dXJuIHBhcnNlS3N0RGF0ZSh2YWx1ZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzRXhwaXJlZChjbG9zZXNBdDogc3RyaW5nKSB7XHJcbiAgY29uc3QgZGF0ZSA9IHBhcnNlRGF0ZUtzdChjbG9zZXNBdCk7XHJcbiAgaWYgKCFkYXRlKSByZXR1cm4gZmFsc2U7XHJcbiAgcmV0dXJuIGRhdGUuZ2V0VGltZSgpIDw9IERhdGUubm93KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhc2hUb1ZvdGVJZChyYXc6IHN0cmluZykge1xyXG4gIGxldCBoYXNoID0gMDtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHJhdy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgaGFzaCA9IChoYXNoICogMzEgKyByYXcuY2hhckNvZGVBdChpKSkgPj4+IDA7XHJcbiAgfVxyXG4gIHJldHVybiBgdm90ZS0ke2hhc2gudG9TdHJpbmcoMzYpfWA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVN0YWJsZUlkKHJvdzogVm90ZVJvdykge1xyXG4gIHJldHVybiBoYXNoVG9Wb3RlSWQodm90ZUlkZW50aXR5S2V5KHJvdy5wbGF0Zm9ybSA/PyBcIlwiLCByb3cudXJsID8/IFwiXCIpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlTGVnYWN5U3RhYmxlSWQocm93OiBWb3RlUm93KSB7XHJcbiAgY29uc3QgbGVnYWN5UmF3ID0gW1xyXG4gICAgbm9ybWFsaXplUGxhdGZvcm0ocm93LnBsYXRmb3JtID8/IFwiXCIpLFxyXG4gICAgcm93LnRpdGxlPy50cmltKCkgPz8gXCJcIixcclxuICAgIHJvdy51cmw/LnRyaW0oKSA/PyBcIlwiLFxyXG4gICAgcm93Lm9wZW5zQXQ/LnRyaW0oKSA/PyBcIlwiLFxyXG4gICAgcm93LmNsb3Nlc0F0Py50cmltKCkgPz8gXCJcIixcclxuICBdLmpvaW4oXCJ8XCIpO1xyXG5cclxuICByZXR1cm4gaGFzaFRvVm90ZUlkKGxlZ2FjeVJhdyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlQ3N2TGluZShsaW5lOiBzdHJpbmcpIHtcclxuICBjb25zdCB2YWx1ZXM6IHN0cmluZ1tdID0gW107XHJcbiAgbGV0IGN1cnJlbnQgPSBcIlwiO1xyXG4gIGxldCBpblF1b3RlcyA9IGZhbHNlO1xyXG5cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmUubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgIGNvbnN0IGNoYXIgPSBsaW5lW2ldO1xyXG4gICAgY29uc3QgbmV4dENoYXIgPSBsaW5lW2kgKyAxXTtcclxuXHJcbiAgICBpZiAoY2hhciA9PT0gJ1wiJykge1xyXG4gICAgICBpZiAoaW5RdW90ZXMgJiYgbmV4dENoYXIgPT09ICdcIicpIHtcclxuICAgICAgICBjdXJyZW50ICs9ICdcIic7XHJcbiAgICAgICAgaSArPSAxO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGluUXVvdGVzID0gIWluUXVvdGVzO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnRpbnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjaGFyID09PSBcIixcIiAmJiAhaW5RdW90ZXMpIHtcclxuICAgICAgdmFsdWVzLnB1c2goY3VycmVudC50cmltKCkpO1xyXG4gICAgICBjdXJyZW50ID0gXCJcIjtcclxuICAgICAgY29udGludWU7XHJcbiAgICB9XHJcblxyXG4gICAgY3VycmVudCArPSBjaGFyO1xyXG4gIH1cclxuXHJcbiAgdmFsdWVzLnB1c2goY3VycmVudC50cmltKCkpO1xyXG4gIHJldHVybiB2YWx1ZXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlQ3N2KGNvbnRlbnQ6IHN0cmluZykge1xyXG4gIGNvbnN0IGxpbmVzID0gY29udGVudFxyXG4gICAgLnNwbGl0KC9cXHI/XFxuLylcclxuICAgIC5tYXAoKGxpbmUpID0+IGxpbmUudHJpbSgpKVxyXG4gICAgLmZpbHRlcigobGluZSkgPT4gbGluZS5sZW5ndGggPiAwKTtcclxuXHJcbiAgaWYgKGxpbmVzLmxlbmd0aCA8PSAxKSB7XHJcbiAgICByZXR1cm4gW107XHJcbiAgfVxyXG5cclxuICBjb25zdCBbaGVhZGVyTGluZSwgLi4ucm93c10gPSBsaW5lcztcclxuICBjb25zdCBoZWFkZXJzID0gcGFyc2VDc3ZMaW5lKGhlYWRlckxpbmUpO1xyXG5cclxuICByZXR1cm4gcm93cy5tYXAoKGxpbmUpID0+IHtcclxuICAgIGNvbnN0IHZhbHVlcyA9IHBhcnNlQ3N2TGluZShsaW5lKTtcclxuICAgIGNvbnN0IHJlY29yZDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xyXG5cclxuICAgIGhlYWRlcnMuZm9yRWFjaCgoaGVhZGVyLCBpbmRleCkgPT4ge1xyXG4gICAgICByZWNvcmRbaGVhZGVyXSA9IHZhbHVlc1tpbmRleF0gPz8gXCJcIjtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiByZWNvcmQgYXMgVm90ZVJvdztcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gdW5pcXVlVm90ZXModm90ZXM6IFZvdGVJdGVtW10pIHtcclxuICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcbiAgcmV0dXJuIHZvdGVzLmZpbHRlcigodm90ZSkgPT4ge1xyXG4gICAgY29uc3Qga2V5ID0gYCR7dm90ZS5wbGF0Zm9ybX18JHt2b3RlLnRpdGxlfXwke3ZvdGUudXJsfXwke3ZvdGUuY2xvc2VzQXQgPz8gXCJcIn1gLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAoc2Vlbi5oYXMoa2V5KSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgc2Vlbi5hZGQoa2V5KTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0pO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBmZXRjaFZvdGVzQ3N2KGNzdlVybDogc3RyaW5nKSB7XHJcbiAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIFJFUVVFU1RfVElNRU9VVF9NUyk7XHJcbiAgY29uc3QgY2FjaGVCdXN0ZWRVcmwgPSB3aXRoQ2FjaGVCdXN0aW5nKGNzdlVybCk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGNhY2hlQnVzdGVkVXJsLCB7XHJcbiAgICAgIGNhY2hlOiBcIm5vLXN0b3JlXCIsXHJcbiAgICAgIG5leHQ6IHsgcmV2YWxpZGF0ZTogMCB9LFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgQWNjZXB0OiBcInRleHQvY3N2LCovKjtxPTAuOVwiLFxyXG4gICAgICAgIFwiQ2FjaGUtQ29udHJvbFwiOiBcIm5vLWNhY2hlXCIsXHJcbiAgICAgICAgUHJhZ21hOiBcIm5vLWNhY2hlXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWwsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHZvdGVzIGNzdjogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcclxuICB9IGZpbmFsbHkge1xyXG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hMYXRlc3RWb3RlcygpIHtcclxuICBjb25zdCBjc3ZVcmwgPSBwcm9jZXNzLmVudi5WT1RFU19TSEVFVF9DU1ZfVVJMID8/IEZBTExCQUNLX0NTVl9VUkw7XHJcbiAgY29uc3QgY3N2ID0gYXdhaXQgZmV0Y2hWb3Rlc0Nzdihjc3ZVcmwpO1xyXG4gIGNvbnN0IHBhcnNlZFJvd3MgPSBwYXJzZUNzdihjc3YpO1xyXG5cclxuICBjb25zdCBmZXRjaGVkVm90ZXMgPSBwYXJzZWRSb3dzXHJcbiAgICAuZmlsdGVyKChyb3cpID0+IG5vcm1hbGl6ZUJvb2xlYW4ocm93LmVuYWJsZWQgPz8gXCJcIikpXHJcbiAgICAuZmlsdGVyKChyb3cpID0+ICFpc0V4cGlyZWQocm93LmNsb3Nlc0F0ID8/IFwiXCIpKVxyXG4gICAgLm1hcCgocm93KSA9PiB7XHJcbiAgICAgIGNvbnN0IHBsYXRmb3JtcyA9IHBhcnNlUGxhdGZvcm1zKHJvdy5wbGF0Zm9ybSA/PyBcIlwiKTtcclxuICAgICAgY29uc3QgcmF3T3BlbnNBdCA9IHJvdy5vcGVuc0F0Py50cmltKCkgPz8gXCJcIjtcclxuICAgICAgY29uc3Qgb3BlbkRhdGUgPSBwYXJzZURhdGVLc3QocmF3T3BlbnNBdCk7XHJcbiAgICAgIGNvbnN0IGNsb3NlRGF0ZSA9IHBhcnNlRGF0ZUtzdChyb3cuY2xvc2VzQXQgPz8gXCJcIik7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGlkOiBjcmVhdGVTdGFibGVJZChyb3cpLFxyXG4gICAgICAgIGxlZ2FjeUlkOiBjcmVhdGVMZWdhY3lTdGFibGVJZChyb3cpLFxyXG4gICAgICAgIHRpdGxlOiByb3cudGl0bGU/LnRyaW0oKSA/PyBcIlwiLFxyXG4gICAgICAgIHBsYXRmb3JtOiBwbGF0Zm9ybXNbMF0sXHJcbiAgICAgICAgcGxhdGZvcm1MYWJlbDogbGFiZWxGb3JQbGF0Zm9ybShwbGF0Zm9ybXNbMF0pLFxyXG4gICAgICAgIHBsYXRmb3JtcyxcclxuICAgICAgICBwbGF0Zm9ybUxhYmVsczogcGxhdGZvcm1zLm1hcChsYWJlbEZvclBsYXRmb3JtKSxcclxuICAgICAgICB1cmw6IHJvdy51cmw/LnRyaW0oKSA/PyBcIlwiLFxyXG4gICAgICAgIG9wZW5zQXQ6IGlzSW5Qcm9ncmVzc0tleXdvcmQocmF3T3BlbnNBdClcclxuICAgICAgICAgID8gXCLsp4TtlonspJFcIlxyXG4gICAgICAgICAgOiBvcGVuRGF0ZVxyXG4gICAgICAgICAgPyBvcGVuRGF0ZS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICA6IHVuZGVmaW5lZCxcclxuICAgICAgICBjbG9zZXNBdDogY2xvc2VEYXRlID8gY2xvc2VEYXRlLnRvSVNPU3RyaW5nKCkgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgbm90ZTogcm93Lm5vdGU/LnRyaW0oKSB8fCB1bmRlZmluZWQsXHJcbiAgICAgIH0gYXMgVm90ZUl0ZW07XHJcbiAgICB9KVxyXG4gICAgLmZpbHRlcigodm90ZSkgPT4gdm90ZS50aXRsZSAmJiB2b3RlLnVybCk7XHJcblxyXG4gIHJldHVybiB1bmlxdWVWb3RlcyhmZXRjaGVkVm90ZXMpO1xyXG59XHJcblxyXG4vLyAzMOy0iCBwb2xsaW5nICsgaW5GbGlnaHQg6rO17JygICsg7Iuk7YyoIO2PtOuwsSArIOyghOyytCDsponsi5wg67CY7JiBKOyCreygnCDtj6ztlagpXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRWb3Rlc0Zyb21TaGVldCgpIHtcclxuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG5cclxuICBpZiAobGFzdEdvb2RWb3RlcyAmJiBub3cgLSBsYXN0RmV0Y2hlZEF0IDwgTUlOX1JFRlJFU0hfTVMpIHtcclxuICAgIHJldHVybiBsYXN0R29vZFZvdGVzO1xyXG4gIH1cclxuXHJcbiAgaWYgKGluRmxpZ2h0UmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIGluRmxpZ2h0UmVxdWVzdDtcclxuICB9XHJcblxyXG4gIGluRmxpZ2h0UmVxdWVzdCA9IChhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBmZXRjaGVkVm90ZXMgPSBhd2FpdCBmZXRjaExhdGVzdFZvdGVzKCk7XHJcbiAgICBsYXN0R29vZFZvdGVzID0gZmV0Y2hlZFZvdGVzO1xyXG4gICAgbGFzdEZldGNoZWRBdCA9IERhdGUubm93KCk7XHJcbiAgICByZXR1cm4gZmV0Y2hlZFZvdGVzO1xyXG4gIH0pKCk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICByZXR1cm4gYXdhaXQgaW5GbGlnaHRSZXF1ZXN0O1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgaWYgKGxhc3RHb29kVm90ZXMpIHJldHVybiBsYXN0R29vZFZvdGVzO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICBpbkZsaWdodFJlcXVlc3QgPSBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gbG9hZFZvdGVzRnJvbVN1cGFiYXNlKCk6IFByb21pc2U8Vm90ZUl0ZW1bXSB8IG51bGw+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAuZnJvbShcInZvdGVzXCIpXHJcbiAgICAgIC5zZWxlY3QoXCIqXCIpXHJcbiAgICAgIC5lcShcImVuYWJsZWRcIiwgdHJ1ZSk7XHJcblxyXG4gICAgaWYgKGVycm9yIHx8ICFkYXRhKSByZXR1cm4gbnVsbDtcclxuICAgIC8vIO2ZnOyEsSDtiKztkZwgMOqxtOydgCDsoJXsg4Eg7IOB7YOcIOKAlCBudWxsKD1TaGVldCDtj7TrsLEpIOuMgOyLoCDruYgg67Cw7Je0IOuwmO2ZmFxyXG4gICAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSByZXR1cm4gW107XHJcblxyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIGNvbnN0IGl0ZW1zID0gZGF0YVxyXG4gICAgICAuZmlsdGVyKChyb3cpID0+IHtcclxuICAgICAgICBpZiAoIXJvdy5jbG9zZXNfYXQpIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGNvbnN0IGQgPSBwYXJzZUtzdERhdGUocm93LmNsb3Nlc19hdCk7XHJcbiAgICAgICAgaWYgKCFkKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gZC5nZXRUaW1lKCkgPiBub3c7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5tYXAoKHJvdykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBsYXRmb3JtcyA9IHBhcnNlUGxhdGZvcm1zKHJvdy5wbGF0Zm9ybSA/PyBcIlwiKTtcclxuICAgICAgICBjb25zdCBvcGVuRGF0ZSA9IHBhcnNlRGF0ZUtzdChyb3cub3BlbnNfYXQgPz8gXCJcIik7XHJcbiAgICAgICAgY29uc3QgY2xvc2VEYXRlID0gcGFyc2VEYXRlS3N0KHJvdy5jbG9zZXNfYXQgPz8gXCJcIik7XHJcbiAgICAgICAgY29uc3QgcmF3T3BlbnNBdCA9IHJvdy5vcGVuc19hdD8udHJpbSgpID8/IFwiXCI7XHJcbiAgICAgICAgLy8gU3VwYWJhc2UgVVVJROulvCDquLDrs7ggSUTroZwg7IKs7JqpIOKAlCDqs6DsnKDtlZjqs6Ag7IiY7KCV7ZW064+EIOu2iOuzgFxyXG4gICAgICAgIC8vIGxlZ2FjeUlk7JeQIOq4sOyhtCDtlbTsi5zrpbwg64Sj7Ja0IOydtOyghCBjcm9uIOyDge2DnOyZgCDtmLjtmZhcclxuICAgICAgICBjb25zdCBsZWdhY3lIYXNoID0gaGFzaFRvVm90ZUlkKHZvdGVJZGVudGl0eUtleShyb3cucGxhdGZvcm0gPz8gXCJcIiwgcm93LnVybCA/PyBcIlwiKSk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGlkOiByb3cuaWQsXHJcbiAgICAgICAgICBsZWdhY3lJZDogbGVnYWN5SGFzaCxcclxuICAgICAgICAgIHRpdGxlOiByb3cudGl0bGU/LnRyaW0oKSA/PyBcIlwiLFxyXG4gICAgICAgICAgcGxhdGZvcm06IHBsYXRmb3Jtc1swXSxcclxuICAgICAgICAgIHBsYXRmb3JtTGFiZWw6IGxhYmVsRm9yUGxhdGZvcm0ocGxhdGZvcm1zWzBdKSxcclxuICAgICAgICAgIHBsYXRmb3JtcyxcclxuICAgICAgICAgIHBsYXRmb3JtTGFiZWxzOiBwbGF0Zm9ybXMubWFwKGxhYmVsRm9yUGxhdGZvcm0pLFxyXG4gICAgICAgICAgdXJsOiByb3cudXJsPy50cmltKCkgPz8gXCJcIixcclxuICAgICAgICAgIG9wZW5zQXQ6IGlzSW5Qcm9ncmVzc0tleXdvcmQocmF3T3BlbnNBdClcclxuICAgICAgICAgICAgPyBcIuynhO2WieykkVwiXHJcbiAgICAgICAgICAgIDogb3BlbkRhdGVcclxuICAgICAgICAgICAgPyBvcGVuRGF0ZS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgY2xvc2VzQXQ6IGNsb3NlRGF0ZSA/IGNsb3NlRGF0ZS50b0lTT1N0cmluZygpIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgbm90ZTogcm93Lm5vdGU/LnRyaW0oKSB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgfSBhcyBWb3RlSXRlbTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbHRlcigodikgPT4gdi50aXRsZSk7XHJcblxyXG4gICAgcmV0dXJuIHVuaXF1ZVZvdGVzKGl0ZW1zKTtcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcclxuICBjb25zdCBOT19DQUNIRSA9IHtcclxuICAgIFwiQ2FjaGUtQ29udHJvbFwiOiBcIm5vLXN0b3JlLCBuby1jYWNoZSwgbXVzdC1yZXZhbGlkYXRlLCBtYXgtYWdlPTBcIixcclxuICAgIFByYWdtYTogXCJuby1jYWNoZVwiLFxyXG4gICAgRXhwaXJlczogXCIwXCIsXHJcbiAgfTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHZvdGVzID0gYXdhaXQgbG9hZFZvdGVzRnJvbVN1cGFiYXNlKCk7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24odm90ZXMgPz8gW10sIHsgaGVhZGVyczogTk9fQ0FDSEUgfSk7XHJcbiAgfSBjYXRjaCB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oW10sIHsgc3RhdHVzOiAyMDAsIGhlYWRlcnM6IE5PX0NBQ0hFIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicGFyc2VLc3REYXRlIiwic3VwYWJhc2VBZG1pbiIsImR5bmFtaWMiLCJyZXZhbGlkYXRlIiwiRkFMTEJBQ0tfQ1NWX1VSTCIsIlBMQVRGT1JNX0xBQkVMUyIsImlkb2xjaGFtcCIsIm11YmVhdCIsInVwaWNrIiwiZmFuY2FzdCIsImZhbnBsdXMiLCJwb2RvYWwiLCJ3aG9zZmFuIiwiZHVja2FkIiwibXVuaXZlcnNlIiwibXkxcGljayIsIm1uZXRwbHVzIiwiZmFubnN0YXIiLCJoaWdoZXIiLCJrdG9wc3RhciIsIlJFUVVFU1RfVElNRU9VVF9NUyIsImluRmxpZ2h0UmVxdWVzdCIsIk1JTl9SRUZSRVNIX01TIiwibGFzdEdvb2RWb3RlcyIsImxhc3RGZXRjaGVkQXQiLCJ3aXRoQ2FjaGVCdXN0aW5nIiwidXJsIiwiYnVja2V0IiwiTWF0aCIsImZsb29yIiwiRGF0ZSIsIm5vdyIsInBhcnNlZCIsIlVSTCIsInNlYXJjaFBhcmFtcyIsInNldCIsIlN0cmluZyIsInRvU3RyaW5nIiwic2VwYXJhdG9yIiwiaW5jbHVkZXMiLCJub3JtYWxpemVCb29sZWFuIiwidmFsdWUiLCJub3JtYWxpemVkIiwidHJpbSIsInRvTG93ZXJDYXNlIiwibm9ybWFsaXplUGxhdGZvcm0iLCJwbGF0Zm9ybSIsIm5vcm1hbGl6ZVZvdGVVcmwiLCJ2b3RlSWRlbnRpdHlLZXkiLCJwYXJzZVBsYXRmb3JtcyIsInBsYXRmb3Jtc1JhdyIsInJlcGxhY2UiLCJ1bmlxdWUiLCJTZXQiLCJzcGxpdCIsIm1hcCIsImZpbHRlciIsIkJvb2xlYW4iLCJmb3JFYWNoIiwiYWRkIiwic2l6ZSIsIkFycmF5IiwiZnJvbSIsImxhYmVsRm9yUGxhdGZvcm0iLCJrZXkiLCJpc0luUHJvZ3Jlc3NLZXl3b3JkIiwicGFyc2VEYXRlS3N0IiwicmF3VmFsdWUiLCJpc0V4cGlyZWQiLCJjbG9zZXNBdCIsImRhdGUiLCJnZXRUaW1lIiwiaGFzaFRvVm90ZUlkIiwicmF3IiwiaGFzaCIsImkiLCJsZW5ndGgiLCJjaGFyQ29kZUF0IiwiY3JlYXRlU3RhYmxlSWQiLCJyb3ciLCJjcmVhdGVMZWdhY3lTdGFibGVJZCIsImxlZ2FjeVJhdyIsInRpdGxlIiwib3BlbnNBdCIsImpvaW4iLCJwYXJzZUNzdkxpbmUiLCJsaW5lIiwidmFsdWVzIiwiY3VycmVudCIsImluUXVvdGVzIiwiY2hhciIsIm5leHRDaGFyIiwicHVzaCIsInBhcnNlQ3N2IiwiY29udGVudCIsImxpbmVzIiwiaGVhZGVyTGluZSIsInJvd3MiLCJoZWFkZXJzIiwicmVjb3JkIiwiaGVhZGVyIiwiaW5kZXgiLCJ1bmlxdWVWb3RlcyIsInZvdGVzIiwic2VlbiIsInZvdGUiLCJoYXMiLCJmZXRjaFZvdGVzQ3N2IiwiY3N2VXJsIiwiY29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsInRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiYWJvcnQiLCJjYWNoZUJ1c3RlZFVybCIsInJlc3BvbnNlIiwiZmV0Y2giLCJjYWNoZSIsIm5leHQiLCJBY2NlcHQiLCJQcmFnbWEiLCJzaWduYWwiLCJvayIsIkVycm9yIiwic3RhdHVzIiwidGV4dCIsImNsZWFyVGltZW91dCIsImZldGNoTGF0ZXN0Vm90ZXMiLCJwcm9jZXNzIiwiZW52IiwiVk9URVNfU0hFRVRfQ1NWX1VSTCIsImNzdiIsInBhcnNlZFJvd3MiLCJmZXRjaGVkVm90ZXMiLCJlbmFibGVkIiwicGxhdGZvcm1zIiwicmF3T3BlbnNBdCIsIm9wZW5EYXRlIiwiY2xvc2VEYXRlIiwiaWQiLCJsZWdhY3lJZCIsInBsYXRmb3JtTGFiZWwiLCJwbGF0Zm9ybUxhYmVscyIsInRvSVNPU3RyaW5nIiwidW5kZWZpbmVkIiwibm90ZSIsImxvYWRWb3Rlc0Zyb21TaGVldCIsImxvYWRWb3Rlc0Zyb21TdXBhYmFzZSIsImRhdGEiLCJlcnJvciIsInNlbGVjdCIsImVxIiwiaXRlbXMiLCJjbG9zZXNfYXQiLCJkIiwib3BlbnNfYXQiLCJsZWdhY3lIYXNoIiwidiIsIkdFVCIsIk5PX0NBQ0hFIiwiRXhwaXJlcyIsImpzb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/votes/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/parseKstDate.ts":
/*!*****************************!*\
  !*** ./lib/parseKstDate.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseKstDate: () => (/* binding */ parseKstDate)\n/* harmony export */ });\nconst EXPLICIT_TIMEZONE_RE = /(z|[+-]\\d{2}:?\\d{2})$/i;\nfunction pad2(value) {\n    return String(value).padStart(2, \"0\");\n}\nfunction parseDatePartsAsKst(datePart, hour = 0, minute = 0, second = 0) {\n    const normalizedDate = normalizeDatePart(datePart);\n    if (!normalizedDate) return new Date(\"invalid\");\n    return new Date(`${normalizedDate}T${pad2(hour)}:${pad2(minute)}:${pad2(second)}+09:00`);\n}\nfunction normalizeDatePart(datePart) {\n    const [year, month, day] = datePart.split(\"-\");\n    if (!year || !month || !day) return null;\n    return `${year}-${pad2(month)}-${pad2(day)}`;\n}\nfunction parseKstDate(value) {\n    if (!value) return null;\n    const raw = value.trim();\n    if (!raw || raw.replace(/\\s+/g, \"\") === \"진행중\") return null;\n    if (EXPLICIT_TIMEZONE_RE.test(raw)) {\n        const explicit = new Date(raw);\n        return Number.isNaN(explicit.getTime()) ? null : explicit;\n    }\n    const normalized = raw.replace(/\\./g, \"-\").replace(/\\//g, \"-\").replace(/\\s*-\\s*/g, \"-\").replace(/\\s+/g, \" \").trim();\n    const amPmMatch = normalized.match(/^(\\d{4}-\\d{1,2}-\\d{1,2})\\s*(오전|오후)\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?$/);\n    if (amPmMatch) {\n        const [, datePart, amPm, rawHour, rawMinute, rawSecond] = amPmMatch;\n        let hour = Number(rawHour);\n        if (amPm === \"오전\" && hour === 12) hour = 0;\n        if (amPm === \"오후\" && hour < 12) hour += 12;\n        const parsed = parseDatePartsAsKst(datePart, hour, Number(rawMinute), Number(rawSecond ?? \"0\"));\n        return Number.isNaN(parsed.getTime()) ? null : parsed;\n    }\n    const numericMatch = normalized.match(/^(\\d{4}-\\d{1,2}-\\d{1,2})(?:\\s+(\\d{1,2})(?::(\\d{1,2}))?(?::(\\d{1,2}))?)?$/);\n    if (numericMatch) {\n        const [, datePart, rawHour, rawMinute, rawSecond] = numericMatch;\n        const parsed = parseDatePartsAsKst(datePart, Number(rawHour ?? \"0\"), Number(rawMinute ?? \"0\"), Number(rawSecond ?? \"0\"));\n        return Number.isNaN(parsed.getTime()) ? null : parsed;\n    }\n    const direct = new Date(raw);\n    return Number.isNaN(direct.getTime()) ? null : direct;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcGFyc2VLc3REYXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxNQUFNQSx1QkFBdUI7QUFFN0IsU0FBU0MsS0FBS0MsS0FBc0I7SUFDbEMsT0FBT0MsT0FBT0QsT0FBT0UsUUFBUSxDQUFDLEdBQUc7QUFDbkM7QUFFQSxTQUFTQyxvQkFBb0JDLFFBQWdCLEVBQUVDLE9BQU8sQ0FBQyxFQUFFQyxTQUFTLENBQUMsRUFBRUMsU0FBUyxDQUFDO0lBQzdFLE1BQU1DLGlCQUFpQkMsa0JBQWtCTDtJQUN6QyxJQUFJLENBQUNJLGdCQUFnQixPQUFPLElBQUlFLEtBQUs7SUFDckMsT0FBTyxJQUFJQSxLQUFLLENBQUMsRUFBRUYsZUFBZSxDQUFDLEVBQUVULEtBQUtNLE1BQU0sQ0FBQyxFQUFFTixLQUFLTyxRQUFRLENBQUMsRUFBRVAsS0FBS1EsUUFBUSxNQUFNLENBQUM7QUFDekY7QUFHQSxTQUFTRSxrQkFBa0JMLFFBQWdCO0lBQ3pDLE1BQU0sQ0FBQ08sTUFBTUMsT0FBT0MsSUFBSSxHQUFHVCxTQUFTVSxLQUFLLENBQUM7SUFDMUMsSUFBSSxDQUFDSCxRQUFRLENBQUNDLFNBQVMsQ0FBQ0MsS0FBSyxPQUFPO0lBQ3BDLE9BQU8sQ0FBQyxFQUFFRixLQUFLLENBQUMsRUFBRVosS0FBS2EsT0FBTyxDQUFDLEVBQUViLEtBQUtjLEtBQUssQ0FBQztBQUM5QztBQUVPLFNBQVNFLGFBQWFmLEtBQWM7SUFDekMsSUFBSSxDQUFDQSxPQUFPLE9BQU87SUFFbkIsTUFBTWdCLE1BQU1oQixNQUFNaUIsSUFBSTtJQUN0QixJQUFJLENBQUNELE9BQU9BLElBQUlFLE9BQU8sQ0FBQyxRQUFRLFFBQVEsT0FBTyxPQUFPO0lBRXRELElBQUlwQixxQkFBcUJxQixJQUFJLENBQUNILE1BQU07UUFDbEMsTUFBTUksV0FBVyxJQUFJVixLQUFLTTtRQUMxQixPQUFPSyxPQUFPQyxLQUFLLENBQUNGLFNBQVNHLE9BQU8sTUFBTSxPQUFPSDtJQUNuRDtJQUVBLE1BQU1JLGFBQWFSLElBQ2hCRSxPQUFPLENBQUMsT0FBTyxLQUNmQSxPQUFPLENBQUMsT0FBTyxLQUNmQSxPQUFPLENBQUMsWUFBWSxLQUNwQkEsT0FBTyxDQUFDLFFBQVEsS0FDaEJELElBQUk7SUFFUCxNQUFNUSxZQUFZRCxXQUFXRSxLQUFLLENBQUM7SUFDbkMsSUFBSUQsV0FBVztRQUNiLE1BQU0sR0FBR3JCLFVBQVV1QixNQUFNQyxTQUFTQyxXQUFXQyxVQUFVLEdBQUdMO1FBQzFELElBQUlwQixPQUFPZ0IsT0FBT087UUFDbEIsSUFBSUQsU0FBUyxRQUFRdEIsU0FBUyxJQUFJQSxPQUFPO1FBQ3pDLElBQUlzQixTQUFTLFFBQVF0QixPQUFPLElBQUlBLFFBQVE7UUFDeEMsTUFBTTBCLFNBQVM1QixvQkFBb0JDLFVBQVVDLE1BQU1nQixPQUFPUSxZQUFZUixPQUFPUyxhQUFhO1FBQzFGLE9BQU9ULE9BQU9DLEtBQUssQ0FBQ1MsT0FBT1IsT0FBTyxNQUFNLE9BQU9RO0lBQ2pEO0lBRUEsTUFBTUMsZUFBZVIsV0FBV0UsS0FBSyxDQUFDO0lBQ3RDLElBQUlNLGNBQWM7UUFDaEIsTUFBTSxHQUFHNUIsVUFBVXdCLFNBQVNDLFdBQVdDLFVBQVUsR0FBR0U7UUFDcEQsTUFBTUQsU0FBUzVCLG9CQUNiQyxVQUNBaUIsT0FBT08sV0FBVyxNQUNsQlAsT0FBT1EsYUFBYSxNQUNwQlIsT0FBT1MsYUFBYTtRQUV0QixPQUFPVCxPQUFPQyxLQUFLLENBQUNTLE9BQU9SLE9BQU8sTUFBTSxPQUFPUTtJQUNqRDtJQUVBLE1BQU1FLFNBQVMsSUFBSXZCLEtBQUtNO0lBQ3hCLE9BQU9LLE9BQU9DLEtBQUssQ0FBQ1csT0FBT1YsT0FBTyxNQUFNLE9BQU9VO0FBQ2pEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFkZXMtZmFuYXBwLy4vbGliL3BhcnNlS3N0RGF0ZS50cz8xNWMwIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEVYUExJQ0lUX1RJTUVaT05FX1JFID0gLyh6fFsrLV1cXGR7Mn06P1xcZHsyfSkkL2k7XHJcblxyXG5mdW5jdGlvbiBwYWQyKHZhbHVlOiBzdHJpbmcgfCBudW1iZXIpIHtcclxuICByZXR1cm4gU3RyaW5nKHZhbHVlKS5wYWRTdGFydCgyLCBcIjBcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlRGF0ZVBhcnRzQXNLc3QoZGF0ZVBhcnQ6IHN0cmluZywgaG91ciA9IDAsIG1pbnV0ZSA9IDAsIHNlY29uZCA9IDApIHtcclxuICBjb25zdCBub3JtYWxpemVkRGF0ZSA9IG5vcm1hbGl6ZURhdGVQYXJ0KGRhdGVQYXJ0KTtcclxuICBpZiAoIW5vcm1hbGl6ZWREYXRlKSByZXR1cm4gbmV3IERhdGUoXCJpbnZhbGlkXCIpO1xyXG4gIHJldHVybiBuZXcgRGF0ZShgJHtub3JtYWxpemVkRGF0ZX1UJHtwYWQyKGhvdXIpfToke3BhZDIobWludXRlKX06JHtwYWQyKHNlY29uZCl9KzA5OjAwYCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBub3JtYWxpemVEYXRlUGFydChkYXRlUGFydDogc3RyaW5nKSB7XHJcbiAgY29uc3QgW3llYXIsIG1vbnRoLCBkYXldID0gZGF0ZVBhcnQuc3BsaXQoXCItXCIpO1xyXG4gIGlmICgheWVhciB8fCAhbW9udGggfHwgIWRheSkgcmV0dXJuIG51bGw7XHJcbiAgcmV0dXJuIGAke3llYXJ9LSR7cGFkMihtb250aCl9LSR7cGFkMihkYXkpfWA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUtzdERhdGUodmFsdWU/OiBzdHJpbmcpIHtcclxuICBpZiAoIXZhbHVlKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgY29uc3QgcmF3ID0gdmFsdWUudHJpbSgpO1xyXG4gIGlmICghcmF3IHx8IHJhdy5yZXBsYWNlKC9cXHMrL2csIFwiXCIpID09PSBcIuynhO2WieykkVwiKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgaWYgKEVYUExJQ0lUX1RJTUVaT05FX1JFLnRlc3QocmF3KSkge1xyXG4gICAgY29uc3QgZXhwbGljaXQgPSBuZXcgRGF0ZShyYXcpO1xyXG4gICAgcmV0dXJuIE51bWJlci5pc05hTihleHBsaWNpdC5nZXRUaW1lKCkpID8gbnVsbCA6IGV4cGxpY2l0O1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgbm9ybWFsaXplZCA9IHJhd1xyXG4gICAgLnJlcGxhY2UoL1xcLi9nLCBcIi1cIilcclxuICAgIC5yZXBsYWNlKC9cXC8vZywgXCItXCIpXHJcbiAgICAucmVwbGFjZSgvXFxzKi1cXHMqL2csIFwiLVwiKVxyXG4gICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpXHJcbiAgICAudHJpbSgpO1xyXG5cclxuICBjb25zdCBhbVBtTWF0Y2ggPSBub3JtYWxpemVkLm1hdGNoKC9eKFxcZHs0fS1cXGR7MSwyfS1cXGR7MSwyfSlcXHMqKOyYpOyghHzsmKTtm4QpXFxzKihcXGR7MSwyfSk6KFxcZHsxLDJ9KSg/OjooXFxkezEsMn0pKT8kLyk7XHJcbiAgaWYgKGFtUG1NYXRjaCkge1xyXG4gICAgY29uc3QgWywgZGF0ZVBhcnQsIGFtUG0sIHJhd0hvdXIsIHJhd01pbnV0ZSwgcmF3U2Vjb25kXSA9IGFtUG1NYXRjaDtcclxuICAgIGxldCBob3VyID0gTnVtYmVyKHJhd0hvdXIpO1xyXG4gICAgaWYgKGFtUG0gPT09IFwi7Jik7KCEXCIgJiYgaG91ciA9PT0gMTIpIGhvdXIgPSAwO1xyXG4gICAgaWYgKGFtUG0gPT09IFwi7Jik7ZuEXCIgJiYgaG91ciA8IDEyKSBob3VyICs9IDEyO1xyXG4gICAgY29uc3QgcGFyc2VkID0gcGFyc2VEYXRlUGFydHNBc0tzdChkYXRlUGFydCwgaG91ciwgTnVtYmVyKHJhd01pbnV0ZSksIE51bWJlcihyYXdTZWNvbmQgPz8gXCIwXCIpKTtcclxuICAgIHJldHVybiBOdW1iZXIuaXNOYU4ocGFyc2VkLmdldFRpbWUoKSkgPyBudWxsIDogcGFyc2VkO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgbnVtZXJpY01hdGNoID0gbm9ybWFsaXplZC5tYXRjaCgvXihcXGR7NH0tXFxkezEsMn0tXFxkezEsMn0pKD86XFxzKyhcXGR7MSwyfSkoPzo6KFxcZHsxLDJ9KSk/KD86OihcXGR7MSwyfSkpPyk/JC8pO1xyXG4gIGlmIChudW1lcmljTWF0Y2gpIHtcclxuICAgIGNvbnN0IFssIGRhdGVQYXJ0LCByYXdIb3VyLCByYXdNaW51dGUsIHJhd1NlY29uZF0gPSBudW1lcmljTWF0Y2g7XHJcbiAgICBjb25zdCBwYXJzZWQgPSBwYXJzZURhdGVQYXJ0c0FzS3N0KFxyXG4gICAgICBkYXRlUGFydCxcclxuICAgICAgTnVtYmVyKHJhd0hvdXIgPz8gXCIwXCIpLFxyXG4gICAgICBOdW1iZXIocmF3TWludXRlID8/IFwiMFwiKSxcclxuICAgICAgTnVtYmVyKHJhd1NlY29uZCA/PyBcIjBcIiksXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIE51bWJlci5pc05hTihwYXJzZWQuZ2V0VGltZSgpKSA/IG51bGwgOiBwYXJzZWQ7XHJcbiAgfVxyXG5cclxuICBjb25zdCBkaXJlY3QgPSBuZXcgRGF0ZShyYXcpO1xyXG4gIHJldHVybiBOdW1iZXIuaXNOYU4oZGlyZWN0LmdldFRpbWUoKSkgPyBudWxsIDogZGlyZWN0O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJFWFBMSUNJVF9USU1FWk9ORV9SRSIsInBhZDIiLCJ2YWx1ZSIsIlN0cmluZyIsInBhZFN0YXJ0IiwicGFyc2VEYXRlUGFydHNBc0tzdCIsImRhdGVQYXJ0IiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsIm5vcm1hbGl6ZWREYXRlIiwibm9ybWFsaXplRGF0ZVBhcnQiLCJEYXRlIiwieWVhciIsIm1vbnRoIiwiZGF5Iiwic3BsaXQiLCJwYXJzZUtzdERhdGUiLCJyYXciLCJ0cmltIiwicmVwbGFjZSIsInRlc3QiLCJleHBsaWNpdCIsIk51bWJlciIsImlzTmFOIiwiZ2V0VGltZSIsIm5vcm1hbGl6ZWQiLCJhbVBtTWF0Y2giLCJtYXRjaCIsImFtUG0iLCJyYXdIb3VyIiwicmF3TWludXRlIiwicmF3U2Vjb25kIiwicGFyc2VkIiwibnVtZXJpY01hdGNoIiwiZGlyZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/parseKstDate.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase-admin.ts":
/*!*******************************!*\
  !*** ./lib/supabase-admin.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/index.mjs\");\n/**\r\n * lib/supabase-admin.ts\r\n * 서버 사이드 Supabase 클라이언트 (Service Role Key)\r\n */ \nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(process.env.SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UtYWRtaW4udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7O0NBR0MsR0FDb0Q7QUFFOUMsTUFBTUMsZ0JBQWdCRCxtRUFBWUEsQ0FDdkNFLFFBQVFDLEdBQUcsQ0FBQ0MsWUFBWSxFQUN4QkYsUUFBUUMsR0FBRyxDQUFDRSx5QkFBeUIsRUFDckMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYWRlcy1mYW5hcHAvLi9saWIvc3VwYWJhc2UtYWRtaW4udHM/Mzc5MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogbGliL3N1cGFiYXNlLWFkbWluLnRzXHJcbiAqIOyEnOuyhCDsgqzsnbTrk5wgU3VwYWJhc2Ug7YG065287J207Ja47Yq4IChTZXJ2aWNlIFJvbGUgS2V5KVxyXG4gKi9cclxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSBcIkBzdXBhYmFzZS9zdXBhYmFzZS1qc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlQWRtaW4gPSBjcmVhdGVDbGllbnQoXHJcbiAgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfVVJMISxcclxuICBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIVxyXG4pO1xyXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VBZG1pbiIsInByb2Nlc3MiLCJlbnYiLCJTVVBBQkFTRV9VUkwiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase-admin.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvotes%2Froute&page=%2Fapi%2Fvotes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvotes%2Froute.ts&appDir=C%3A%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();