"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/votes/route";
exports.ids = ["app/api/votes/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvotes%2Froute&page=%2Fapi%2Fvotes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvotes%2Froute.ts&appDir=C%3A%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvotes%2Froute&page=%2Fapi%2Fvotes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvotes%2Froute.ts&appDir=C%3A%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_hades_fanapp_app_api_votes_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/votes/route.ts */ \"(rsc)/./app/api/votes/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/votes/route\",\n        pathname: \"/api/votes\",\n        filename: \"route\",\n        bundlePath: \"app/api/votes/route\"\n    },\n    resolvedPagePath: \"C:\\\\hades-fanapp\\\\app\\\\api\\\\votes\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_hades_fanapp_app_api_votes_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/votes/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ2b3RlcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdm90ZXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ2b3RlcyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDaGFkZXMtZmFuYXBwJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDaGFkZXMtZmFuYXBwJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNMO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFkZXMtZmFuYXBwLz9kNGJiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXGhhZGVzLWZhbmFwcFxcXFxhcHBcXFxcYXBpXFxcXHZvdGVzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS92b3Rlcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3ZvdGVzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS92b3Rlcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXGhhZGVzLWZhbmFwcFxcXFxhcHBcXFxcYXBpXFxcXHZvdGVzXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS92b3Rlcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvotes%2Froute&page=%2Fapi%2Fvotes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvotes%2Froute.ts&appDir=C%3A%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/votes/route.ts":
/*!********************************!*\
  !*** ./app/api/votes/route.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   revalidate: () => (/* binding */ revalidate)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_parseKstDate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/parseKstDate */ \"(rsc)/./lib/parseKstDate.ts\");\n/* harmony import */ var _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/supabase-admin */ \"(rsc)/./lib/supabase-admin.ts\");\n\n\n\nconst dynamic = \"force-dynamic\";\nconst revalidate = 0;\nconst FALLBACK_CSV_URL = \"https://docs.google.com/spreadsheets/d/e/2PACX-1vRPX-EvmCuv7Dk_ozK2PhR0VmxW94s3-bZkY5Kou8FMXBR7f4indzBJ5GayAwv_VurZa0Dsp7SsrnBL/pub?gid=0&single=true&output=csv\";\nconst PLATFORM_LABELS = {\n    idolchamp: \"아이돌챔프\",\n    mubeat: \"뮤빗\",\n    upick: \"유픽\",\n    fancast: \"팬캐스트\",\n    fanplus: \"팬플러스\",\n    podoal: \"포도알\",\n    whosfan: \"후즈팬\",\n    duckad: \"덕애드\",\n    \"10asia\": \"텐아시아\",\n    muniverse: \"뮤니버스\",\n    my1pick: \"마이원픽\",\n    mnetplus: \"엠넷플러스\",\n    fannstar: \"팬앤스타\",\n    higher: \"하이어\",\n    ktopstar: \"K탑스타\"\n};\nconst REQUEST_TIMEOUT_MS = 4500;\n// 동시 요청 1회로 합치기\nlet inFlightRequest = null;\n// CSV polling 간격(기존 30초 유지)\nconst MIN_REFRESH_MS = 30000;\n// 현재 API가 노출하는 안정 스냅샷\nlet lastGoodVotes = null;\nlet lastFetchedAt = 0;\nfunction withCacheBusting(url) {\n    const bucket = Math.floor(Date.now() / MIN_REFRESH_MS);\n    try {\n        const parsed = new URL(url);\n        parsed.searchParams.set(\"_cb\", String(bucket));\n        return parsed.toString();\n    } catch  {\n        const separator = url.includes(\"?\") ? \"&\" : \"?\";\n        return `${url}${separator}_cb=${bucket}`;\n    }\n}\nfunction normalizeBoolean(value) {\n    const normalized = value.trim().toLowerCase();\n    return normalized === \"true\" || normalized === \"1\" || normalized === \"yes\";\n}\nfunction normalizePlatform(platform) {\n    return platform.trim().toLowerCase();\n}\nfunction normalizeVoteUrl(url) {\n    return url.trim();\n}\nfunction voteIdentityKey(platform, url) {\n    return `${normalizePlatform(platform)}|${normalizeVoteUrl(url)}`.toLowerCase();\n}\nfunction parsePlatforms(platformsRaw) {\n    const normalized = platformsRaw.replace(/[|,/]/g, \" \").replace(/\\s+/g, \" \").trim();\n    const unique = new Set();\n    normalized.split(\" \").map((value)=>normalizePlatform(value)).filter(Boolean).forEach((platform)=>unique.add(platform));\n    if (unique.size === 0) {\n        return [\n            \"etc\"\n        ];\n    }\n    return Array.from(unique);\n}\nfunction labelForPlatform(platform) {\n    const key = normalizePlatform(platform);\n    return PLATFORM_LABELS[key] ?? \"기타\";\n}\nfunction isInProgressKeyword(value) {\n    const normalized = value.replace(/\\s+/g, \"\").toLowerCase();\n    return normalized === \"진행중\";\n}\nfunction parseDateKst(rawValue) {\n    if (!rawValue) return null;\n    const value = rawValue.trim();\n    if (!value || isInProgressKeyword(value)) return null;\n    return (0,_lib_parseKstDate__WEBPACK_IMPORTED_MODULE_1__.parseKstDate)(value);\n}\nfunction isExpired(closesAt) {\n    const date = parseDateKst(closesAt);\n    if (!date) return false;\n    return date.getTime() <= Date.now();\n}\nfunction hashToVoteId(raw) {\n    let hash = 0;\n    for(let i = 0; i < raw.length; i += 1){\n        hash = hash * 31 + raw.charCodeAt(i) >>> 0;\n    }\n    return `vote-${hash.toString(36)}`;\n}\nfunction createStableId(row) {\n    return hashToVoteId(voteIdentityKey(row.platform ?? \"\", row.url ?? \"\"));\n}\nfunction createLegacyStableId(row) {\n    const legacyRaw = [\n        normalizePlatform(row.platform ?? \"\"),\n        row.title?.trim() ?? \"\",\n        row.url?.trim() ?? \"\",\n        row.opensAt?.trim() ?? \"\",\n        row.closesAt?.trim() ?? \"\"\n    ].join(\"|\");\n    return hashToVoteId(legacyRaw);\n}\nfunction parseCsvLine(line) {\n    const values = [];\n    let current = \"\";\n    let inQuotes = false;\n    for(let i = 0; i < line.length; i += 1){\n        const char = line[i];\n        const nextChar = line[i + 1];\n        if (char === '\"') {\n            if (inQuotes && nextChar === '\"') {\n                current += '\"';\n                i += 1;\n            } else {\n                inQuotes = !inQuotes;\n            }\n            continue;\n        }\n        if (char === \",\" && !inQuotes) {\n            values.push(current.trim());\n            current = \"\";\n            continue;\n        }\n        current += char;\n    }\n    values.push(current.trim());\n    return values;\n}\nfunction parseCsv(content) {\n    const lines = content.split(/\\r?\\n/).map((line)=>line.trim()).filter((line)=>line.length > 0);\n    if (lines.length <= 1) {\n        return [];\n    }\n    const [headerLine, ...rows] = lines;\n    const headers = parseCsvLine(headerLine);\n    return rows.map((line)=>{\n        const values = parseCsvLine(line);\n        const record = {};\n        headers.forEach((header, index)=>{\n            record[header] = values[index] ?? \"\";\n        });\n        return record;\n    });\n}\nfunction uniqueVotes(votes) {\n    const seen = new Set();\n    return votes.filter((vote)=>{\n        const key = `${vote.platform}|${vote.title}|${vote.url}|${vote.closesAt ?? \"\"}`.toLowerCase();\n        if (seen.has(key)) return false;\n        seen.add(key);\n        return true;\n    });\n}\nasync function fetchVotesCsv(csvUrl) {\n    const controller = new AbortController();\n    const timeout = setTimeout(()=>controller.abort(), REQUEST_TIMEOUT_MS);\n    const cacheBustedUrl = withCacheBusting(csvUrl);\n    try {\n        const response = await fetch(cacheBustedUrl, {\n            cache: \"no-store\",\n            next: {\n                revalidate: 0\n            },\n            headers: {\n                Accept: \"text/csv,*/*;q=0.9\",\n                \"Cache-Control\": \"no-cache\",\n                Pragma: \"no-cache\"\n            },\n            signal: controller.signal\n        });\n        if (!response.ok) {\n            throw new Error(`Failed to fetch votes csv: ${response.status}`);\n        }\n        return response.text();\n    } finally{\n        clearTimeout(timeout);\n    }\n}\nasync function fetchLatestVotes() {\n    const csvUrl = process.env.VOTES_SHEET_CSV_URL ?? FALLBACK_CSV_URL;\n    const csv = await fetchVotesCsv(csvUrl);\n    const parsedRows = parseCsv(csv);\n    const fetchedVotes = parsedRows.filter((row)=>normalizeBoolean(row.enabled ?? \"\")).filter((row)=>!isExpired(row.closesAt ?? \"\")).map((row)=>{\n        const platforms = parsePlatforms(row.platform ?? \"\");\n        const rawOpensAt = row.opensAt?.trim() ?? \"\";\n        const openDate = parseDateKst(rawOpensAt);\n        const closeDate = parseDateKst(row.closesAt ?? \"\");\n        return {\n            id: createStableId(row),\n            legacyId: createLegacyStableId(row),\n            title: row.title?.trim() ?? \"\",\n            platform: platforms[0],\n            platformLabel: labelForPlatform(platforms[0]),\n            platforms,\n            platformLabels: platforms.map(labelForPlatform),\n            url: row.url?.trim() ?? \"\",\n            opensAt: isInProgressKeyword(rawOpensAt) ? \"진행중\" : openDate ? openDate.toISOString() : undefined,\n            closesAt: closeDate ? closeDate.toISOString() : undefined,\n            note: row.note?.trim() || undefined\n        };\n    }).filter((vote)=>vote.title && vote.url);\n    return uniqueVotes(fetchedVotes);\n}\n// 30초 polling + inFlight 공유 + 실패 폴백 + 전체 즉시 반영(삭제 포함)\nasync function loadVotesFromSheet() {\n    const now = Date.now();\n    if (lastGoodVotes && now - lastFetchedAt < MIN_REFRESH_MS) {\n        return lastGoodVotes;\n    }\n    if (inFlightRequest) {\n        return inFlightRequest;\n    }\n    inFlightRequest = (async ()=>{\n        const fetchedVotes = await fetchLatestVotes();\n        lastGoodVotes = fetchedVotes;\n        lastFetchedAt = Date.now();\n        return fetchedVotes;\n    })();\n    try {\n        return await inFlightRequest;\n    } catch  {\n        if (lastGoodVotes) return lastGoodVotes;\n        return [];\n    } finally{\n        inFlightRequest = null;\n    }\n}\nasync function loadVotesFromSupabase() {\n    try {\n        const { data, error } = await _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_2__.supabaseAdmin.from(\"votes\").select(\"*\").eq(\"enabled\", true).order(\"created_at\", {\n            ascending: false\n        });\n        if (error || !data) return null;\n        if (data.length === 0) return null;\n        const now = Date.now();\n        const items = data.filter((row)=>{\n            if (!row.closes_at) return true;\n            const d = (0,_lib_parseKstDate__WEBPACK_IMPORTED_MODULE_1__.parseKstDate)(row.closes_at);\n            if (!d) return true;\n            return d.getTime() > now;\n        }).map((row)=>{\n            const platforms = parsePlatforms(row.platform ?? \"\");\n            const openDate = parseDateKst(row.opens_at ?? \"\");\n            const closeDate = parseDateKst(row.closes_at ?? \"\");\n            const rawOpensAt = row.opens_at?.trim() ?? \"\";\n            return {\n                id: row.id,\n                legacyId: hashToVoteId(`${row.platform}|${row.url}`),\n                title: row.title?.trim() ?? \"\",\n                platform: platforms[0],\n                platformLabel: labelForPlatform(platforms[0]),\n                platforms,\n                platformLabels: platforms.map(labelForPlatform),\n                url: row.url?.trim() ?? \"\",\n                opensAt: isInProgressKeyword(rawOpensAt) ? \"진행중\" : openDate ? openDate.toISOString() : undefined,\n                closesAt: closeDate ? closeDate.toISOString() : undefined,\n                note: row.note?.trim() || undefined\n            };\n        }).filter((v)=>v.title);\n        return uniqueVotes(items);\n    } catch  {\n        return null;\n    }\n}\nasync function GET() {\n    const NO_CACHE = {\n        \"Cache-Control\": \"no-store, no-cache, must-revalidate, max-age=0\",\n        Pragma: \"no-cache\",\n        Expires: \"0\"\n    };\n    try {\n        const supabaseVotes = await loadVotesFromSupabase();\n        if (supabaseVotes !== null) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(supabaseVotes, {\n                headers: NO_CACHE\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json([], {\n            headers: NO_CACHE\n        });\n    } catch  {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json([], {\n            status: 200,\n            headers: NO_CACHE\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SyxFQUFFdkMsVUFBVTtnQkFDNUJHLFVBQVV5RixTQUFTLENBQUMsRUFBRTtnQkFDdEJNLGVBQWU5RSxpQkFBaUJ3RSxTQUFTLENBQUMsRUFBRTtnQkFDNUNBO2dCQUNBTyxnQkFBZ0JQLFVBQVVoRixHQUFHLENBQUNRO2dCQUM5QnJDLEtBQUtxRCxJQUFJckQsR0FBRyxFQUFFaUIsVUFBVTtnQkFDeEJ3QyxTQUFTbEIsb0JBQW9CdUUsY0FDekIsUUFDQUMsV0FDQUEsU0FBU00sV0FBVyxLQUNwQkM7Z0JBQ0ozRSxVQUFVcUUsWUFBWUEsVUFBVUssV0FBVyxLQUFLQztnQkFDaERDLE1BQU1sRSxJQUFJa0UsSUFBSSxFQUFFdEcsVUFBVXFHO1lBQzVCO1FBQ0YsR0FDQ3hGLE1BQU0sQ0FBQyxDQUFDc0csSUFBTUEsRUFBRTVFLEtBQUs7UUFFeEIsT0FBT29CLFlBQVlvRDtJQUNyQixFQUFFLE9BQU07UUFDTixPQUFPO0lBQ1Q7QUFDRjtBQUVPLGVBQWVLO0lBQ3BCLE1BQU1DLFdBQVc7UUFDZixpQkFBaUI7UUFDakJ4QyxRQUFRO1FBQ1J5QyxTQUFTO0lBQ1g7SUFFQSxJQUFJO1FBQ0YsTUFBTUMsZ0JBQWdCLE1BQU1mO1FBQzVCLElBQUllLGtCQUFrQixNQUFNO1lBQzFCLE9BQU9uSyxxREFBWUEsQ0FBQ29LLElBQUksQ0FBQ0QsZUFBZTtnQkFBRWhFLFNBQVM4RDtZQUFTO1FBQzlEO1FBQ0EsT0FBT2pLLHFEQUFZQSxDQUFDb0ssSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUFFakUsU0FBUzhEO1FBQVM7SUFDbkQsRUFBRSxPQUFNO1FBQ04sT0FBT2pLLHFEQUFZQSxDQUFDb0ssSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUFFdkMsUUFBUTtZQUFLMUIsU0FBUzhEO1FBQVM7SUFDaEU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhZGVzLWZhbmFwcC8uL2FwcC9hcGkvdm90ZXMvcm91dGUudHM/NzUwNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuaW1wb3J0IHsgcGFyc2VLc3REYXRlIH0gZnJvbSBcIkAvbGliL3BhcnNlS3N0RGF0ZVwiO1xyXG5pbXBvcnQgeyBzdXBhYmFzZUFkbWluIH0gZnJvbSBcIkAvbGliL3N1cGFiYXNlLWFkbWluXCI7XHJcblxyXG5leHBvcnQgY29uc3QgZHluYW1pYyA9IFwiZm9yY2UtZHluYW1pY1wiO1xyXG5leHBvcnQgY29uc3QgcmV2YWxpZGF0ZSA9IDA7XHJcblxyXG50eXBlIFZvdGVQbGF0Zm9ybSA9XHJcbiAgfCBcImlkb2xjaGFtcFwiXHJcbiAgfCBcIm11YmVhdFwiXHJcbiAgfCBcInVwaWNrXCJcclxuICB8IFwiZmFuY2FzdFwiXHJcbiAgfCBcImZhbnBsdXNcIlxyXG4gIHwgXCJwb2RvYWxcIlxyXG4gIHwgXCJ3aG9zZmFuXCJcclxuICB8IFwiZHVja2FkXCJcclxuICB8IFwiMTBhc2lhXCJcclxuICB8IFwibXVuaXZlcnNlXCJcclxuICB8IFwibXkxcGlja1wiXHJcbiAgfCBcIm1uZXRwbHVzXCJcclxuICB8IFwiZmFubnN0YXJcIlxyXG4gIHwgXCJoaWdoZXJcIlxyXG4gIHwgXCJrdG9wc3RhclwiO1xyXG5cclxudHlwZSBWb3RlUm93ID0ge1xyXG4gIGVuYWJsZWQ6IHN0cmluZztcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIHBsYXRmb3JtOiBzdHJpbmc7XHJcbiAgdXJsOiBzdHJpbmc7XHJcbiAgb3BlbnNBdDogc3RyaW5nO1xyXG4gIGNsb3Nlc0F0OiBzdHJpbmc7XHJcbiAgbm90ZTogc3RyaW5nO1xyXG59O1xyXG5cclxudHlwZSBWb3RlSXRlbSA9IHtcclxuICBpZDogc3RyaW5nO1xyXG4gIGxlZ2FjeUlkPzogc3RyaW5nO1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgcGxhdGZvcm06IHN0cmluZztcclxuICBwbGF0Zm9ybUxhYmVsOiBzdHJpbmc7XHJcbiAgcGxhdGZvcm1zOiBzdHJpbmdbXTtcclxuICBwbGF0Zm9ybUxhYmVsczogc3RyaW5nW107XHJcbiAgdXJsOiBzdHJpbmc7XHJcbiAgb3BlbnNBdD86IHN0cmluZztcclxuICBjbG9zZXNBdD86IHN0cmluZztcclxuICBub3RlPzogc3RyaW5nO1xyXG59O1xyXG5cclxuY29uc3QgRkFMTEJBQ0tfQ1NWX1VSTCA9XHJcbiAgXCJodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC9lLzJQQUNYLTF2UlBYLUV2bUN1djdEa19veksyUGhSMFZteFc5NHMzLWJaa1k1S291OEZNWEJSN2Y0aW5kekJKNUdheUF3dl9WdXJaYTBEc3A3U3NybkJML3B1Yj9naWQ9MCZzaW5nbGU9dHJ1ZSZvdXRwdXQ9Y3N2XCI7XHJcblxyXG5jb25zdCBQTEFURk9STV9MQUJFTFM6IFJlY29yZDxWb3RlUGxhdGZvcm0sIHN0cmluZz4gPSB7XHJcbiAgaWRvbGNoYW1wOiBcIuyVhOydtOuPjOyxlO2UhFwiLFxyXG4gIG11YmVhdDogXCLrrqTruZdcIixcclxuICB1cGljazogXCLsnKDtlL1cIixcclxuICBmYW5jYXN0OiBcIu2MrOy6kOyKpO2KuFwiLFxyXG4gIGZhbnBsdXM6IFwi7Yys7ZSM65+s7IqkXCIsXHJcbiAgcG9kb2FsOiBcIu2PrOuPhOyVjFwiLFxyXG4gIHdob3NmYW46IFwi7ZuE7KaI7YysXCIsXHJcbiAgZHVja2FkOiBcIuuNleyVoOuTnFwiLFxyXG4gIFwiMTBhc2lhXCI6IFwi7YWQ7JWE7Iuc7JWEXCIsXHJcbiAgbXVuaXZlcnNlOiBcIuuupOuLiOuyhOyKpFwiLFxyXG4gIG15MXBpY2s6IFwi66eI7J207JuQ7ZS9XCIsXHJcbiAgbW5ldHBsdXM6IFwi7Jeg64S37ZSM65+s7IqkXCIsXHJcbiAgZmFubnN0YXI6IFwi7Yys7JWk7Iqk7YOAXCIsXHJcbiAgaGlnaGVyOiBcIu2VmOydtOyWtFwiLFxyXG4gIGt0b3BzdGFyOiBcIkvtg5HsiqTtg4BcIixcclxufTtcclxuXHJcbmNvbnN0IFJFUVVFU1RfVElNRU9VVF9NUyA9IDRfNTAwO1xyXG5cclxuLy8g64+Z7IucIOyalOyyrSAx7ZqM66GcIO2Vqey5mOq4sFxyXG5sZXQgaW5GbGlnaHRSZXF1ZXN0OiBQcm9taXNlPFZvdGVJdGVtW10+IHwgbnVsbCA9IG51bGw7XHJcblxyXG4vLyBDU1YgcG9sbGluZyDqsITqsqko6riw7KG0IDMw7LSIIOycoOyngClcclxuY29uc3QgTUlOX1JFRlJFU0hfTVMgPSAzMF8wMDA7XHJcblxyXG4vLyDtmITsnqwgQVBJ6rCAIOuFuOy2nO2VmOuKlCDslYjsoJUg7Iqk64OF7IO3XHJcbmxldCBsYXN0R29vZFZvdGVzOiBWb3RlSXRlbVtdIHwgbnVsbCA9IG51bGw7XHJcbmxldCBsYXN0RmV0Y2hlZEF0ID0gMDtcclxuXHJcbmZ1bmN0aW9uIHdpdGhDYWNoZUJ1c3RpbmcodXJsOiBzdHJpbmcpIHtcclxuICBjb25zdCBidWNrZXQgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyBNSU5fUkVGUkVTSF9NUyk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBwYXJzZWQgPSBuZXcgVVJMKHVybCk7XHJcbiAgICBwYXJzZWQuc2VhcmNoUGFyYW1zLnNldChcIl9jYlwiLCBTdHJpbmcoYnVja2V0KSk7XHJcbiAgICByZXR1cm4gcGFyc2VkLnRvU3RyaW5nKCk7XHJcbiAgfSBjYXRjaCB7XHJcbiAgICBjb25zdCBzZXBhcmF0b3IgPSB1cmwuaW5jbHVkZXMoXCI/XCIpID8gXCImXCIgOiBcIj9cIjtcclxuICAgIHJldHVybiBgJHt1cmx9JHtzZXBhcmF0b3J9X2NiPSR7YnVja2V0fWA7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBub3JtYWxpemVCb29sZWFuKHZhbHVlOiBzdHJpbmcpIHtcclxuICBjb25zdCBub3JtYWxpemVkID0gdmFsdWUudHJpbSgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgcmV0dXJuIG5vcm1hbGl6ZWQgPT09IFwidHJ1ZVwiIHx8IG5vcm1hbGl6ZWQgPT09IFwiMVwiIHx8IG5vcm1hbGl6ZWQgPT09IFwieWVzXCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZVBsYXRmb3JtKHBsYXRmb3JtOiBzdHJpbmcpIHtcclxuICByZXR1cm4gcGxhdGZvcm0udHJpbSgpLnRvTG93ZXJDYXNlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZVZvdGVVcmwodXJsOiBzdHJpbmcpIHtcclxuICByZXR1cm4gdXJsLnRyaW0oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdm90ZUlkZW50aXR5S2V5KHBsYXRmb3JtOiBzdHJpbmcsIHVybDogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIGAke25vcm1hbGl6ZVBsYXRmb3JtKHBsYXRmb3JtKX18JHtub3JtYWxpemVWb3RlVXJsKHVybCl9YC50b0xvd2VyQ2FzZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZVBsYXRmb3JtcyhwbGF0Zm9ybXNSYXc6IHN0cmluZykge1xyXG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBwbGF0Zm9ybXNSYXdcclxuICAgIC5yZXBsYWNlKC9bfCwvXS9nLCBcIiBcIilcclxuICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKVxyXG4gICAgLnRyaW0oKTtcclxuXHJcbiAgY29uc3QgdW5pcXVlID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcbiAgbm9ybWFsaXplZFxyXG4gICAgLnNwbGl0KFwiIFwiKVxyXG4gICAgLm1hcCgodmFsdWUpID0+IG5vcm1hbGl6ZVBsYXRmb3JtKHZhbHVlKSlcclxuICAgIC5maWx0ZXIoQm9vbGVhbilcclxuICAgIC5mb3JFYWNoKChwbGF0Zm9ybSkgPT4gdW5pcXVlLmFkZChwbGF0Zm9ybSkpO1xyXG5cclxuICBpZiAodW5pcXVlLnNpemUgPT09IDApIHtcclxuICAgIHJldHVybiBbXCJldGNcIl07XHJcbiAgfVxyXG5cclxuICByZXR1cm4gQXJyYXkuZnJvbSh1bmlxdWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsYWJlbEZvclBsYXRmb3JtKHBsYXRmb3JtOiBzdHJpbmcpIHtcclxuICBjb25zdCBrZXkgPSBub3JtYWxpemVQbGF0Zm9ybShwbGF0Zm9ybSkgYXMgVm90ZVBsYXRmb3JtO1xyXG4gIHJldHVybiBQTEFURk9STV9MQUJFTFNba2V5XSA/PyBcIuq4sO2DgFwiO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0luUHJvZ3Jlc3NLZXl3b3JkKHZhbHVlOiBzdHJpbmcpIHtcclxuICBjb25zdCBub3JtYWxpemVkID0gdmFsdWUucmVwbGFjZSgvXFxzKy9nLCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xyXG4gIHJldHVybiBub3JtYWxpemVkID09PSBcIuynhO2WieykkVwiO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZURhdGVLc3QocmF3VmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xyXG4gIGlmICghcmF3VmFsdWUpIHJldHVybiBudWxsO1xyXG4gIGNvbnN0IHZhbHVlID0gcmF3VmFsdWUudHJpbSgpO1xyXG4gIGlmICghdmFsdWUgfHwgaXNJblByb2dyZXNzS2V5d29yZCh2YWx1ZSkpIHJldHVybiBudWxsO1xyXG4gIHJldHVybiBwYXJzZUtzdERhdGUodmFsdWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0V4cGlyZWQoY2xvc2VzQXQ6IHN0cmluZykge1xyXG4gIGNvbnN0IGRhdGUgPSBwYXJzZURhdGVLc3QoY2xvc2VzQXQpO1xyXG4gIGlmICghZGF0ZSkgcmV0dXJuIGZhbHNlO1xyXG4gIHJldHVybiBkYXRlLmdldFRpbWUoKSA8PSBEYXRlLm5vdygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYXNoVG9Wb3RlSWQocmF3OiBzdHJpbmcpIHtcclxuICBsZXQgaGFzaCA9IDA7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByYXcubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgIGhhc2ggPSAoaGFzaCAqIDMxICsgcmF3LmNoYXJDb2RlQXQoaSkpID4+PiAwO1xyXG4gIH1cclxuICByZXR1cm4gYHZvdGUtJHtoYXNoLnRvU3RyaW5nKDM2KX1gO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVTdGFibGVJZChyb3c6IFZvdGVSb3cpIHtcclxuICByZXR1cm4gaGFzaFRvVm90ZUlkKHZvdGVJZGVudGl0eUtleShyb3cucGxhdGZvcm0gPz8gXCJcIiwgcm93LnVybCA/PyBcIlwiKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUxlZ2FjeVN0YWJsZUlkKHJvdzogVm90ZVJvdykge1xyXG4gIGNvbnN0IGxlZ2FjeVJhdyA9IFtcclxuICAgIG5vcm1hbGl6ZVBsYXRmb3JtKHJvdy5wbGF0Zm9ybSA/PyBcIlwiKSxcclxuICAgIHJvdy50aXRsZT8udHJpbSgpID8/IFwiXCIsXHJcbiAgICByb3cudXJsPy50cmltKCkgPz8gXCJcIixcclxuICAgIHJvdy5vcGVuc0F0Py50cmltKCkgPz8gXCJcIixcclxuICAgIHJvdy5jbG9zZXNBdD8udHJpbSgpID8/IFwiXCIsXHJcbiAgXS5qb2luKFwifFwiKTtcclxuXHJcbiAgcmV0dXJuIGhhc2hUb1ZvdGVJZChsZWdhY3lSYXcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZUNzdkxpbmUobGluZTogc3RyaW5nKSB7XHJcbiAgY29uc3QgdmFsdWVzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGxldCBjdXJyZW50ID0gXCJcIjtcclxuICBsZXQgaW5RdW90ZXMgPSBmYWxzZTtcclxuXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICBjb25zdCBjaGFyID0gbGluZVtpXTtcclxuICAgIGNvbnN0IG5leHRDaGFyID0gbGluZVtpICsgMV07XHJcblxyXG4gICAgaWYgKGNoYXIgPT09ICdcIicpIHtcclxuICAgICAgaWYgKGluUXVvdGVzICYmIG5leHRDaGFyID09PSAnXCInKSB7XHJcbiAgICAgICAgY3VycmVudCArPSAnXCInO1xyXG4gICAgICAgIGkgKz0gMTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpblF1b3RlcyA9ICFpblF1b3RlcztcclxuICAgICAgfVxyXG4gICAgICBjb250aW51ZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2hhciA9PT0gXCIsXCIgJiYgIWluUXVvdGVzKSB7XHJcbiAgICAgIHZhbHVlcy5wdXNoKGN1cnJlbnQudHJpbSgpKTtcclxuICAgICAgY3VycmVudCA9IFwiXCI7XHJcbiAgICAgIGNvbnRpbnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGN1cnJlbnQgKz0gY2hhcjtcclxuICB9XHJcblxyXG4gIHZhbHVlcy5wdXNoKGN1cnJlbnQudHJpbSgpKTtcclxuICByZXR1cm4gdmFsdWVzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZUNzdihjb250ZW50OiBzdHJpbmcpIHtcclxuICBjb25zdCBsaW5lcyA9IGNvbnRlbnRcclxuICAgIC5zcGxpdCgvXFxyP1xcbi8pXHJcbiAgICAubWFwKChsaW5lKSA9PiBsaW5lLnRyaW0oKSlcclxuICAgIC5maWx0ZXIoKGxpbmUpID0+IGxpbmUubGVuZ3RoID4gMCk7XHJcblxyXG4gIGlmIChsaW5lcy5sZW5ndGggPD0gMSkge1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgW2hlYWRlckxpbmUsIC4uLnJvd3NdID0gbGluZXM7XHJcbiAgY29uc3QgaGVhZGVycyA9IHBhcnNlQ3N2TGluZShoZWFkZXJMaW5lKTtcclxuXHJcbiAgcmV0dXJuIHJvd3MubWFwKChsaW5lKSA9PiB7XHJcbiAgICBjb25zdCB2YWx1ZXMgPSBwYXJzZUNzdkxpbmUobGluZSk7XHJcbiAgICBjb25zdCByZWNvcmQ6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcclxuXHJcbiAgICBoZWFkZXJzLmZvckVhY2goKGhlYWRlciwgaW5kZXgpID0+IHtcclxuICAgICAgcmVjb3JkW2hlYWRlcl0gPSB2YWx1ZXNbaW5kZXhdID8/IFwiXCI7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVjb3JkIGFzIFZvdGVSb3c7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVuaXF1ZVZvdGVzKHZvdGVzOiBWb3RlSXRlbVtdKSB7XHJcbiAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gIHJldHVybiB2b3Rlcy5maWx0ZXIoKHZvdGUpID0+IHtcclxuICAgIGNvbnN0IGtleSA9IGAke3ZvdGUucGxhdGZvcm19fCR7dm90ZS50aXRsZX18JHt2b3RlLnVybH18JHt2b3RlLmNsb3Nlc0F0ID8/IFwiXCJ9YC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgaWYgKHNlZW4uaGFzKGtleSkpIHJldHVybiBmYWxzZTtcclxuICAgIHNlZW4uYWRkKGtleSk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9KTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hWb3Rlc0Nzdihjc3ZVcmw6IHN0cmluZykge1xyXG4gIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XHJcbiAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCBSRVFVRVNUX1RJTUVPVVRfTVMpO1xyXG4gIGNvbnN0IGNhY2hlQnVzdGVkVXJsID0gd2l0aENhY2hlQnVzdGluZyhjc3ZVcmwpO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChjYWNoZUJ1c3RlZFVybCwge1xyXG4gICAgICBjYWNoZTogXCJuby1zdG9yZVwiLFxyXG4gICAgICBuZXh0OiB7IHJldmFsaWRhdGU6IDAgfSxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIEFjY2VwdDogXCJ0ZXh0L2NzdiwqLyo7cT0wLjlcIixcclxuICAgICAgICBcIkNhY2hlLUNvbnRyb2xcIjogXCJuby1jYWNoZVwiLFxyXG4gICAgICAgIFByYWdtYTogXCJuby1jYWNoZVwiLFxyXG4gICAgICB9LFxyXG4gICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsLFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCB2b3RlcyBjc3Y6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7XHJcbiAgfSBmaW5hbGx5IHtcclxuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoTGF0ZXN0Vm90ZXMoKSB7XHJcbiAgY29uc3QgY3N2VXJsID0gcHJvY2Vzcy5lbnYuVk9URVNfU0hFRVRfQ1NWX1VSTCA/PyBGQUxMQkFDS19DU1ZfVVJMO1xyXG4gIGNvbnN0IGNzdiA9IGF3YWl0IGZldGNoVm90ZXNDc3YoY3N2VXJsKTtcclxuICBjb25zdCBwYXJzZWRSb3dzID0gcGFyc2VDc3YoY3N2KTtcclxuXHJcbiAgY29uc3QgZmV0Y2hlZFZvdGVzID0gcGFyc2VkUm93c1xyXG4gICAgLmZpbHRlcigocm93KSA9PiBub3JtYWxpemVCb29sZWFuKHJvdy5lbmFibGVkID8/IFwiXCIpKVxyXG4gICAgLmZpbHRlcigocm93KSA9PiAhaXNFeHBpcmVkKHJvdy5jbG9zZXNBdCA/PyBcIlwiKSlcclxuICAgIC5tYXAoKHJvdykgPT4ge1xyXG4gICAgICBjb25zdCBwbGF0Zm9ybXMgPSBwYXJzZVBsYXRmb3Jtcyhyb3cucGxhdGZvcm0gPz8gXCJcIik7XHJcbiAgICAgIGNvbnN0IHJhd09wZW5zQXQgPSByb3cub3BlbnNBdD8udHJpbSgpID8/IFwiXCI7XHJcbiAgICAgIGNvbnN0IG9wZW5EYXRlID0gcGFyc2VEYXRlS3N0KHJhd09wZW5zQXQpO1xyXG4gICAgICBjb25zdCBjbG9zZURhdGUgPSBwYXJzZURhdGVLc3Qocm93LmNsb3Nlc0F0ID8/IFwiXCIpO1xyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBpZDogY3JlYXRlU3RhYmxlSWQocm93KSxcclxuICAgICAgICBsZWdhY3lJZDogY3JlYXRlTGVnYWN5U3RhYmxlSWQocm93KSxcclxuICAgICAgICB0aXRsZTogcm93LnRpdGxlPy50cmltKCkgPz8gXCJcIixcclxuICAgICAgICBwbGF0Zm9ybTogcGxhdGZvcm1zWzBdLFxyXG4gICAgICAgIHBsYXRmb3JtTGFiZWw6IGxhYmVsRm9yUGxhdGZvcm0ocGxhdGZvcm1zWzBdKSxcclxuICAgICAgICBwbGF0Zm9ybXMsXHJcbiAgICAgICAgcGxhdGZvcm1MYWJlbHM6IHBsYXRmb3Jtcy5tYXAobGFiZWxGb3JQbGF0Zm9ybSksXHJcbiAgICAgICAgdXJsOiByb3cudXJsPy50cmltKCkgPz8gXCJcIixcclxuICAgICAgICBvcGVuc0F0OiBpc0luUHJvZ3Jlc3NLZXl3b3JkKHJhd09wZW5zQXQpXHJcbiAgICAgICAgICA/IFwi7KeE7ZaJ7KSRXCJcclxuICAgICAgICAgIDogb3BlbkRhdGVcclxuICAgICAgICAgID8gb3BlbkRhdGUudG9JU09TdHJpbmcoKVxyXG4gICAgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgY2xvc2VzQXQ6IGNsb3NlRGF0ZSA/IGNsb3NlRGF0ZS50b0lTT1N0cmluZygpIDogdW5kZWZpbmVkLFxyXG4gICAgICAgIG5vdGU6IHJvdy5ub3RlPy50cmltKCkgfHwgdW5kZWZpbmVkLFxyXG4gICAgICB9IGFzIFZvdGVJdGVtO1xyXG4gICAgfSlcclxuICAgIC5maWx0ZXIoKHZvdGUpID0+IHZvdGUudGl0bGUgJiYgdm90ZS51cmwpO1xyXG5cclxuICByZXR1cm4gdW5pcXVlVm90ZXMoZmV0Y2hlZFZvdGVzKTtcclxufVxyXG5cclxuLy8gMzDstIggcG9sbGluZyArIGluRmxpZ2h0IOqzteycoCArIOyLpO2MqCDtj7TrsLEgKyDsoITssrQg7KaJ7IucIOuwmOyYgSjsgq3soJwg7Y+s7ZWoKVxyXG5hc3luYyBmdW5jdGlvbiBsb2FkVm90ZXNGcm9tU2hlZXQoKSB7XHJcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgaWYgKGxhc3RHb29kVm90ZXMgJiYgbm93IC0gbGFzdEZldGNoZWRBdCA8IE1JTl9SRUZSRVNIX01TKSB7XHJcbiAgICByZXR1cm4gbGFzdEdvb2RWb3RlcztcclxuICB9XHJcblxyXG4gIGlmIChpbkZsaWdodFJlcXVlc3QpIHtcclxuICAgIHJldHVybiBpbkZsaWdodFJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuICBpbkZsaWdodFJlcXVlc3QgPSAoYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgZmV0Y2hlZFZvdGVzID0gYXdhaXQgZmV0Y2hMYXRlc3RWb3RlcygpO1xyXG4gICAgbGFzdEdvb2RWb3RlcyA9IGZldGNoZWRWb3RlcztcclxuICAgIGxhc3RGZXRjaGVkQXQgPSBEYXRlLm5vdygpO1xyXG4gICAgcmV0dXJuIGZldGNoZWRWb3RlcztcclxuICB9KSgpO1xyXG5cclxuICB0cnkge1xyXG4gICAgcmV0dXJuIGF3YWl0IGluRmxpZ2h0UmVxdWVzdDtcclxuICB9IGNhdGNoIHtcclxuICAgIGlmIChsYXN0R29vZFZvdGVzKSByZXR1cm4gbGFzdEdvb2RWb3RlcztcclxuICAgIHJldHVybiBbXTtcclxuICB9IGZpbmFsbHkge1xyXG4gICAgaW5GbGlnaHRSZXF1ZXN0ID0gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRWb3Rlc0Zyb21TdXBhYmFzZSgpOiBQcm9taXNlPFZvdGVJdGVtW10gfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oXCJ2b3Rlc1wiKVxyXG4gICAgICAuc2VsZWN0KFwiKlwiKVxyXG4gICAgICAuZXEoXCJlbmFibGVkXCIsIHRydWUpXHJcbiAgICAgIC5vcmRlcihcImNyZWF0ZWRfYXRcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xyXG5cclxuICAgIGlmIChlcnJvciB8fCAhZGF0YSkgcmV0dXJuIG51bGw7XHJcbiAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xyXG5cclxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICBjb25zdCBpdGVtcyA9IGRhdGFcclxuICAgICAgLmZpbHRlcigocm93KSA9PiB7XHJcbiAgICAgICAgaWYgKCFyb3cuY2xvc2VzX2F0KSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBjb25zdCBkID0gcGFyc2VLc3REYXRlKHJvdy5jbG9zZXNfYXQpO1xyXG4gICAgICAgIGlmICghZCkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgcmV0dXJuIGQuZ2V0VGltZSgpID4gbm93O1xyXG4gICAgICB9KVxyXG4gICAgICAubWFwKChyb3cpID0+IHtcclxuICAgICAgICBjb25zdCBwbGF0Zm9ybXMgPSBwYXJzZVBsYXRmb3Jtcyhyb3cucGxhdGZvcm0gPz8gXCJcIik7XHJcbiAgICAgICAgY29uc3Qgb3BlbkRhdGUgPSBwYXJzZURhdGVLc3Qocm93Lm9wZW5zX2F0ID8/IFwiXCIpO1xyXG4gICAgICAgIGNvbnN0IGNsb3NlRGF0ZSA9IHBhcnNlRGF0ZUtzdChyb3cuY2xvc2VzX2F0ID8/IFwiXCIpO1xyXG4gICAgICAgIGNvbnN0IHJhd09wZW5zQXQgPSByb3cub3BlbnNfYXQ/LnRyaW0oKSA/PyBcIlwiO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBpZDogcm93LmlkLFxyXG4gICAgICAgICAgbGVnYWN5SWQ6IGhhc2hUb1ZvdGVJZChgJHtyb3cucGxhdGZvcm19fCR7cm93LnVybH1gKSxcclxuICAgICAgICAgIHRpdGxlOiByb3cudGl0bGU/LnRyaW0oKSA/PyBcIlwiLFxyXG4gICAgICAgICAgcGxhdGZvcm06IHBsYXRmb3Jtc1swXSxcclxuICAgICAgICAgIHBsYXRmb3JtTGFiZWw6IGxhYmVsRm9yUGxhdGZvcm0ocGxhdGZvcm1zWzBdKSxcclxuICAgICAgICAgIHBsYXRmb3JtcyxcclxuICAgICAgICAgIHBsYXRmb3JtTGFiZWxzOiBwbGF0Zm9ybXMubWFwKGxhYmVsRm9yUGxhdGZvcm0pLFxyXG4gICAgICAgICAgdXJsOiByb3cudXJsPy50cmltKCkgPz8gXCJcIixcclxuICAgICAgICAgIG9wZW5zQXQ6IGlzSW5Qcm9ncmVzc0tleXdvcmQocmF3T3BlbnNBdClcclxuICAgICAgICAgICAgPyBcIuynhO2WieykkVwiXHJcbiAgICAgICAgICAgIDogb3BlbkRhdGVcclxuICAgICAgICAgICAgPyBvcGVuRGF0ZS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgY2xvc2VzQXQ6IGNsb3NlRGF0ZSA/IGNsb3NlRGF0ZS50b0lTT1N0cmluZygpIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgbm90ZTogcm93Lm5vdGU/LnRyaW0oKSB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgfSBhcyBWb3RlSXRlbTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbHRlcigodikgPT4gdi50aXRsZSk7XHJcblxyXG4gICAgcmV0dXJuIHVuaXF1ZVZvdGVzKGl0ZW1zKTtcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcclxuICBjb25zdCBOT19DQUNIRSA9IHtcclxuICAgIFwiQ2FjaGUtQ29udHJvbFwiOiBcIm5vLXN0b3JlLCBuby1jYWNoZSwgbXVzdC1yZXZhbGlkYXRlLCBtYXgtYWdlPTBcIixcclxuICAgIFByYWdtYTogXCJuby1jYWNoZVwiLFxyXG4gICAgRXhwaXJlczogXCIwXCIsXHJcbiAgfTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlVm90ZXMgPSBhd2FpdCBsb2FkVm90ZXNGcm9tU3VwYWJhc2UoKTtcclxuICAgIGlmIChzdXBhYmFzZVZvdGVzICE9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihzdXBhYmFzZVZvdGVzLCB7IGhlYWRlcnM6IE5PX0NBQ0hFIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFtdLCB7IGhlYWRlcnM6IE5PX0NBQ0hFIH0pO1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFtdLCB7IHN0YXR1czogMjAwLCBoZWFkZXJzOiBOT19DQUNIRSB9KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInBhcnNlS3N0RGF0ZSIsInN1cGFiYXNlQWRtaW4iLCJkeW5hbWljIiwicmV2YWxpZGF0ZSIsIkZBTExCQUNLX0NTVl9VUkwiLCJQTEFURk9STV9MQUJFTFMiLCJpZG9sY2hhbXAiLCJtdWJlYXQiLCJ1cGljayIsImZhbmNhc3QiLCJmYW5wbHVzIiwicG9kb2FsIiwid2hvc2ZhbiIsImR1Y2thZCIsIm11bml2ZXJzZSIsIm15MXBpY2siLCJtbmV0cGx1cyIsImZhbm5zdGFyIiwiaGlnaGVyIiwia3RvcHN0YXIiLCJSRVFVRVNUX1RJTUVPVVRfTVMiLCJpbkZsaWdodFJlcXVlc3QiLCJNSU5fUkVGUkVTSF9NUyIsImxhc3RHb29kVm90ZXMiLCJsYXN0RmV0Y2hlZEF0Iiwid2l0aENhY2hlQnVzdGluZyIsInVybCIsImJ1Y2tldCIsIk1hdGgiLCJmbG9vciIsIkRhdGUiLCJub3ciLCJwYXJzZWQiLCJVUkwiLCJzZWFyY2hQYXJhbXMiLCJzZXQiLCJTdHJpbmciLCJ0b1N0cmluZyIsInNlcGFyYXRvciIsImluY2x1ZGVzIiwibm9ybWFsaXplQm9vbGVhbiIsInZhbHVlIiwibm9ybWFsaXplZCIsInRyaW0iLCJ0b0xvd2VyQ2FzZSIsIm5vcm1hbGl6ZVBsYXRmb3JtIiwicGxhdGZvcm0iLCJub3JtYWxpemVWb3RlVXJsIiwidm90ZUlkZW50aXR5S2V5IiwicGFyc2VQbGF0Zm9ybXMiLCJwbGF0Zm9ybXNSYXciLCJyZXBsYWNlIiwidW5pcXVlIiwiU2V0Iiwic3BsaXQiLCJtYXAiLCJmaWx0ZXIiLCJCb29sZWFuIiwiZm9yRWFjaCIsImFkZCIsInNpemUiLCJBcnJheSIsImZyb20iLCJsYWJlbEZvclBsYXRmb3JtIiwia2V5IiwiaXNJblByb2dyZXNzS2V5d29yZCIsInBhcnNlRGF0ZUtzdCIsInJhd1ZhbHVlIiwiaXNFeHBpcmVkIiwiY2xvc2VzQXQiLCJkYXRlIiwiZ2V0VGltZSIsImhhc2hUb1ZvdGVJZCIsInJhdyIsImhhc2giLCJpIiwibGVuZ3RoIiwiY2hhckNvZGVBdCIsImNyZWF0ZVN0YWJsZUlkIiwicm93IiwiY3JlYXRlTGVnYWN5U3RhYmxlSWQiLCJsZWdhY3lSYXciLCJ0aXRsZSIsIm9wZW5zQXQiLCJqb2luIiwicGFyc2VDc3ZMaW5lIiwibGluZSIsInZhbHVlcyIsImN1cnJlbnQiLCJpblF1b3RlcyIsImNoYXIiLCJuZXh0Q2hhciIsInB1c2giLCJwYXJzZUNzdiIsImNvbnRlbnQiLCJsaW5lcyIsImhlYWRlckxpbmUiLCJyb3dzIiwiaGVhZGVycyIsInJlY29yZCIsImhlYWRlciIsImluZGV4IiwidW5pcXVlVm90ZXMiLCJ2b3RlcyIsInNlZW4iLCJ2b3RlIiwiaGFzIiwiZmV0Y2hWb3Rlc0NzdiIsImNzdlVybCIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJ0aW1lb3V0Iiwic2V0VGltZW91dCIsImFib3J0IiwiY2FjaGVCdXN0ZWRVcmwiLCJyZXNwb25zZSIsImZldGNoIiwiY2FjaGUiLCJuZXh0IiwiQWNjZXB0IiwiUHJhZ21hIiwic2lnbmFsIiwib2siLCJFcnJvciIsInN0YXR1cyIsInRleHQiLCJjbGVhclRpbWVvdXQiLCJmZXRjaExhdGVzdFZvdGVzIiwicHJvY2VzcyIsImVudiIsIlZPVEVTX1NIRUVUX0NTVl9VUkwiLCJjc3YiLCJwYXJzZWRSb3dzIiwiZmV0Y2hlZFZvdGVzIiwiZW5hYmxlZCIsInBsYXRmb3JtcyIsInJhd09wZW5zQXQiLCJvcGVuRGF0ZSIsImNsb3NlRGF0ZSIsImlkIiwibGVnYWN5SWQiLCJwbGF0Zm9ybUxhYmVsIiwicGxhdGZvcm1MYWJlbHMiLCJ0b0lTT1N0cmluZyIsInVuZGVmaW5lZCIsIm5vdGUiLCJsb2FkVm90ZXNGcm9tU2hlZXQiLCJsb2FkVm90ZXNGcm9tU3VwYWJhc2UiLCJkYXRhIiwiZXJyb3IiLCJzZWxlY3QiLCJlcSIsIm9yZGVyIiwiYXNjZW5kaW5nIiwiaXRlbXMiLCJjbG9zZXNfYXQiLCJkIiwib3BlbnNfYXQiLCJ2IiwiR0VUIiwiTk9fQ0FDSEUiLCJFeHBpcmVzIiwic3VwYWJhc2VWb3RlcyIsImpzb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/votes/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/parseKstDate.ts":
/*!*****************************!*\
  !*** ./lib/parseKstDate.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseKstDate: () => (/* binding */ parseKstDate)\n/* harmony export */ });\nconst EXPLICIT_TIMEZONE_RE = /(z|[+-]\\d{2}:?\\d{2})$/i;\nfunction pad2(value) {\n    return String(value).padStart(2, \"0\");\n}\nfunction parseDatePartsAsKst(datePart, hour = 0, minute = 0, second = 0) {\n    const normalizedDate = normalizeDatePart(datePart);\n    if (!normalizedDate) return new Date(\"invalid\");\n    return new Date(`${normalizedDate}T${pad2(hour)}:${pad2(minute)}:${pad2(second)}+09:00`);\n}\nfunction normalizeDatePart(datePart) {\n    const [year, month, day] = datePart.split(\"-\");\n    if (!year || !month || !day) return null;\n    return `${year}-${pad2(month)}-${pad2(day)}`;\n}\nfunction parseKstDate(value) {\n    if (!value) return null;\n    const raw = value.trim();\n    if (!raw || raw.replace(/\\s+/g, \"\") === \"진행중\") return null;\n    if (EXPLICIT_TIMEZONE_RE.test(raw)) {\n        const explicit = new Date(raw);\n        return Number.isNaN(explicit.getTime()) ? null : explicit;\n    }\n    const normalized = raw.replace(/\\./g, \"-\").replace(/\\//g, \"-\").replace(/\\s*-\\s*/g, \"-\").replace(/\\s+/g, \" \").trim();\n    const amPmMatch = normalized.match(/^(\\d{4}-\\d{1,2}-\\d{1,2})\\s*(오전|오후)\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?$/);\n    if (amPmMatch) {\n        const [, datePart, amPm, rawHour, rawMinute, rawSecond] = amPmMatch;\n        let hour = Number(rawHour);\n        if (amPm === \"오전\" && hour === 12) hour = 0;\n        if (amPm === \"오후\" && hour < 12) hour += 12;\n        const parsed = parseDatePartsAsKst(datePart, hour, Number(rawMinute), Number(rawSecond ?? \"0\"));\n        return Number.isNaN(parsed.getTime()) ? null : parsed;\n    }\n    const numericMatch = normalized.match(/^(\\d{4}-\\d{1,2}-\\d{1,2})(?:\\s+(\\d{1,2})(?::(\\d{1,2}))?(?::(\\d{1,2}))?)?$/);\n    if (numericMatch) {\n        const [, datePart, rawHour, rawMinute, rawSecond] = numericMatch;\n        const parsed = parseDatePartsAsKst(datePart, Number(rawHour ?? \"0\"), Number(rawMinute ?? \"0\"), Number(rawSecond ?? \"0\"));\n        return Number.isNaN(parsed.getTime()) ? null : parsed;\n    }\n    const direct = new Date(raw);\n    return Number.isNaN(direct.getTime()) ? null : direct;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcGFyc2VLc3REYXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxNQUFNQSx1QkFBdUI7QUFFN0IsU0FBU0MsS0FBS0MsS0FBc0I7SUFDbEMsT0FBT0MsT0FBT0QsT0FBT0UsUUFBUSxDQUFDLEdBQUc7QUFDbkM7QUFFQSxTQUFTQyxvQkFBb0JDLFFBQWdCLEVBQUVDLE9BQU8sQ0FBQyxFQUFFQyxTQUFTLENBQUMsRUFBRUMsU0FBUyxDQUFDO0lBQzdFLE1BQU1DLGlCQUFpQkMsa0JBQWtCTDtJQUN6QyxJQUFJLENBQUNJLGdCQUFnQixPQUFPLElBQUlFLEtBQUs7SUFDckMsT0FBTyxJQUFJQSxLQUFLLENBQUMsRUFBRUYsZUFBZSxDQUFDLEVBQUVULEtBQUtNLE1BQU0sQ0FBQyxFQUFFTixLQUFLTyxRQUFRLENBQUMsRUFBRVAsS0FBS1EsUUFBUSxNQUFNLENBQUM7QUFDekY7QUFHQSxTQUFTRSxrQkFBa0JMLFFBQWdCO0lBQ3pDLE1BQU0sQ0FBQ08sTUFBTUMsT0FBT0MsSUFBSSxHQUFHVCxTQUFTVSxLQUFLLENBQUM7SUFDMUMsSUFBSSxDQUFDSCxRQUFRLENBQUNDLFNBQVMsQ0FBQ0MsS0FBSyxPQUFPO0lBQ3BDLE9BQU8sQ0FBQyxFQUFFRixLQUFLLENBQUMsRUFBRVosS0FBS2EsT0FBTyxDQUFDLEVBQUViLEtBQUtjLEtBQUssQ0FBQztBQUM5QztBQUVPLFNBQVNFLGFBQWFmLEtBQWM7SUFDekMsSUFBSSxDQUFDQSxPQUFPLE9BQU87SUFFbkIsTUFBTWdCLE1BQU1oQixNQUFNaUIsSUFBSTtJQUN0QixJQUFJLENBQUNELE9BQU9BLElBQUlFLE9BQU8sQ0FBQyxRQUFRLFFBQVEsT0FBTyxPQUFPO0lBRXRELElBQUlwQixxQkFBcUJxQixJQUFJLENBQUNILE1BQU07UUFDbEMsTUFBTUksV0FBVyxJQUFJVixLQUFLTTtRQUMxQixPQUFPSyxPQUFPQyxLQUFLLENBQUNGLFNBQVNHLE9BQU8sTUFBTSxPQUFPSDtJQUNuRDtJQUVBLE1BQU1JLGFBQWFSLElBQ2hCRSxPQUFPLENBQUMsT0FBTyxLQUNmQSxPQUFPLENBQUMsT0FBTyxLQUNmQSxPQUFPLENBQUMsWUFBWSxLQUNwQkEsT0FBTyxDQUFDLFFBQVEsS0FDaEJELElBQUk7SUFFUCxNQUFNUSxZQUFZRCxXQUFXRSxLQUFLLENBQUM7SUFDbkMsSUFBSUQsV0FBVztRQUNiLE1BQU0sR0FBR3JCLFVBQVV1QixNQUFNQyxTQUFTQyxXQUFXQyxVQUFVLEdBQUdMO1FBQzFELElBQUlwQixPQUFPZ0IsT0FBT087UUFDbEIsSUFBSUQsU0FBUyxRQUFRdEIsU0FBUyxJQUFJQSxPQUFPO1FBQ3pDLElBQUlzQixTQUFTLFFBQVF0QixPQUFPLElBQUlBLFFBQVE7UUFDeEMsTUFBTTBCLFNBQVM1QixvQkFBb0JDLFVBQVVDLE1BQU1nQixPQUFPUSxZQUFZUixPQUFPUyxhQUFhO1FBQzFGLE9BQU9ULE9BQU9DLEtBQUssQ0FBQ1MsT0FBT1IsT0FBTyxNQUFNLE9BQU9RO0lBQ2pEO0lBRUEsTUFBTUMsZUFBZVIsV0FBV0UsS0FBSyxDQUFDO0lBQ3RDLElBQUlNLGNBQWM7UUFDaEIsTUFBTSxHQUFHNUIsVUFBVXdCLFNBQVNDLFdBQVdDLFVBQVUsR0FBR0U7UUFDcEQsTUFBTUQsU0FBUzVCLG9CQUNiQyxVQUNBaUIsT0FBT08sV0FBVyxNQUNsQlAsT0FBT1EsYUFBYSxNQUNwQlIsT0FBT1MsYUFBYTtRQUV0QixPQUFPVCxPQUFPQyxLQUFLLENBQUNTLE9BQU9SLE9BQU8sTUFBTSxPQUFPUTtJQUNqRDtJQUVBLE1BQU1FLFNBQVMsSUFBSXZCLEtBQUtNO0lBQ3hCLE9BQU9LLE9BQU9DLEtBQUssQ0FBQ1csT0FBT1YsT0FBTyxNQUFNLE9BQU9VO0FBQ2pEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFkZXMtZmFuYXBwLy4vbGliL3BhcnNlS3N0RGF0ZS50cz8xNWMwIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEVYUExJQ0lUX1RJTUVaT05FX1JFID0gLyh6fFsrLV1cXGR7Mn06P1xcZHsyfSkkL2k7XHJcblxyXG5mdW5jdGlvbiBwYWQyKHZhbHVlOiBzdHJpbmcgfCBudW1iZXIpIHtcclxuICByZXR1cm4gU3RyaW5nKHZhbHVlKS5wYWRTdGFydCgyLCBcIjBcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlRGF0ZVBhcnRzQXNLc3QoZGF0ZVBhcnQ6IHN0cmluZywgaG91ciA9IDAsIG1pbnV0ZSA9IDAsIHNlY29uZCA9IDApIHtcclxuICBjb25zdCBub3JtYWxpemVkRGF0ZSA9IG5vcm1hbGl6ZURhdGVQYXJ0KGRhdGVQYXJ0KTtcclxuICBpZiAoIW5vcm1hbGl6ZWREYXRlKSByZXR1cm4gbmV3IERhdGUoXCJpbnZhbGlkXCIpO1xyXG4gIHJldHVybiBuZXcgRGF0ZShgJHtub3JtYWxpemVkRGF0ZX1UJHtwYWQyKGhvdXIpfToke3BhZDIobWludXRlKX06JHtwYWQyKHNlY29uZCl9KzA5OjAwYCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBub3JtYWxpemVEYXRlUGFydChkYXRlUGFydDogc3RyaW5nKSB7XHJcbiAgY29uc3QgW3llYXIsIG1vbnRoLCBkYXldID0gZGF0ZVBhcnQuc3BsaXQoXCItXCIpO1xyXG4gIGlmICgheWVhciB8fCAhbW9udGggfHwgIWRheSkgcmV0dXJuIG51bGw7XHJcbiAgcmV0dXJuIGAke3llYXJ9LSR7cGFkMihtb250aCl9LSR7cGFkMihkYXkpfWA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUtzdERhdGUodmFsdWU/OiBzdHJpbmcpIHtcclxuICBpZiAoIXZhbHVlKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgY29uc3QgcmF3ID0gdmFsdWUudHJpbSgpO1xyXG4gIGlmICghcmF3IHx8IHJhdy5yZXBsYWNlKC9cXHMrL2csIFwiXCIpID09PSBcIuynhO2WieykkVwiKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgaWYgKEVYUExJQ0lUX1RJTUVaT05FX1JFLnRlc3QocmF3KSkge1xyXG4gICAgY29uc3QgZXhwbGljaXQgPSBuZXcgRGF0ZShyYXcpO1xyXG4gICAgcmV0dXJuIE51bWJlci5pc05hTihleHBsaWNpdC5nZXRUaW1lKCkpID8gbnVsbCA6IGV4cGxpY2l0O1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgbm9ybWFsaXplZCA9IHJhd1xyXG4gICAgLnJlcGxhY2UoL1xcLi9nLCBcIi1cIilcclxuICAgIC5yZXBsYWNlKC9cXC8vZywgXCItXCIpXHJcbiAgICAucmVwbGFjZSgvXFxzKi1cXHMqL2csIFwiLVwiKVxyXG4gICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpXHJcbiAgICAudHJpbSgpO1xyXG5cclxuICBjb25zdCBhbVBtTWF0Y2ggPSBub3JtYWxpemVkLm1hdGNoKC9eKFxcZHs0fS1cXGR7MSwyfS1cXGR7MSwyfSlcXHMqKOyYpOyghHzsmKTtm4QpXFxzKihcXGR7MSwyfSk6KFxcZHsxLDJ9KSg/OjooXFxkezEsMn0pKT8kLyk7XHJcbiAgaWYgKGFtUG1NYXRjaCkge1xyXG4gICAgY29uc3QgWywgZGF0ZVBhcnQsIGFtUG0sIHJhd0hvdXIsIHJhd01pbnV0ZSwgcmF3U2Vjb25kXSA9IGFtUG1NYXRjaDtcclxuICAgIGxldCBob3VyID0gTnVtYmVyKHJhd0hvdXIpO1xyXG4gICAgaWYgKGFtUG0gPT09IFwi7Jik7KCEXCIgJiYgaG91ciA9PT0gMTIpIGhvdXIgPSAwO1xyXG4gICAgaWYgKGFtUG0gPT09IFwi7Jik7ZuEXCIgJiYgaG91ciA8IDEyKSBob3VyICs9IDEyO1xyXG4gICAgY29uc3QgcGFyc2VkID0gcGFyc2VEYXRlUGFydHNBc0tzdChkYXRlUGFydCwgaG91ciwgTnVtYmVyKHJhd01pbnV0ZSksIE51bWJlcihyYXdTZWNvbmQgPz8gXCIwXCIpKTtcclxuICAgIHJldHVybiBOdW1iZXIuaXNOYU4ocGFyc2VkLmdldFRpbWUoKSkgPyBudWxsIDogcGFyc2VkO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgbnVtZXJpY01hdGNoID0gbm9ybWFsaXplZC5tYXRjaCgvXihcXGR7NH0tXFxkezEsMn0tXFxkezEsMn0pKD86XFxzKyhcXGR7MSwyfSkoPzo6KFxcZHsxLDJ9KSk/KD86OihcXGR7MSwyfSkpPyk/JC8pO1xyXG4gIGlmIChudW1lcmljTWF0Y2gpIHtcclxuICAgIGNvbnN0IFssIGRhdGVQYXJ0LCByYXdIb3VyLCByYXdNaW51dGUsIHJhd1NlY29uZF0gPSBudW1lcmljTWF0Y2g7XHJcbiAgICBjb25zdCBwYXJzZWQgPSBwYXJzZURhdGVQYXJ0c0FzS3N0KFxyXG4gICAgICBkYXRlUGFydCxcclxuICAgICAgTnVtYmVyKHJhd0hvdXIgPz8gXCIwXCIpLFxyXG4gICAgICBOdW1iZXIocmF3TWludXRlID8/IFwiMFwiKSxcclxuICAgICAgTnVtYmVyKHJhd1NlY29uZCA/PyBcIjBcIiksXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIE51bWJlci5pc05hTihwYXJzZWQuZ2V0VGltZSgpKSA/IG51bGwgOiBwYXJzZWQ7XHJcbiAgfVxyXG5cclxuICBjb25zdCBkaXJlY3QgPSBuZXcgRGF0ZShyYXcpO1xyXG4gIHJldHVybiBOdW1iZXIuaXNOYU4oZGlyZWN0LmdldFRpbWUoKSkgPyBudWxsIDogZGlyZWN0O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJFWFBMSUNJVF9USU1FWk9ORV9SRSIsInBhZDIiLCJ2YWx1ZSIsIlN0cmluZyIsInBhZFN0YXJ0IiwicGFyc2VEYXRlUGFydHNBc0tzdCIsImRhdGVQYXJ0IiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsIm5vcm1hbGl6ZWREYXRlIiwibm9ybWFsaXplRGF0ZVBhcnQiLCJEYXRlIiwieWVhciIsIm1vbnRoIiwiZGF5Iiwic3BsaXQiLCJwYXJzZUtzdERhdGUiLCJyYXciLCJ0cmltIiwicmVwbGFjZSIsInRlc3QiLCJleHBsaWNpdCIsIk51bWJlciIsImlzTmFOIiwiZ2V0VGltZSIsIm5vcm1hbGl6ZWQiLCJhbVBtTWF0Y2giLCJtYXRjaCIsImFtUG0iLCJyYXdIb3VyIiwicmF3TWludXRlIiwicmF3U2Vjb25kIiwicGFyc2VkIiwibnVtZXJpY01hdGNoIiwiZGlyZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/parseKstDate.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase-admin.ts":
/*!*******************************!*\
  !*** ./lib/supabase-admin.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/index.mjs\");\n/**\r\n * lib/supabase-admin.ts\r\n * 서버 사이드 Supabase 클라이언트 (Service Role Key)\r\n */ \nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(process.env.SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UtYWRtaW4udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7O0NBR0MsR0FDb0Q7QUFFOUMsTUFBTUMsZ0JBQWdCRCxtRUFBWUEsQ0FDdkNFLFFBQVFDLEdBQUcsQ0FBQ0MsWUFBWSxFQUN4QkYsUUFBUUMsR0FBRyxDQUFDRSx5QkFBeUIsRUFDckMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYWRlcy1mYW5hcHAvLi9saWIvc3VwYWJhc2UtYWRtaW4udHM/Mzc5MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogbGliL3N1cGFiYXNlLWFkbWluLnRzXHJcbiAqIOyEnOuyhCDsgqzsnbTrk5wgU3VwYWJhc2Ug7YG065287J207Ja47Yq4IChTZXJ2aWNlIFJvbGUgS2V5KVxyXG4gKi9cclxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSBcIkBzdXBhYmFzZS9zdXBhYmFzZS1qc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlQWRtaW4gPSBjcmVhdGVDbGllbnQoXHJcbiAgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfVVJMISxcclxuICBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIVxyXG4pO1xyXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VBZG1pbiIsInByb2Nlc3MiLCJlbnYiLCJTVVBBQkFTRV9VUkwiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase-admin.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvotes%2Froute&page=%2Fapi%2Fvotes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvotes%2Froute.ts&appDir=C%3A%5Chades-fanapp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Chades-fanapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();